
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Code: Listado paginado - Tutorial Springboot - Angular</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../assets/style.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#desarrollo-de-un-listado-paginado" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Tutorial Springboot - Angular" class="md-header__button md-logo" aria-label="Tutorial Springboot - Angular" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tutorial Springboot - Angular
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Code: Listado paginado
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tutorial Springboot - Angular" class="md-nav__button md-logo" aria-label="Tutorial Springboot - Angular" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Tutorial Springboot - Angular
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Bienvenido!
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../thanks/" class="md-nav__link">
        Agradecimientos!
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../usecases/" class="md-nav__link">
        Contexto de la aplicación
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        Entorno de desarrollo
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../create/" class="md-nav__link">
        Creación de proyecto
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cleancode/" class="md-nav__link">
        Estructura y Clean Code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step1/" class="md-nav__link">
        Code: Desarrollo con Angular
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step2/" class="md-nav__link">
        Code: Desarrollo con Springboot
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step3/" class="md-nav__link">
        Code: Conectar front con back
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Code: Listado paginado
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Code: Listado paginado
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#desarrollo-angular" class="md-nav__link">
    Desarrollo Angular
  </a>
  
    <nav class="md-nav" aria-label="Desarrollo Angular">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-modulo-y-componentes" class="md-nav__link">
    Crear modulo y componentes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crear-el-modelo" class="md-nav__link">
    Crear el modelo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anadir-el-punto-de-entrada" class="md-nav__link">
    Añadir el punto de entrada
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-servicio" class="md-nav__link">
    Implementar servicio
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-listado" class="md-nav__link">
    Implementar listado
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-dialogo-edicion" class="md-nav__link">
    Implementar dialogo edición
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#desarrollo-springboot" class="md-nav__link">
    Desarrollo Springboot
  </a>
  
    <nav class="md-nav" aria-label="Desarrollo Springboot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modelos" class="md-nav__link">
    Modelos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tdd-pruebas" class="md-nav__link">
    TDD - Pruebas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller" class="md-nav__link">
    Controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository" class="md-nav__link">
    Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-de-las-operaciones" class="md-nav__link">
    Prueba de las operaciones
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conectar-front-con-back" class="md-nav__link">
    Conectar front con back
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step5/" class="md-nav__link">
        Code: Listado filtrado
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../exercise/" class="md-nav__link">
        Ahora hazlo tu!
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/git/" class="md-nav__link">
        Anexo. Tutorial básico de Git
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/rest/" class="md-nav__link">
        Anexo. Detalle REST
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/tdd/" class="md-nav__link">
        Anexo. TDD
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step6/" class="md-nav__link">
        Anexo. Validaciones (TBC)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step7/" class="md-nav__link">
        Anexo. Crear Login (TBC)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/styles/" class="md-nav__link">
        Anexo. Estilos (TBC)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/dates/" class="md-nav__link">
        Anexo. Fechas (TBC)
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#desarrollo-angular" class="md-nav__link">
    Desarrollo Angular
  </a>
  
    <nav class="md-nav" aria-label="Desarrollo Angular">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-modulo-y-componentes" class="md-nav__link">
    Crear modulo y componentes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crear-el-modelo" class="md-nav__link">
    Crear el modelo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anadir-el-punto-de-entrada" class="md-nav__link">
    Añadir el punto de entrada
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-servicio" class="md-nav__link">
    Implementar servicio
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-listado" class="md-nav__link">
    Implementar listado
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-dialogo-edicion" class="md-nav__link">
    Implementar dialogo edición
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#desarrollo-springboot" class="md-nav__link">
    Desarrollo Springboot
  </a>
  
    <nav class="md-nav" aria-label="Desarrollo Springboot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modelos" class="md-nav__link">
    Modelos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tdd-pruebas" class="md-nav__link">
    TDD - Pruebas
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller" class="md-nav__link">
    Controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository" class="md-nav__link">
    Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-de-las-operaciones" class="md-nav__link">
    Prueba de las operaciones
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conectar-front-con-back" class="md-nav__link">
    Conectar front con back
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="desarrollo-de-un-listado-paginado">Desarrollo de un listado paginado</h1>
<p>Ya tienes tu primer listado desarrollado, tanto en front como en back. ¿Ha sido sencillo, verdad?.</p>
<p>Ahora vamos a implementar un listado un poco más complejo, este tiene datos paginados en servidor, esto quiere decir que no nos sirve un array de datos como en el anterior ejemplo. 
Para que un listado paginado en servidor funcione, el cliente debe enviar en cada petición que página está solicitando y cual es el tamaño de la página, para que el servidor devuelva solamente un subconjunto de datos, en lugar de devolver el listado completo.</p>
<p>Como ya conocemos como se debe desarrollar, en este ejemplo vamos a ir más rápidos y nos vamos a centrar únicamente en las novedades.</p>
<h2 id="desarrollo-angular">Desarrollo Angular</h2>
<h3 id="crear-modulo-y-componentes">Crear modulo y componentes</h3>
<p>Vamos a desarrollar el listado de <code>Autores</code> así que, debemos crear los componentes:</p>
<div class="highlight"><pre><span></span><code>ng generate module author
ng generate component author/author-list
ng generate component author/author-edit

ng generate service author/author
</code></pre></div>
<p>Este módulo lo vamos a añadir a la aplicación para que se cargue en el arranque. Abrimos el fichero <code>app.module.ts</code> y añadimos el módulo:</p>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">app.module.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/platform-browser&#39;</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">AppRoutingModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./app-routing.module&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./app.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserAnimationsModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/platform-browser/animations&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CoreModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./core/core.module&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CategoryModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./category/category.module&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./author/author.module&#39;</span><span class="p">;</span>
</span>
<span class="kd">@NgModule</span><span class="p">({</span>
<span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">AppComponent</span>
<span class="p">],</span>
<span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">BrowserModule</span><span class="p">,</span>
    <span class="nx">AppRoutingModule</span><span class="p">,</span>
    <span class="nx">CoreModule</span><span class="p">,</span>
    <span class="nx">CategoryModule</span><span class="p">,</span>
<span class="hll">    <span class="nx">AuthorModule</span><span class="p">,</span>
</span>    <span class="nx">BrowserAnimationsModule</span>
<span class="p">],</span>
<span class="nx">providers</span><span class="o">:</span> <span class="p">[],</span>
<span class="nx">bootstrap</span><span class="o">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</div>
</div>
<h3 id="crear-el-modelo">Crear el modelo</h3>
<p>Creamos el modelo en <code>author/model/Author.ts</code> con las propiedades necesarias para trabajar con la información de un autor:</p>
<div class="tabbed-set" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Author.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">Author</span> <span class="p">{</span>
    <span class="nx">id</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">nationality</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<h3 id="anadir-el-punto-de-entrada">Añadir el punto de entrada</h3>
<p>Añadimos la ruta al menú para que podamos acceder a la pantalla:</p>
<div class="tabbed-set" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">app-routing.module.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Routes</span><span class="p">,</span> <span class="nx">RouterModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CategoryListComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./category/category-list/category-list.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorListComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./author/author-list/author-list.component&#39;</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">routes</span>: <span class="kt">Routes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">CategoriesComponent</span> <span class="p">},</span>
<span class="hll">    <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;authors&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">AuthorListComponent</span> <span class="p">},</span>
</span><span class="p">];</span>

<span class="kd">@NgModule</span><span class="p">({</span>
    <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)],</span>
    <span class="nx">exports</span><span class="o">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</div>
</div>
<h3 id="implementar-servicio">Implementar servicio</h3>
<p>Y realizamos las diferentes implementaciones. Empezaremos por el servicio. En este caso, hay un cambio sustancial con el anterior ejemplo. Al tratarse de un listado paginado, la operación <code>getAuthors</code> necesita información extra acerca de que página de datos debe mostrar, además de que el resultado ya no será un listado sino una página. </p>
<p>Por defecto el esquema de datos de Spring para la paginación es como el siguiente:</p>
<div class="tabbed-set" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">Esquema de datos de paginación</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="err">...</span> <span class="err">&lt;lis</span><span class="kc">ta</span><span class="err">do</span> <span class="err">co</span><span class="kc">n</span> <span class="err">los</span> <span class="err">resul</span><span class="kc">ta</span><span class="err">dos</span> <span class="err">pagi</span><span class="kc">na</span><span class="err">dos&gt;</span> <span class="err">...</span> <span class="p">],</span>
    <span class="nt">&quot;pageable&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;pageNumber&quot;</span><span class="p">:</span> <span class="err">&lt;</span><span class="kc">n</span><span class="err">úmero</span> <span class="err">de</span> <span class="err">pági</span><span class="kc">na</span> <span class="err">empeza</span><span class="kc">n</span><span class="err">do</span> <span class="err">por</span> <span class="mi">0</span><span class="err">&gt;</span><span class="p">,</span>
        <span class="nt">&quot;pageSize&quot;</span><span class="p">:</span> <span class="err">&lt;</span><span class="kc">ta</span><span class="err">maño</span> <span class="err">de</span> <span class="err">pági</span><span class="kc">na</span><span class="err">&gt;</span><span class="p">,</span>
        <span class="nt">&quot;sort&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span> 
                <span class="nt">&quot;property&quot;</span><span class="p">:</span> <span class="err">&lt;</span><span class="kc">n</span><span class="err">ombre</span> <span class="err">de</span> <span class="err">la</span> <span class="err">propiedad</span> <span class="err">a</span> <span class="err">orde</span><span class="kc">nar</span><span class="err">&gt;</span><span class="p">,</span> 
                <span class="nt">&quot;direction&quot;</span><span class="p">:</span> <span class="err">&lt;direcció</span><span class="kc">n</span> <span class="err">de</span> <span class="err">la</span> <span class="err">orde</span><span class="kc">na</span><span class="err">ció</span><span class="kc">n</span> <span class="err">ASC</span> <span class="err">/</span> <span class="err">DESC&gt;</span> 
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;totalElements&quot;</span><span class="p">:</span> <span class="err">&lt;</span><span class="kc">nu</span><span class="err">mero</span> <span class="kc">t</span><span class="err">o</span><span class="kc">tal</span> <span class="err">de</span> <span class="err">eleme</span><span class="kc">nt</span><span class="err">os</span> <span class="err">e</span><span class="kc">n</span> <span class="err">la</span> <span class="kc">ta</span><span class="err">bla&gt;</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Así que necesitamos poder enviar y recuperar esa información desde Angular, nos hace falta crear esos objetos. Los objetos de paginación al ser comunes a toda la aplicación, vamos a crearlos en <code>core/model/page</code>, mientras que la paginación de <code>AuthorPage.ts</code> la crearé en su propio model dentro de <code>author/model</code>.</p>
<div class="tabbed-set" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><label for="__tabbed_5_1">SortPage.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">SortPage</span> <span class="p">{</span>
    <span class="nx">property</span>: <span class="kt">String</span><span class="p">;</span>
    <span class="nx">direction</span>: <span class="kt">String</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><label for="__tabbed_5_2">Pageable.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SortPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./SortPage&#39;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">Pageable</span> <span class="p">{</span>
    <span class="nx">pageNumber</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="nx">pageSize</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="nx">sort</span>: <span class="kt">SortPage</span><span class="p">[];</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><label for="__tabbed_5_3">AuthorPage.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Pageable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;src/app/core/model/page/Pageable&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./Author&quot;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthorPage</span> <span class="p">{</span>
    <span class="nx">content</span>: <span class="kt">Author</span><span class="p">[];</span>
    <span class="nx">pageable</span>: <span class="kt">Pageable</span><span class="p">;</span>
    <span class="nx">totalElements</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Con estos objetos creados ya podemos implementar el servicio y sus datos mockeados.</p>
<div class="tabbed-set" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><label for="__tabbed_6_1">mock-authors.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./AuthorPage&quot;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">AUTHOR_DATA</span>: <span class="kt">AuthorPage</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">content</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Klaus Teuber&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Alemania&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Matt Leacock&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Estados Unidos&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">id</span>: <span class="kt">3</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Keng Leong Yeo&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Singapur&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">id</span>: <span class="kt">4</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Gil Hova&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Estados Unidos&#39;</span><span class="p">},</span>
        <span class="p">{</span> <span class="nx">id</span>: <span class="kt">5</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Kelly Adams&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Estados Unidos&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">id</span>: <span class="kt">6</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;J. Alex Kavern&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Estados Unidos&#39;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">id</span>: <span class="kt">7</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Corey Young&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Estados Unidos&#39;</span> <span class="p">},</span>
    <span class="p">],</span>  
    <span class="nx">pageable</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">pageSize</span>: <span class="kt">5</span><span class="p">,</span>
        <span class="nx">pageNumber</span>: <span class="kt">0</span><span class="p">,</span>
        <span class="nx">sort</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="nx">property</span><span class="o">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nx">direction</span><span class="o">:</span> <span class="s2">&quot;ASC&quot;</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nx">totalElements</span>: <span class="kt">7</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><label for="__tabbed_6_2">author.service.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="k">of</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Pageable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../core/model/page/Pageable&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./model/Author&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./model/AuthorPage&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AUTHOR_DATA</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./model/mock-authors&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">({</span>
    <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthorService</span> <span class="p">{</span>

    <span class="kr">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">getAuthors</span><span class="p">(</span><span class="nx">pageable</span>: <span class="kt">Pageable</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">AuthorPage</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">AUTHOR_DATA</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">saveAuthor</span><span class="p">(</span><span class="nx">author</span>: <span class="kt">Author</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">deleteAuthor</span><span class="p">(</span><span class="nx">idAuthor</span> : <span class="kt">number</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span>    
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<h3 id="implementar-listado">Implementar listado</h3>
<p>Ya tenemos el servicio con los datos, ahora vamos a por el listado paginado.</p>
<div class="tabbed-set" data-tabs="7:3"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><label for="__tabbed_7_1">author-list.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Listado de Autores<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">mat-table</span> <span class="err">[</span><span class="na">dataSource</span><span class="err">]=&quot;</span><span class="na">dataSource</span><span class="err">&quot;</span><span class="p">&gt;</span> 
        <span class="p">&lt;</span><span class="nt">ng-container</span> <span class="na">matColumnDef</span><span class="o">=</span><span class="s">&quot;id&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-header-cell</span> <span class="err">*</span><span class="na">matHeaderCellDef</span><span class="p">&gt;</span> Identificador <span class="p">&lt;/</span><span class="nt">mat-header-cell</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-cell</span> <span class="err">*</span><span class="na">matCellDef</span><span class="o">=</span><span class="s">&quot;let element&quot;</span><span class="p">&gt;</span> {{element.id}} <span class="p">&lt;/</span><span class="nt">mat-cell</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ng-container</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">ng-container</span> <span class="na">matColumnDef</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-header-cell</span> <span class="err">*</span><span class="na">matHeaderCellDef</span><span class="p">&gt;</span> Nombre autor  <span class="p">&lt;/</span><span class="nt">mat-header-cell</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-cell</span> <span class="err">*</span><span class="na">matCellDef</span><span class="o">=</span><span class="s">&quot;let element&quot;</span><span class="p">&gt;</span> {{element.name}} <span class="p">&lt;/</span><span class="nt">mat-cell</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ng-container</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">ng-container</span> <span class="na">matColumnDef</span><span class="o">=</span><span class="s">&quot;nationality&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-header-cell</span> <span class="err">*</span><span class="na">matHeaderCellDef</span><span class="p">&gt;</span> Nacionalidad  <span class="p">&lt;/</span><span class="nt">mat-header-cell</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-cell</span> <span class="err">*</span><span class="na">matCellDef</span><span class="o">=</span><span class="s">&quot;let element&quot;</span><span class="p">&gt;</span> {{element.nationality}} <span class="p">&lt;/</span><span class="nt">mat-cell</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ng-container</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">ng-container</span> <span class="na">matColumnDef</span><span class="o">=</span><span class="s">&quot;action&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-header-cell</span> <span class="err">*</span><span class="na">matHeaderCellDef</span><span class="p">&gt;&lt;/</span><span class="nt">mat-header-cell</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-cell</span> <span class="err">*</span><span class="na">matCellDef</span><span class="o">=</span><span class="s">&quot;let element&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">editAuthor</span><span class="err">(</span><span class="na">element</span><span class="err">)&quot;</span><span class="p">&gt;</span>edit<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-icon-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;accent&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">mat-icon</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">deleteAuthor</span><span class="err">(</span><span class="na">element</span><span class="err">)&quot;</span><span class="p">&gt;</span>clear<span class="p">&lt;/</span><span class="nt">mat-icon</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">mat-cell</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ng-container</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">mat-header-row</span> <span class="err">*</span><span class="na">matHeaderRowDef</span><span class="o">=</span><span class="s">&quot;displayedColumns; sticky: true&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">mat-header-row</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">mat-row</span> <span class="err">*</span><span class="na">matRowDef</span><span class="o">=</span><span class="s">&quot;let row; columns: displayedColumns;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">mat-row</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">mat-table</span><span class="p">&gt;</span> 

<span class="hll">    <span class="p">&lt;</span><span class="nt">mat-paginator</span> <span class="err">(</span><span class="na">page</span><span class="err">)=&quot;</span><span class="na">loadPage</span><span class="err">($</span><span class="na">event</span><span class="err">)&quot;</span> <span class="err">[</span><span class="na">pageSizeOptions</span><span class="err">]=&quot;[</span><span class="na">5</span><span class="err">,</span> <span class="na">10</span><span class="err">,</span> <span class="na">20</span><span class="err">]&quot;</span> <span class="err">[</span><span class="na">pageIndex</span><span class="err">]=&quot;</span><span class="na">pageNumber</span><span class="err">&quot;</span> <span class="err">[</span><span class="na">pageSize</span><span class="err">]=&quot;</span><span class="na">pageSize</span><span class="err">&quot;</span> <span class="err">[</span><span class="na">length</span><span class="err">]=&quot;</span><span class="na">totalElements</span><span class="err">&quot;</span> <span class="na">showFirstLastButtons</span><span class="p">&gt;&lt;/</span><span class="nt">mat-paginator</span><span class="p">&gt;</span>
</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;buttons&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-flat-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">createAuthor</span><span class="err">()&quot;</span><span class="p">&gt;</span>Nuevo autor<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span> 
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>   
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><label for="__tabbed_7_2">author-list.component.scss</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
    <span class="k">margin</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>

    <span class="err">mat-table</span> <span class="err">{</span>
        <span class="k">margin-top</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>

        <span class="err">.mat-header-row</span> <span class="err">{</span>
            <span class="k">background-color</span><span class="p">:</span><span class="mh">#f5f5f5</span><span class="p">;</span>

            <span class="err">.mat-header-cell</span> <span class="err">{</span>
                <span class="k">text-transform</span><span class="p">:</span> <span class="kc">uppercase</span><span class="p">;</span>
                <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
                <span class="k">color</span><span class="p">:</span> <span class="mh">#838383</span><span class="p">;</span>
            <span class="p">}</span>      
        <span class="err">}</span>

        <span class="p">.</span><span class="nc">mat-column-id</span> <span class="p">{</span>
            <span class="k">flex</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">20</span><span class="kt">%</span><span class="p">;</span>
            <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="p">.</span><span class="nc">mat-column-action</span> <span class="p">{</span>
            <span class="k">flex</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">10</span><span class="kt">%</span><span class="p">;</span>
            <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="err">}</span>

    <span class="p">.</span><span class="nc">buttons</span> <span class="p">{</span>
        <span class="k">text-align</span><span class="p">:</span> <span class="kc">right</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>
</code></pre></div>
</div>
<input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><label for="__tabbed_7_3">author-list.component.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatDialog</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/dialog&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">PageEvent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/paginator&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatTableDataSource</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/table&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">DialogConfirmationComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/core/dialog-confirmation/dialog-confirmation.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Pageable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/core/model/page/Pageable&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorEditComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../author-edit/author-edit.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorService</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../author.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../model/Author&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
<span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-author-list&#39;</span><span class="p">,</span>
<span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./author-list.component.html&#39;</span><span class="p">,</span>
<span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./author-list.component.scss&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthorListComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

<span class="hll">    <span class="nx">pageNumber</span>: <span class="kt">number</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
</span><span class="hll">    <span class="nx">pageSize</span>: <span class="kt">number</span> <span class="o">=</span> <span class="mf">5</span><span class="p">;</span>
</span><span class="hll">    <span class="nx">totalElements</span>: <span class="kt">number</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>
</span>
    <span class="nx">dataSource</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">MatTableDataSource</span><span class="o">&lt;</span><span class="nx">Author</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="nx">displayedColumns</span>: <span class="kt">string</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;nationality&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">];</span>

    <span class="kr">constructor</span><span class="p">(</span>
        <span class="k">private</span> <span class="nx">authorService</span>: <span class="kt">AuthorService</span><span class="p">,</span>
        <span class="k">public</span> <span class="nx">dialog</span>: <span class="kt">MatDialog</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="ow">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">loadPage</span><span class="p">();</span>
    <span class="p">}</span>

<span class="hll">    <span class="nx">loadPage</span><span class="p">(</span><span class="nx">event?</span>: <span class="kt">PageEvent</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">
</span><span class="hll">        <span class="kd">let</span> <span class="nx">pageable</span> : <span class="kt">Pageable</span> <span class="o">=</span>  <span class="p">{</span>
</span><span class="hll">            <span class="nx">pageNumber</span>: <span class="kt">this.pageNumber</span><span class="p">,</span>
</span><span class="hll">            <span class="nx">pageSize</span>: <span class="kt">this.pageSize</span><span class="p">,</span>
</span><span class="hll">            <span class="nx">sort</span><span class="o">:</span> <span class="p">[{</span>
</span><span class="hll">                <span class="nx">property</span><span class="o">:</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
</span><span class="hll">                <span class="nx">direction</span><span class="o">:</span> <span class="s1">&#39;ASC&#39;</span>
</span><span class="hll">            <span class="p">}]</span>
</span><span class="hll">        <span class="p">}</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">if</span> <span class="p">(</span><span class="nx">event</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">            <span class="nx">pageable</span><span class="p">.</span><span class="nx">pageSize</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageSize</span>
</span><span class="hll">            <span class="nx">pageable</span><span class="p">.</span><span class="nx">pageNumber</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageIndex</span><span class="p">;</span>
</span><span class="hll">        <span class="p">}</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="nx">authorService</span><span class="p">.</span><span class="nx">getAuthors</span><span class="p">(</span><span class="nx">pageable</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">data</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span><span class="hll">            <span class="k">this</span><span class="p">.</span><span class="nx">dataSource</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">content</span><span class="p">;</span>
</span><span class="hll">            <span class="k">this</span><span class="p">.</span><span class="nx">pageNumber</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pageable</span><span class="p">.</span><span class="nx">pageNumber</span><span class="p">;</span>
</span><span class="hll">            <span class="k">this</span><span class="p">.</span><span class="nx">pageSize</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pageable</span><span class="p">.</span><span class="nx">pageSize</span><span class="p">;</span>
</span><span class="hll">            <span class="k">this</span><span class="p">.</span><span class="nx">totalElements</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">totalElements</span><span class="p">;</span>
</span><span class="hll">        <span class="p">});</span>
</span><span class="hll">
</span><span class="hll">    <span class="p">}</span>  
</span>
    <span class="nx">createAuthor</span><span class="p">()</span> <span class="p">{</span>      
        <span class="kd">const</span> <span class="nx">dialogRef</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">dialog</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">AuthorEditComponent</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">data</span><span class="o">:</span> <span class="p">{}</span>
        <span class="p">});</span>

        <span class="nx">dialogRef</span><span class="p">.</span><span class="nx">afterClosed</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">ngOnInit</span><span class="p">();</span>
        <span class="p">});</span>      
    <span class="p">}</span>  

    <span class="nx">editAuthor</span><span class="p">(</span><span class="nx">author</span>: <span class="kt">Author</span><span class="p">)</span> <span class="p">{</span>    
        <span class="kd">const</span> <span class="nx">dialogRef</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">dialog</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">AuthorEditComponent</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">author</span>: <span class="kt">author</span> <span class="p">}</span>
        <span class="p">});</span>

        <span class="nx">dialogRef</span><span class="p">.</span><span class="nx">afterClosed</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">ngOnInit</span><span class="p">();</span>
        <span class="p">});</span>    
    <span class="p">}</span>

    <span class="nx">deleteAuthor</span><span class="p">(</span><span class="nx">author</span>: <span class="kt">Author</span><span class="p">)</span> <span class="p">{</span>    
        <span class="kd">const</span> <span class="nx">dialogRef</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">dialog</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">DialogConfirmationComponent</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Eliminar autor&quot;</span><span class="p">,</span> <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;Atención si borra el autor se perderán sus datos.&lt;br&gt; ¿Desea eliminar el autor?&quot;</span> <span class="p">}</span>
        <span class="p">});</span>

        <span class="nx">dialogRef</span><span class="p">.</span><span class="nx">afterClosed</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">authorService</span><span class="p">.</span><span class="nx">deleteAuthor</span><span class="p">(</span><span class="nx">author</span><span class="p">.</span><span class="nx">id</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span>  <span class="p">{</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">ngOnInit</span><span class="p">();</span>
                <span class="p">});</span> 
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>  
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Fíjate como hemos añadido la paginación. </p>
<ul>
<li>Al HTML le hemos añadido un componente nuevo <code>mat-paginator</code>, lo que nos va a obligar a añadirlo al módulo también como dependencia. Ese componente le hemos definido un método <code>page</code> que se ejecuta cada vez que la página cambia, y unas propiedades con las que calculará la página, el tamaño y el número total de páginas.</li>
<li>Al Typescript le hemos tenido que añadir esas variables y hemos creado un método para cargar datos que lo que hace es construir un objeto <code>pageable</code> con los valores actuales del componente paginador y lanza la petición con esos datos en el body. Obviamente al ser un mock no funcionará el cambio de página y demás.</li>
</ul>
<p>Como siempre, añadimos las dependencias al módulo, vamos a intentar añadir todas las que vamos a necesitar a futuro.</p>
<div class="tabbed-set" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><label for="__tabbed_8_1">author.module.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CommonModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorListComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./author-list/author-list.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorEditComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./author-edit/author-edit.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatTableModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/table&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FormsModule</span><span class="p">,</span> <span class="nx">ReactiveFormsModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatButtonModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatDialogModule</span><span class="p">,</span> <span class="nx">MAT_DIALOG_DATA</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/dialog&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatFormFieldModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/form-field&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatIconModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatInputModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/input&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatPaginatorModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/paginator&#39;</span><span class="p">;</span>



<span class="kd">@NgModule</span><span class="p">({</span>
<span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">AuthorListComponent</span><span class="p">,</span>
    <span class="nx">AuthorEditComponent</span>
<span class="p">],</span>
<span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">CommonModule</span><span class="p">,</span>
    <span class="nx">MatTableModule</span><span class="p">,</span>
    <span class="nx">MatIconModule</span><span class="p">,</span> 
    <span class="nx">MatButtonModule</span><span class="p">,</span>
    <span class="nx">MatDialogModule</span><span class="p">,</span>
    <span class="nx">MatFormFieldModule</span><span class="p">,</span>
    <span class="nx">MatInputModule</span><span class="p">,</span>
    <span class="nx">FormsModule</span><span class="p">,</span>
    <span class="nx">ReactiveFormsModule</span><span class="p">,</span>
    <span class="nx">MatPaginatorModule</span><span class="p">,</span>
<span class="p">],</span>
<span class="nx">providers</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="nx">provide</span>: <span class="kt">MAT_DIALOG_DATA</span><span class="p">,</span>
        <span class="nx">useValue</span><span class="o">:</span> <span class="p">{},</span>
    <span class="p">},</span>
<span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthorModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Debería verse algo similar a esto:</p>
<p><img alt="step4-angular1" src="../../assets/images/step4-angular1.png" /></p>
<h3 id="implementar-dialogo-edicion">Implementar dialogo edición</h3>
<p>El último paso, es definir la pantalla de dialogo que realizará el alta y modificado de los datos de un <code>Autor</code>.</p>
<div class="tabbed-set" data-tabs="9:3"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><label for="__tabbed_9_1">author-edit.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;author.id == null&quot;</span><span class="p">&gt;</span>Crear autor<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;author.id != null&quot;</span><span class="p">&gt;</span>Modificar autor<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Identificador<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Identificador&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">author</span><span class="err">.</span><span class="na">id</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;id&quot;</span> <span class="na">disabled</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Nombre<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Nombre del autor&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">author</span><span class="err">.</span><span class="na">name</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;name&quot;</span> <span class="na">required</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>El nombre no puede estar vacío<span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Nacionalidad<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Nacionalidad del autor&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">author</span><span class="err">.</span><span class="na">nationality</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;nationality&quot;</span> <span class="na">required</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>La nacionalidad no puede estar vacía<span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;buttons&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-stroked-button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">onClose</span><span class="err">()&quot;</span><span class="p">&gt;</span>Cerrar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-flat-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">onSave</span><span class="err">()&quot;</span><span class="p">&gt;</span>Guardar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><label for="__tabbed_9_2">author-edit.component.scss</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
    <span class="k">min-width</span><span class="p">:</span> <span class="mi">350</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">max-width</span><span class="p">:</span> <span class="mi">500</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>

    <span class="err">form</span> <span class="err">{</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
        <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
        <span class="k">margin-bottom</span><span class="p">:</span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">.</span><span class="nc">buttons</span> <span class="p">{</span>
    <span class="k">text-align</span><span class="p">:</span> <span class="kc">right</span><span class="p">;</span>

    <span class="err">button</span> <span class="err">{</span>
        <span class="k">margin-left</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="err">}</span>
<span class="err">}</span>
</code></pre></div>
</div>
<input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><label for="__tabbed_9_3">author-edit.component.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">Inject</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatDialogRef</span><span class="p">,</span> <span class="nx">MAT_DIALOG_DATA</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/dialog&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorService</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../author.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../model/Author&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
<span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-author-edit&#39;</span><span class="p">,</span>
<span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./author-edit.component.html&#39;</span><span class="p">,</span>
<span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./author-edit.component.scss&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthorEditComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

    <span class="nx">author</span> : <span class="kt">Author</span><span class="p">;</span>

    <span class="kr">constructor</span><span class="p">(</span>
        <span class="k">public</span> <span class="nx">dialogRef</span>: <span class="kt">MatDialogRef</span><span class="o">&lt;</span><span class="nx">AuthorEditComponent</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="kd">@Inject</span><span class="p">(</span><span class="nx">MAT_DIALOG_DATA</span><span class="p">)</span> <span class="k">public</span> <span class="nx">data</span>: <span class="kt">any</span><span class="p">,</span>
        <span class="k">private</span> <span class="nx">authorService</span>: <span class="kt">AuthorService</span>
    <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="ow">void</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">author</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">author</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">author</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">author</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">Author</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">onSave</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">authorService</span><span class="p">.</span><span class="nx">saveAuthor</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">author</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span>  <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">dialogRef</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
        <span class="p">});</span> 
    <span class="p">}</span>  

    <span class="nx">onClose</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dialogRef</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Que debería quedar algo así:</p>
<p><img alt="step4-angular2" src="../../assets/images/step4-angular2.png" /></p>
<h2 id="desarrollo-springboot">Desarrollo Springboot</h2>
<h3 id="modelos">Modelos</h3>
<p>Lo primero que vamos a hacer es crear los modelos para trabajar con BBDD y con peticiones hacia el front. Además, también tenemos que añadir datos al script de inicialización de BBDD.</p>
<div class="tabbed-set" data-tabs="10:4"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><label for="__tabbed_10_1">schema.sql</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="n">CATEGORY</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">CATEGORY</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">BIGINT</span> <span class="k">IDENTITY</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">);</span>


<span class="hll"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="n">AUTHOR</span><span class="p">;</span>
</span><span class="hll">
</span><span class="hll"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">AUTHOR</span> <span class="p">(</span>
</span><span class="hll">    <span class="n">id</span> <span class="nb">BIGINT</span> <span class="k">IDENTITY</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
</span><span class="hll">    <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
</span><span class="hll">    <span class="n">nationality</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
</span><span class="hll"><span class="p">);</span>
</span></code></pre></div>
</div>
<input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><label for="__tabbed_10_2">data.sql</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">CATEGORY</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Eurogames&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">CATEGORY</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Ameritrash&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">CATEGORY</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Familiar&#39;</span><span class="p">);</span>

<span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Alan R. Moon&#39;</span><span class="p">,</span> <span class="s1">&#39;US&#39;</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Vital Lacerda&#39;</span><span class="p">,</span> <span class="s1">&#39;PT&#39;</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Simone Luciani&#39;</span><span class="p">,</span> <span class="s1">&#39;IT&#39;</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Perepau Llistosella&#39;</span><span class="p">,</span> <span class="s1">&#39;ES&#39;</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Michael Kiesling&#39;</span><span class="p">,</span> <span class="s1">&#39;DE&#39;</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Phil Walker-Harding&#39;</span><span class="p">,</span> <span class="s1">&#39;US&#39;</span><span class="p">);</span>
</span></code></pre></div>
</div>
<input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><label for="__tabbed_10_3">Author.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Table</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author ccsw</span>
<span class="cm">*/</span>
<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Author&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Author</span> <span class="p">{</span>

    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="n">GenerationType</span><span class="p">.</span><span class="na">IDENTITY</span><span class="p">)</span>
    <span class="nd">@Column</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="p">;</span>

    <span class="nd">@Column</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;name&quot;</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>

    <span class="nd">@Column</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;nationality&quot;</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">nationality</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * @return id</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">getId</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param id new value of {@link #getid}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return name</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param name new value of {@link #getname}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="p">(</span><span class="n">String</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return nationality</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getNationality</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">nationality</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param nationality new value of {@link #getnationality}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setNationality</span><span class="p">(</span><span class="n">String</span> <span class="n">nationality</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">nationality</span> <span class="o">=</span> <span class="n">nationality</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_10_4" name="__tabbed_10" type="radio" /><label for="__tabbed_10_4">AuthorDto.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author ccsw</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorDto</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">nationality</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * @return id</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">getId</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param id new value of {@link #getid}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return name</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param name new value of {@link #getname}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="p">(</span><span class="n">String</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return nationality</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getNationality</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">nationality</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param nationality new value of {@link #getnationality}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setNationality</span><span class="p">(</span><span class="n">String</span> <span class="n">nationality</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">nationality</span> <span class="o">=</span> <span class="n">nationality</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<h3 id="tdd-pruebas">TDD - Pruebas</h3>
<p>Para desarrollar todas las operaciones, empezaremos primero diseñando las pruebas y luego implementando el código necesario que haga funcionar correctamente esas pruebas. Para ir más rápido vamos a poner todas las pruebas de golpe, pero realmente se deberían crear una a una e ir implementando el código necesario para esa prueba. Para evitar tantas iteraciones en el tutorial las haremos todas de golpe.</p>
<p>Vamos a pararnos a pensar un poco que necesitamos en la pantalla. Ahora mismo nos sirve con:</p>
<ul>
<li>Una consulta paginada, que reciba datos de la página a consultar y devuelva los datos paginados</li>
<li>Una operación de guardado y modificación</li>
<li>Una operación de borrado</li>
</ul>
<p>Para la primera prueba necesitaremos que hemos descrito (consulta paginada) se necesita un objeto que contenga los datos de la página a consultar. Así que crearemos una clase <code>AuthorSearchDto</code> para utilizarlo como 'paginador'. </p>
<div class="admonition tip">
<p class="admonition-title">Paginación en Springframework</p>
<p>Cuando utilicemos paginación en Springframework, debemos recordar que ya vienen implementados algunos objetos que podemos utilizar y que nos facilitan la vida. Es el caso de <code>Pageable</code> y <code>Page</code>.</p>
<ul>
<li>El objeto <code>Pageable</code> no es más que una interface que le permite a Spring JPA saber que página se quiere buscar, cual es el tamaño de página y cuales son las propiedades de ordenación que se debe lanzar en la consulta.</li>
<li>El objeto <code>PageRequest</code> es una utilidad que permite crear objetos de tipo <code>Pageable</code> de forma sencilla. Se utiliza mucho para codificación de test.</li>
<li>El objeto <code>Page</code> no es más que un contenedor que engloba la información básica de la página que se está consultando (número de página, tamaño de página, número total de resultados) y el conjunto de datos de la BBDD que contiene esa página una vez han sido buscados y ordenados.</li>
</ul>
</div>
<p>También crearemos una clase <code>AuthorController</code> dentro del package de <code>com.capgemini.ccsw.tutorial.author</code> con la implementación de los métodos vacíos, para que no falle la compilación.</p>
<p>¡Vamos a implementar test!</p>
<div class="tabbed-set" data-tabs="11:3"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><label for="__tabbed_11_1">AuthorSearchDto.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Pageable</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author ccsw</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorSearchDto</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">Pageable</span> <span class="n">pageable</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * @return pageable</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Pageable</span> <span class="nf">getPageable</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">pageable</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param pageable new value of {@link #getPageable}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPageable</span><span class="p">(</span><span class="n">Pageable</span> <span class="n">pageable</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">pageable</span> <span class="o">=</span> <span class="n">pageable</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><label for="__tabbed_11_2">AuthorController.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author ccsw</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorController</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar un listado paginado de {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param dto</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">AuthorDto</span><span class="o">&gt;</span> <span class="nf">findPage</span><span class="p">(</span><span class="n">AuthorSearchDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param id</span>
<span class="cm">    * @param data datos de la entidad </span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">,</span> <span class="n">AuthorDto</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>

    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param id PK de la entidad</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><label for="__tabbed_11_3">AuthorTest.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author</span><span class="p">;</span>

<span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertEquals</span><span class="p">;</span>
<span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertNotNull</span><span class="p">;</span>
<span class="kn">import static</span> <span class="nn">org.junit.jupiter.api.Assertions.assertThrows</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.PageRequest</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.category.model.CategoryDto</span><span class="p">;</span>

<span class="nd">@SpringBootTest</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorTest</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">TOTAL_AUTORS</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">AuthorController</span> <span class="n">authorController</span><span class="p">;</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findFirstPageWithFiveSizeShouldReturnFirstFiveResults</span><span class="p">()</span> <span class="p">{</span>

        <span class="kt">int</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">authorController</span><span class="p">);</span>

        <span class="n">AuthorSearchDto</span> <span class="n">dto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorSearchDto</span><span class="p">();</span>
        <span class="n">dto</span><span class="p">.</span><span class="na">setPageable</span><span class="p">(</span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pageSize</span><span class="p">));</span>

        <span class="n">Page</span><span class="o">&lt;</span><span class="n">AuthorDto</span><span class="o">&gt;</span> <span class="n">resultPage</span> <span class="o">=</span> <span class="n">authorController</span><span class="p">.</span><span class="na">findPage</span><span class="p">(</span><span class="n">dto</span><span class="p">);</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">resultPage</span><span class="p">);</span>

        <span class="n">assertEquals</span><span class="p">(</span><span class="n">TOTAL_AUTORS</span><span class="p">,</span> <span class="n">resultPage</span><span class="p">.</span><span class="na">getTotalElements</span><span class="p">());</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">pageSize</span><span class="p">,</span> <span class="n">resultPage</span><span class="p">.</span><span class="na">getContent</span><span class="p">().</span><span class="na">size</span><span class="p">());</span>

    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">findSecondPageWithFiveSizeShouldReturnLastTwoResults</span><span class="p">()</span> <span class="p">{</span>

        <span class="kt">int</span> <span class="n">pageSize</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">elementsCount</span> <span class="o">=</span> <span class="n">TOTAL_AUTORS</span> <span class="o">-</span> <span class="n">pageSize</span><span class="p">;</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">authorController</span><span class="p">);</span>

        <span class="n">AuthorSearchDto</span> <span class="n">searchDto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorSearchDto</span><span class="p">();</span>
        <span class="n">searchDto</span><span class="p">.</span><span class="na">setPageable</span><span class="p">(</span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">pageSize</span><span class="p">));</span>

        <span class="n">Page</span><span class="o">&lt;</span><span class="n">AuthorDto</span><span class="o">&gt;</span> <span class="n">resultPage</span> <span class="o">=</span> <span class="n">authorController</span><span class="p">.</span><span class="na">findPage</span><span class="p">(</span><span class="n">searchDto</span><span class="p">);</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">resultPage</span><span class="p">);</span>

        <span class="n">assertEquals</span><span class="p">(</span><span class="n">TOTAL_AUTORS</span><span class="p">,</span> <span class="n">resultPage</span><span class="p">.</span><span class="na">getTotalElements</span><span class="p">());</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">elementsCount</span><span class="p">,</span> <span class="n">resultPage</span><span class="p">.</span><span class="na">getContent</span><span class="p">().</span><span class="na">size</span><span class="p">());</span>

    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveWithoutIdShouldCreateNewAuthor</span><span class="p">()</span> <span class="p">{</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">authorController</span><span class="p">);</span>

        <span class="n">String</span> <span class="n">newAuthorName</span> <span class="o">=</span> <span class="s">&quot;Nuevo Autor&quot;</span><span class="p">;</span>
        <span class="n">String</span> <span class="n">newNationality</span> <span class="o">=</span> <span class="s">&quot;Nueva Nacionalidad&quot;</span><span class="p">;</span>

        <span class="kt">long</span> <span class="n">newAuthorId</span> <span class="o">=</span> <span class="n">TOTAL_AUTORS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">long</span> <span class="n">newAuthorSize</span> <span class="o">=</span> <span class="n">TOTAL_AUTORS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

        <span class="n">AuthorDto</span> <span class="n">dto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorDto</span><span class="p">();</span>
        <span class="n">dto</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="n">newAuthorName</span><span class="p">);</span>
        <span class="n">dto</span><span class="p">.</span><span class="na">setNationality</span><span class="p">(</span><span class="n">newNationality</span><span class="p">);</span>

        <span class="n">authorController</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="n">dto</span><span class="p">);</span>

        <span class="n">AuthorSearchDto</span> <span class="n">searchDto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorSearchDto</span><span class="p">();</span>
        <span class="n">searchDto</span><span class="p">.</span><span class="na">setPageable</span><span class="p">(</span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">newAuthorSize</span><span class="p">));</span>

        <span class="n">Page</span><span class="o">&lt;</span><span class="n">AuthorDto</span><span class="o">&gt;</span> <span class="n">resultPage</span> <span class="o">=</span> <span class="n">authorController</span><span class="p">.</span><span class="na">findPage</span><span class="p">(</span><span class="n">searchDto</span><span class="p">);</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">resultPage</span><span class="p">);</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">newAuthorSize</span><span class="p">,</span> <span class="n">resultPage</span><span class="p">.</span><span class="na">getTotalElements</span><span class="p">());</span>

        <span class="n">AuthorDto</span> <span class="n">author</span> <span class="o">=</span> <span class="n">resultPage</span><span class="p">.</span><span class="na">getContent</span><span class="p">().</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">item</span> <span class="o">-&gt;</span> <span class="n">item</span><span class="p">.</span><span class="na">getId</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="n">newAuthorId</span><span class="p">)).</span><span class="na">findFirst</span><span class="p">().</span><span class="na">orElse</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">author</span><span class="p">);</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">newAuthorName</span><span class="p">,</span> <span class="n">author</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>

    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">modifyWithExistIdShouldModifyCategory</span><span class="p">()</span> <span class="p">{</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">authorController</span><span class="p">);</span>

        <span class="n">String</span> <span class="n">newAuthorName</span> <span class="o">=</span> <span class="s">&quot;Nuevo Autor&quot;</span><span class="p">;</span>
        <span class="kt">long</span> <span class="n">authorId</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

        <span class="n">CategoryDto</span> <span class="n">dto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CategoryDto</span><span class="p">();</span>
        <span class="n">dto</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="n">newAuthorName</span><span class="p">);</span>

        <span class="n">authorController</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">authorId</span><span class="p">,</span> <span class="n">dto</span><span class="p">);</span>

        <span class="n">AuthorSearchDto</span> <span class="n">searchDto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorSearchDto</span><span class="p">();</span>
        <span class="n">searchDto</span><span class="p">.</span><span class="na">setPageable</span><span class="p">(</span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">authorId</span><span class="p">));</span>

        <span class="n">Page</span><span class="o">&lt;</span><span class="n">AuthorDto</span><span class="o">&gt;</span> <span class="n">resultPage</span> <span class="o">=</span> <span class="n">authorController</span><span class="p">.</span><span class="na">findPage</span><span class="p">(</span><span class="n">searchDto</span><span class="p">);</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">resultPage</span><span class="p">);</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">TOTAL_AUTORS</span><span class="p">,</span> <span class="n">resultPage</span><span class="p">.</span><span class="na">getTotalElements</span><span class="p">());</span>

        <span class="n">AuthorDto</span> <span class="n">author</span> <span class="o">=</span> <span class="n">resultPage</span><span class="p">.</span><span class="na">getContent</span><span class="p">().</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">item</span> <span class="o">-&gt;</span> <span class="n">item</span><span class="p">.</span><span class="na">getId</span><span class="p">().</span><span class="na">equals</span><span class="p">(</span><span class="n">authorId</span><span class="p">)).</span><span class="na">findFirst</span><span class="p">().</span><span class="na">orElse</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">author</span><span class="p">);</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">newAuthorName</span><span class="p">,</span> <span class="n">author</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span>

    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">modifyWithNotExistIdShouldThrowException</span><span class="p">()</span> <span class="p">{</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">authorController</span><span class="p">);</span>

        <span class="n">String</span> <span class="n">newAuthorName</span> <span class="o">=</span> <span class="s">&quot;Nuevo Autor&quot;</span><span class="p">;</span>
        <span class="kt">long</span> <span class="n">authorId</span> <span class="o">=</span> <span class="n">TOTAL_AUTORS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

        <span class="n">CategoryDto</span> <span class="n">dto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CategoryDto</span><span class="p">();</span>
        <span class="n">dto</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="n">newAuthorName</span><span class="p">);</span>

        <span class="n">assertThrows</span><span class="p">(</span><span class="n">Exception</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">authorController</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">authorId</span><span class="p">,</span> <span class="n">dto</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteWithExistsIdShouldDeleteCategory</span><span class="p">()</span> <span class="p">{</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">authorController</span><span class="p">);</span>

        <span class="kt">long</span> <span class="n">newAuthorsSize</span> <span class="o">=</span> <span class="n">TOTAL_AUTORS</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">long</span> <span class="n">deleteAuthorId</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

        <span class="n">authorController</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">deleteAuthorId</span><span class="p">);</span>

        <span class="n">AuthorSearchDto</span> <span class="n">searchDto</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AuthorSearchDto</span><span class="p">();</span>
        <span class="n">searchDto</span><span class="p">.</span><span class="na">setPageable</span><span class="p">(</span><span class="n">PageRequest</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">TOTAL_AUTORS</span><span class="p">));</span>

        <span class="n">Page</span><span class="o">&lt;</span><span class="n">AuthorDto</span><span class="o">&gt;</span> <span class="n">resultPage</span> <span class="o">=</span> <span class="n">authorController</span><span class="p">.</span><span class="na">findPage</span><span class="p">(</span><span class="n">searchDto</span><span class="p">);</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">resultPage</span><span class="p">);</span>
        <span class="n">assertEquals</span><span class="p">(</span><span class="n">newAuthorsSize</span><span class="p">,</span> <span class="n">resultPage</span><span class="p">.</span><span class="na">getTotalElements</span><span class="p">());</span>

    <span class="p">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteWithNotExistsIdShouldThrowException</span><span class="p">()</span> <span class="p">{</span>

        <span class="n">assertNotNull</span><span class="p">(</span><span class="n">authorController</span><span class="p">);</span>

        <span class="kt">long</span> <span class="n">deleteAuthorId</span> <span class="o">=</span> <span class="n">TOTAL_AUTORS</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

        <span class="n">assertThrows</span><span class="p">(</span><span class="n">Exception</span><span class="p">.</span><span class="na">class</span><span class="p">,</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">authorController</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">deleteAuthorId</span><span class="p">));</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<div class="admonition info">
<p class="admonition-title">Cuidado con las clases de Test</p>
<p>Recuerda que el código de aplicación debe ir en <code>src/main/java</code>, mientras que las clases de test deben ir en <code>src/test/java</code> para que no se mezclen unas con otras y se empaquete todo en el artefacto final. En este caso <code>AuthorTest.java</code> va en el directorio de test <code>src/test/java</code>.</p>
</div>
<p>Si ejecutamos los test, el resultado será 7 maravillosos test que fallan su ejecución. Es normal, puesto que no hemos implementado nada de código de aplicación para corresponder esos test.</p>
<h3 id="controller">Controller</h3>
<p>Si recuerdas, esta capa de <code>Controller</code> es la que tiene los endpoints de entrada a la aplicación. Nosotros ya tenemos definidas 3 operaciones, que hemos diseñado directamente desde los tests. Ahora vamos a implementar esos métodos con el código necesario para que los test funcionen correctamente, y teniendo en mente que debemos apoyarnos en las capas inferiores <code>Service</code> y <code>Repository</code> para repartir lógica de negocio y acceso a datos.</p>
<div class="tabbed-set" data-tabs="12:2"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><label for="__tabbed_12_1">AuthorController.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.CrossOrigin</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.config.mapper.BeanMapper</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author ccsw</span>
<span class="cm">*/</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/author&quot;</span><span class="p">)</span>
<span class="nd">@RestController</span>
<span class="nd">@CrossOrigin</span><span class="p">(</span><span class="n">origins</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorController</span> <span class="p">{</span>

<span class="hll">    <span class="nd">@Autowired</span>
</span><span class="hll">    <span class="n">AuthorService</span> <span class="n">authorService</span><span class="p">;</span>
</span>
    <span class="nd">@Autowired</span>
    <span class="n">BeanMapper</span> <span class="n">beanMapper</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar un listado paginado de {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param dto</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="p">.</span><span class="na">POST</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">AuthorDto</span><span class="o">&gt;</span> <span class="nf">findPage</span><span class="p">(</span><span class="nd">@RequestBody</span> <span class="n">AuthorSearchDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">beanMapper</span><span class="p">.</span><span class="na">mapPage</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">authorService</span><span class="p">.</span><span class="na">findPage</span><span class="p">(</span><span class="n">dto</span><span class="p">),</span> <span class="n">AuthorDto</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param id</span>
<span class="cm">    * @param data datos de la entidad </span>
<span class="cm">    */</span>
    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;/{id}&quot;</span> <span class="p">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="p">.</span><span class="na">PUT</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span> <span class="n">Long</span> <span class="n">id</span><span class="p">,</span> <span class="nd">@RequestBody</span> <span class="n">AuthorDto</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">authorService</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param id PK de la entidad</span>
<span class="cm">    */</span>
    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/{id}&quot;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="p">.</span><span class="na">DELETE</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span> <span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">authorService</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><label for="__tabbed_12_2">AuthorService.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.Author</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author ccsw</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AuthorService</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar un listado paginado de {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param dto</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">Page</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">findPage</span><span class="p">(</span><span class="n">AuthorSearchDto</span> <span class="n">dto</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param id</span>
<span class="cm">    * @param data</span>
<span class="cm">    */</span>
    <span class="kt">void</span> <span class="nf">save</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">,</span> <span class="n">AuthorDto</span> <span class="n">data</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param id</span>
<span class="cm">    */</span>
    <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">);</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Si te fijas, hemos trasladado toda la lógica a llamadas al <code>AuthorService</code> que hemos inyectado, y para que no falle la compilación hemos creado una interface con los métodos necesarios.</p>
<p>En la clase <code>AuthorController</code> es donde se hacen las conversiones de cara al cliente, pasaremos de un <code>Page&lt;Author&gt;</code> (modelo entidad) a un <code>Page&lt;AuthorDto&gt;</code> (modelo DTO) con la ayuda del beanMapper. Recuerda que al cliente no le deben llegar modelos entidades sino DTOs.</p>
<p>Además, el método de carga <code>findPage</code> ya no es un método de tipo <code>GET</code>, ahora es de tipo <code>POST</code> porque le tenemos que enviar los datos de la paginación para que Spring JPA pueda hacer su magia.</p>
<p>Ahora debemos implementar la siguiente capa.</p>
<h3 id="service">Service</h3>
<p>La siguiente capa que vamos a implementar es justamente la capa que contiene toda la lógica de negocio, hace uso del <code>Repository</code> para acceder a los datos, y recibe llamadas generalmente de los <code>Controller</code>.</p>
<div class="tabbed-set" data-tabs="13:2"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><label for="__tabbed_13_1">AuthorServiceImpl.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.transaction.Transactional</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.BeanUtils</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.Author</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author ccsw</span>
<span class="cm">*/</span>
<span class="nd">@Service</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorServiceImpl</span> <span class="kd">implements</span> <span class="n">AuthorService</span> <span class="p">{</span>

<span class="hll">    <span class="nd">@Autowired</span>
</span><span class="hll">    <span class="n">AuthorRepository</span> <span class="n">authorRepository</span><span class="p">;</span>
</span>
    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">findPage</span><span class="p">(</span><span class="n">AuthorSearchDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getPageable</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">,</span> <span class="n">AuthorDto</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">Author</span> <span class="n">author</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">id</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
            <span class="n">author</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">id</span><span class="p">).</span><span class="na">orElse</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="k">else</span>
            <span class="n">author</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Author</span><span class="p">();</span>

<span class="hll">        <span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="s">&quot;id&quot;</span><span class="p">);</span>
</span>
        <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">author</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">deleteById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>

    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><label for="__tabbed_13_2">AuthorRepository.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Pageable</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.repository.CrudRepository</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.Author</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author ccsw</span>
<span class="cm">*/</span>
<span class="hll"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AuthorRepository</span> <span class="kd">extends</span> <span class="n">CrudRepository</span><span class="o">&lt;</span><span class="n">Author</span><span class="p">,</span> <span class="n">Long</span><span class="o">&gt;</span> <span class="p">{</span>
</span>
    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar un listado paginado de {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param page</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">Page</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="p">(</span><span class="n">Pageable</span> <span class="n">pageable</span><span class="p">);</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>De nuevo pasa lo mismo que con la capa anterior, aquí delegamos muchas operaciones de consulta y guardado de datos en <code>AuthorRepository</code>. Hemos tenido que crearlo como interface para que no falle la compilación. Recuerda que cuando creamos un <code>Repository</code> es de gran ayuda hacerlo extender de <code>CrudRepository&lt;T, ID&gt;</code> ya que tiene muchos métodos implementados de base que nos pueden servir, como el <code>delete</code> o el <code>save</code>.</p>
<p>Fíjate también que cuando queremos copiar más de un dato de una clase a otra, tenemos una utilidad llamada <code>BeanUtils</code> que nos permite realizar esa copia (siempre que las propiedades de ambas clases se llamen igual). Además, en nuestro ejemplo hemos ignorado el 'id' para que no nos copie un null a la clase destino.</p>
<h3 id="repository">Repository</h3>
<p>Y llegamos a la última capa, la que está más cerca de los datos finales. Tenemos la siguiente interface:</p>
<div class="tabbed-set" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><label for="__tabbed_14_1">AuthorRepository.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.ccsw.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Pageable</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.repository.CrudRepository</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.ccsw.tutorial.author.model.Author</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author ccsw</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AuthorRepository</span> <span class="kd">extends</span> <span class="n">CrudRepository</span><span class="o">&lt;</span><span class="n">Author</span><span class="p">,</span> <span class="n">Long</span><span class="o">&gt;</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar un listado paginado de {@link com.capgemini.ccsw.tutorial.author.model.Author}</span>
<span class="cm">    * @param page</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">Page</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="p">(</span><span class="n">Pageable</span> <span class="n">pageable</span><span class="p">);</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Si te fijas, este <code>Repository</code> ya no está vacío como el anterior, no nos sirve con las operaciones básicas del <code>CrudRepository</code> en este caso hemos tenido que añadir un método nuevo al que pasandole un objeto de tipo <code>Pageable</code> nos devuelva una <code>Page</code>.</p>
<p>Pues bien, resulta que la mágina de Spring JPA en este caso hará su trabajo y nosotros no necesitamos implementar ninguna query, Spring ya entiende que un <code>findAll</code> significa que debe recuperar todos los datos de la tabla <code>Author</code> (que es la tabla que tiene como <code>generico</code> en <code>CrudRepository</code>) y además deben estar paginados ya que el método devuelve un objeto tipo <code>Page</code>. Nos ahorra tener que generar una sql para buscar una página concreta de datos y hacer un <code>count</code> de la tabla para obtener el total de resultados. Para ver otros ejemplos y más información, visita la página de <a href="https://www.baeldung.com/spring-data-derived-queries">QueryMethods</a>. Realmente se puede hacer muchísimas cosas con solo escribir el nombre del método, sin tener que pensar ni teclear ninguna sql.</p>
<p>Con esto ya lo tendríamos todo. </p>
<h3 id="prueba-de-las-operaciones">Prueba de las operaciones</h3>
<p>Si ahora ejecutamos los test jUnit, veremos que todos funcionan y están en verde. Hemos implementado todas nuestras pruebas y la aplicación es correcta.</p>
<p><img alt="step4-java0" src="../../assets/images/step4-java0.png" /></p>
<p>Aun así, debemos realizar pruebas con el postman para ver los resultados que nos ofrece el back. Para ello, tienes que levantar la aplición y ejecutar las siguientes operaciones:</p>
<p><strong> POST /author </strong> 
<div class="highlight"><pre><span></span><code>{
    &quot;pageable&quot;: {
        &quot;pageSize&quot; : 4,
        &quot;pageNumber&quot; : 0,
        &quot;sort&quot; : [
            {
                &quot;property&quot;: &quot;name&quot;,
                &quot;direction&quot;: &quot;ASC&quot;
            }
        ]
    }
}
</code></pre></div>
Nos devuelve un listado paginado de <code>Autores</code>. Fíjate que los datos que se envían están en el body como formato JSON (parte izquierda de la imagen). Si no envías datos con formato <code>Pageable</code>, te dará un error. También fíjate que la respuesta es de tipo <code>Page</code>. Prueba a jugar con los datos de paginación e incluso de ordenación. No hemos programado ninguna SQL pero Spring hace su magia.</p>
<p><img alt="step4-java1" src="../../assets/images/step4-java1.png" /></p>
<p><strong> PUT /author </strong> </p>
<p><strong> PUT /author/{id} </strong> 
<div class="highlight"><pre><span></span><code>{
    &quot;name&quot; : &quot;Nuevo autor&quot;,
    &quot;nationality&quot; : &quot;Nueva nacionalidad&quot;
}
</code></pre></div>
Nos sirve para insertar <code>Autores</code> nuevas (si no tienen el id informado) o para actualizar <code>Autores</code> (si tienen el id informado en la URL).  Fíjate que los datos que se envían están en el body como formato JSON (parte izquierda de la imagen). Si no te dará un error.</p>
<p><img alt="step4-java2" src="../../assets/images/step4-java2.png" />
<img alt="step4-java3" src="../../assets/images/step4-java3.png" /></p>
<p><strong> DELETE /author/{id} </strong>  nos sirve eliminar <code>Autores</code>. Fíjate que el dato del ID que se envía está en el path.</p>
<p><img alt="step4-java4" src="../../assets/images/step4-java4.png" /></p>
<h2 id="conectar-front-con-back">Conectar front con back</h2>
<p>Una vez implementado front y back, lo que nos queda es modificar el servicio del front para que conecte directamente con las operaciones ofrecidas por el back.</p>
<div class="tabbed-set" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><label for="__tabbed_15_1">author.service.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="k">of</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Pageable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../core/model/page/Pageable&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./model/Author&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./model/AuthorPage&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">({</span>
<span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthorService</span> <span class="p">{</span>

    <span class="kr">constructor</span><span class="p">(</span>
<span class="hll">        <span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span>
</span>    <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">getAuthors</span><span class="p">(</span><span class="nx">pageable</span>: <span class="kt">Pageable</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">AuthorPage</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="hll">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="o">&lt;</span><span class="nx">AuthorPage</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/author&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">pageable</span>:<span class="kt">pageable</span><span class="p">});</span>
</span>    <span class="p">}</span>

    <span class="nx">saveAuthor</span><span class="p">(</span><span class="nx">author</span>: <span class="kt">Author</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="hll">        <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;http://localhost:8080/author&#39;</span><span class="p">;</span>
</span><span class="hll">        <span class="k">if</span> <span class="p">(</span><span class="nx">author</span><span class="p">.</span><span class="nx">id</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">url</span> <span class="o">+=</span> <span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="nx">author</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">put</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">author</span><span class="p">);</span>
</span>    <span class="p">}</span>

    <span class="nx">deleteAuthor</span><span class="p">(</span><span class="nx">idAuthor</span> : <span class="kt">number</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="hll">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="ow">delete</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/author/&#39;</span><span class="o">+</span><span class="nx">idAuthor</span><span class="p">);</span>
</span>    <span class="p">}</span>    
<span class="p">}</span>
</code></pre></div>
</div>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Pie">
      
        
        <a href="../step3/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Code: Conectar front con back" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Anterior
              </span>
              Code: Conectar front con back
            </div>
          </div>
        </a>
      
      
        
        <a href="../step5/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: Code: Listado filtrado" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Siguiente
              </span>
              Code: Listado filtrado
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>