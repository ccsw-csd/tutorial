
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Code: Listado filtrado - Tutorial Springboot - Angular</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../assets/style.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#desarrollo-de-un-listado-filtrado" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Tutorial Springboot - Angular" class="md-header__button md-logo" aria-label="Tutorial Springboot - Angular" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tutorial Springboot - Angular
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Code: Listado filtrado
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tutorial Springboot - Angular" class="md-nav__button md-logo" aria-label="Tutorial Springboot - Angular" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Tutorial Springboot - Angular
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Bienvenido!
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../thanks/" class="md-nav__link">
        Agradecimientos!
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../usecases/" class="md-nav__link">
        Contexto de la aplicación
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        Entorno de desarrollo
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../create/" class="md-nav__link">
        Creación de proyecto
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../cleancode/" class="md-nav__link">
        Estructura y Clean Code (TBD)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step1/" class="md-nav__link">
        Code: Desarrollo con Angular
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step2/" class="md-nav__link">
        Code: Desarrollo con Springboot
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step3/" class="md-nav__link">
        Code: Conectar front con back
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step4/" class="md-nav__link">
        Code: Listado paginado
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Code: Listado filtrado
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Code: Listado filtrado
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#desarrollo-angular" class="md-nav__link">
    Desarrollo Angular
  </a>
  
    <nav class="md-nav" aria-label="Desarrollo Angular">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-componentes" class="md-nav__link">
    Crear componentes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crear-el-modelo" class="md-nav__link">
    Crear el modelo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anadir-el-punto-de-entrada" class="md-nav__link">
    Añadir el punto de entrada
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-servicio" class="md-nav__link">
    Implementar servicio
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-listado" class="md-nav__link">
    Implementar listado
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-detalle-del-item" class="md-nav__link">
    Implementar detalle del item
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-dialogo-de-edicion" class="md-nav__link">
    Implementar dialogo de edición
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#desarrollo-springboot" class="md-nav__link">
    Desarrollo Springboot
  </a>
  
    <nav class="md-nav" aria-label="Desarrollo Springboot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modelos" class="md-nav__link">
    Modelos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository" class="md-nav__link">
    Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller" class="md-nav__link">
    Controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-de-las-operaciones" class="md-nav__link">
    Prueba de las operaciones
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-listado-autores" class="md-nav__link">
    Implementar listado Autores
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conectar-front-con-back" class="md-nav__link">
    Conectar front con back
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step6/" class="md-nav__link">
        Code: Validaciones (TBD)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step7/" class="md-nav__link">
        Code: Crear Login (TBD)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../step8/" class="md-nav__link">
        Code: Testing (TBD)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../exercise/" class="md-nav__link">
        Ahora hazlo tu!
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/styles/" class="md-nav__link">
        Anexo. Estilos (TBD)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/dates/" class="md-nav__link">
        Anexo. Fechas (TBD)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/git/" class="md-nav__link">
        Anexo. Tutorial básico de Git
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#desarrollo-angular" class="md-nav__link">
    Desarrollo Angular
  </a>
  
    <nav class="md-nav" aria-label="Desarrollo Angular">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-componentes" class="md-nav__link">
    Crear componentes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crear-el-modelo" class="md-nav__link">
    Crear el modelo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anadir-el-punto-de-entrada" class="md-nav__link">
    Añadir el punto de entrada
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-servicio" class="md-nav__link">
    Implementar servicio
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-listado" class="md-nav__link">
    Implementar listado
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-detalle-del-item" class="md-nav__link">
    Implementar detalle del item
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-dialogo-de-edicion" class="md-nav__link">
    Implementar dialogo de edición
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#desarrollo-springboot" class="md-nav__link">
    Desarrollo Springboot
  </a>
  
    <nav class="md-nav" aria-label="Desarrollo Springboot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modelos" class="md-nav__link">
    Modelos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository" class="md-nav__link">
    Repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controller" class="md-nav__link">
    Controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-de-las-operaciones" class="md-nav__link">
    Prueba de las operaciones
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementar-listado-autores" class="md-nav__link">
    Implementar listado Autores
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conectar-front-con-back" class="md-nav__link">
    Conectar front con back
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="desarrollo-de-un-listado-filtrado">Desarrollo de un listado filtrado</h1>
<p>En este punto ya tenemos dos listados, uno básico y otro paginado. Ahora vamos a implementar un listado un poco diferente, con filtros y con una presentación un tanto distinta.</p>
<p>Como ya conocemos como se debe desarrollar, en este ejemplo vamos a ir más rápidos y nos vamos a centrar únicamente en las novedades.</p>
<h2 id="desarrollo-angular">Desarrollo Angular</h2>
<h3 id="crear-componentes">Crear componentes</h3>
<p>Vamos a desarrollar el listado de <code>Juegos</code>. Este listado es un tanto peculiar, porque no tiene una tabla como tal, sino que tiene una tabla con "tiles" para cada uno de los juegos. Necesitaremos un componente para el listado y otro componente para el detalle del juego. También necesitaremos otro componente para el dialogo de edición / alta.</p>
<p>Manos a la obra:</p>
<div class="highlight"><pre><span></span><code>ng generate component views/games
ng generate component views/games/game-detail
ng generate component views/games/game-dialog

ng generate service services/games/game
</code></pre></div>
<h3 id="crear-el-modelo">Crear el modelo</h3>
<p>Lo primero que vamos a hacer es crear el modelo en <code>models/games/Game.ts</code> con todas las propiedades necesarias para trabajar con un juego:</p>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Game.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Category</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../categories/Category&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../authors/Author&#39;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">Game</span> <span class="p">{</span>
    <span class="nx">id</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
    <span class="nx">age</span>: <span class="kt">number</span><span class="p">;</span>
    <span class="nx">category</span>: <span class="kt">Category</span><span class="p">;</span>
    <span class="nx">author</span>: <span class="kt">Author</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Como ves, el juego tiene dos objetos para mapear categoría y autor.</p>
<h3 id="anadir-el-punto-de-entrada">Añadir el punto de entrada</h3>
<p>Añadimos la ruta al menú para que podamos navegar a esta pantalla:</p>
<div class="tabbed-set" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">app-routing.module.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Routes</span><span class="p">,</span> <span class="nx">RouterModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CategoriesComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./views/categories/categories.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorsComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./views/authors/authors.component&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">GamesComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./views/games/games.component&#39;</span><span class="p">;</span>
</span>

<span class="kd">const</span> <span class="nx">routes</span>: <span class="kt">Routes</span> <span class="o">=</span> <span class="p">[</span>
<span class="hll">    <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">redirectTo</span><span class="o">:</span> <span class="s1">&#39;/games&#39;</span><span class="p">,</span> <span class="nx">pathMatch</span><span class="o">:</span> <span class="s1">&#39;full&#39;</span><span class="p">},</span>
</span>    <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;categories&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">CategoriesComponent</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;authors&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">AuthorsComponent</span> <span class="p">},</span>
<span class="hll">    <span class="p">{</span> <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;games&#39;</span><span class="p">,</span> <span class="nx">component</span>: <span class="kt">GamesComponent</span> <span class="p">},</span>
</span><span class="p">];</span>

<span class="kd">@NgModule</span><span class="p">({</span>
    <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routes</span><span class="p">)],</span>
    <span class="nx">exports</span><span class="o">:</span> <span class="p">[</span><span class="nx">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Además, hemos añadido una regla adicional para que cuando se cargue la página inicial (sin ruta) por defecto redirija al catálogo de juegos.</p>
<h3 id="implementar-servicio">Implementar servicio</h3>
<p>A continuación implementamos el servicio y mockeamos datos de ejemplo:</p>
<div class="tabbed-set" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">mock-games.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Game</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;src/app/models/games/Game&quot;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">GAME_DATA</span>: <span class="kt">Game</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Juego 1&#39;</span><span class="p">,</span> <span class="nx">age</span>: <span class="kt">6</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Categoría 1&#39;</span> <span class="p">},</span> <span class="nx">author</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Autor 1&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Nacionalidad 1&#39;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Juego 2&#39;</span><span class="p">,</span> <span class="nx">age</span>: <span class="kt">8</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Categoría 1&#39;</span> <span class="p">},</span> <span class="nx">author</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Autor 2&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Nacionalidad 2&#39;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">3</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Juego 3&#39;</span><span class="p">,</span> <span class="nx">age</span>: <span class="kt">4</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Categoría 1&#39;</span> <span class="p">},</span> <span class="nx">author</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">3</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Autor 3&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Nacionalidad 3&#39;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">4</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Juego 4&#39;</span><span class="p">,</span> <span class="nx">age</span>: <span class="kt">10</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Categoría 2&#39;</span> <span class="p">},</span> <span class="nx">author</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Autor 1&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Nacionalidad 1&#39;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">5</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Juego 5&#39;</span><span class="p">,</span> <span class="nx">age</span>: <span class="kt">16</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Categoría 2&#39;</span> <span class="p">},</span> <span class="nx">author</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Autor 2&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Nacionalidad 2&#39;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">6</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Juego 6&#39;</span><span class="p">,</span> <span class="nx">age</span>: <span class="kt">16</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Categoría 2&#39;</span> <span class="p">},</span> <span class="nx">author</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">3</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Autor 3&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Nacionalidad 3&#39;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">7</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Juego 7&#39;</span><span class="p">,</span> <span class="nx">age</span>: <span class="kt">12</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">3</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Categoría 3&#39;</span> <span class="p">},</span> <span class="nx">author</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Autor 1&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Nacionalidad 1&#39;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">8</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Juego 8&#39;</span><span class="p">,</span> <span class="nx">age</span>: <span class="kt">14</span><span class="p">,</span> <span class="nx">category</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">3</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Categoría 3&#39;</span> <span class="p">},</span> <span class="nx">author</span><span class="o">:</span> <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Autor 2&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Nacionalidad 2&#39;</span> <span class="p">}</span> <span class="p">},</span>
<span class="p">]</span>
</code></pre></div>
</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">game.service.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Game</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/games/Game&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="k">of</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GAME_DATA</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./mock-games&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">({</span>
    <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GameService</span> <span class="p">{</span>

    <span class="kr">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">getGames</span><span class="p">(</span><span class="nx">title?</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">categoryId?</span>: <span class="kt">number</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Game</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">GAME_DATA</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">saveGame</span><span class="p">(</span><span class="nx">game</span>: <span class="kt">Game</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Game</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<h3 id="implementar-listado">Implementar listado</h3>
<p>Ya tenemos las operaciones del servicio con datoos, así que ahora vamos a por el listado filtrado.</p>
<div class="tabbed-set" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">games.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Catálogo de juegos<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;filters&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Título del juego<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Título del juego&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">filterTitle</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Categoría del juego<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">mat-select</span> <span class="na">disableRipple</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">filterCategory</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;category&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">mat-option</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let category of categories&quot;</span> <span class="err">[</span><span class="na">value</span><span class="err">]=&quot;</span><span class="na">category</span><span class="err">&quot;</span><span class="p">&gt;</span>{{category.name}}<span class="p">&lt;/</span><span class="nt">mat-option</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">mat-select</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>    
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;buttons&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-stroked-button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">onCleanFilter</span><span class="err">()&quot;</span><span class="p">&gt;</span>Limpiar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span> 
            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-stroked-button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">onSearch</span><span class="err">()&quot;</span><span class="p">&gt;</span>Filtrar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span> 
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>   
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>   

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;game-list&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">app-game-detail</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let game of games; let i = index;&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">editGame</span><span class="err">(</span><span class="na">game</span><span class="err">)&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">app-game-detail</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;buttons&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-flat-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">createGame</span><span class="err">()&quot;</span><span class="p">&gt;</span>Nuevo juego<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>            
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>   
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><label for="__tabbed_4_2">games.component.scss</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
    <span class="k">margin</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>

    <span class="err">.filters</span> <span class="err">{</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>

        <span class="err">mat-form-field</span> <span class="err">{</span>
            <span class="k">width</span><span class="p">:</span> <span class="mi">300</span><span class="kt">px</span><span class="p">;</span>
            <span class="k">margin-right</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="p">.</span><span class="nc">buttons</span> <span class="p">{</span>
            <span class="k">flex</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
            <span class="k">align-self</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>

            <span class="err">button</span> <span class="err">{</span>
                <span class="k">margin-left</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="err">}</span>
    <span class="err">}</span>

    <span class="p">.</span><span class="nc">game-list</span> <span class="p">{</span> 
        <span class="k">margin-top</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>

        <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
        <span class="k">flex-flow</span><span class="p">:</span> <span class="kc">wrap</span><span class="p">;</span>
        <span class="k">overflow</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>  
    <span class="p">}</span>

    <span class="p">.</span><span class="nc">buttons</span> <span class="p">{</span>
        <span class="k">text-align</span><span class="p">:</span> <span class="kc">right</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="nt">button</span> <span class="p">{</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">125</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><label for="__tabbed_4_3">games.component.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Category</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/categories/Category&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Game</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/games/Game&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GameService</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/services/games/game.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CategoryService</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/services/categories/category.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GameDialogComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./game-dialog/game-dialog.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatDialog</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/dialog&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
    <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-games&#39;</span><span class="p">,</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./games.component.html&#39;</span><span class="p">,</span>
    <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./games.component.scss&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GamesComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

    <span class="nx">categories</span> : <span class="kt">Category</span><span class="p">[];</span>
    <span class="nx">games</span>: <span class="kt">Game</span><span class="p">[];</span>
    <span class="nx">filterCategory</span>: <span class="kt">Category</span><span class="p">;</span>
    <span class="nx">filterTitle</span>: <span class="kt">string</span><span class="p">;</span>

    <span class="kr">constructor</span><span class="p">(</span>
        <span class="k">private</span> <span class="nx">gameService</span>: <span class="kt">GameService</span><span class="p">,</span>
        <span class="k">private</span> <span class="nx">categoryService</span>: <span class="kt">CategoryService</span><span class="p">,</span>
        <span class="k">public</span> <span class="nx">dialog</span>: <span class="kt">MatDialog</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="ow">void</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">gameService</span><span class="p">.</span><span class="nx">getGames</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
            <span class="nx">games</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">games</span> <span class="o">=</span> <span class="nx">games</span>
        <span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">categoryService</span><span class="p">.</span><span class="nx">getCategories</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
            <span class="nx">categories</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">categories</span> <span class="o">=</span> <span class="nx">categories</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">onCleanFilter</span><span class="p">()</span><span class="o">:</span> <span class="ow">void</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">filterTitle</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">filterCategory</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">onSearch</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nx">onSearch</span><span class="p">()</span><span class="o">:</span> <span class="ow">void</span> <span class="p">{</span>

        <span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filterTitle</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">categoryId</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">filterCategory</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">this.filterCategory.id</span> : <span class="kt">null</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">gameService</span><span class="p">.</span><span class="nx">getGames</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">categoryId</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span>
            <span class="nx">games</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">games</span> <span class="o">=</span> <span class="nx">games</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">createGame</span><span class="p">()</span> <span class="p">{</span>    
        <span class="kd">const</span> <span class="nx">dialogRef</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">dialog</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">GameDialogComponent</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">data</span><span class="o">:</span> <span class="p">{}</span>
        <span class="p">});</span>

        <span class="nx">dialogRef</span><span class="p">.</span><span class="nx">afterClosed</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">ngOnInit</span><span class="p">();</span>
        <span class="p">});</span>    
    <span class="p">}</span>  

    <span class="nx">editGame</span><span class="p">(</span><span class="nx">game</span>: <span class="kt">Game</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">dialogRef</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">dialog</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">GameDialogComponent</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">data</span><span class="o">:</span> <span class="p">{</span> <span class="nx">game</span>: <span class="kt">game</span> <span class="p">}</span>
        <span class="p">});</span>

        <span class="nx">dialogRef</span><span class="p">.</span><span class="nx">afterClosed</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">onSearch</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Recuerda que cada vez que utilizamos un componente nuevo (en este caso el mat-select y mat-option) debemos incluirlo en el módulo padre.</p>
<div class="tabbed-set" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><label for="__tabbed_5_1">views.module.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CommonModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatTableModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/table&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatIconModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatButtonModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CategoriesComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./categories/categories.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CategoryDialogComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./categories/category-dialog/category-dialog.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MAT_DIALOG_DATA</span><span class="p">,</span> <span class="nx">MatDialogModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/dialog&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatFormFieldModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/form-field&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatInputModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/input&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FormsModule</span><span class="p">,</span> <span class="nx">ReactiveFormsModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorsComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./authors/authors.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorDialogComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./authors/author-dialog/author-dialog.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatPaginatorModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/paginator&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GamesComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./games/games.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GameDetailComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./games/game-detail/game-detail.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GameDialogComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./games/game-dialog/game-dialog.component&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">MatOptionModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/core&#39;</span><span class="p">;</span>
</span><span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">MatSelectModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/select&#39;</span><span class="p">;</span>
</span>
<span class="kd">@NgModule</span><span class="p">({</span>
    <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span><span class="nx">CategoriesComponent</span><span class="p">,</span> <span class="nx">CategoryDialogComponent</span><span class="p">,</span> <span class="nx">AuthorsComponent</span><span class="p">,</span> <span class="nx">AuthorDialogComponent</span><span class="p">,</span> <span class="nx">GamesComponent</span><span class="p">,</span> <span class="nx">GameDetailComponent</span><span class="p">,</span> <span class="nx">GameDialogComponent</span><span class="p">],</span>
    <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
        <span class="nx">CommonModule</span><span class="p">,</span>
        <span class="nx">MatTableModule</span><span class="p">,</span>
        <span class="nx">MatIconModule</span><span class="p">,</span> 
        <span class="nx">MatButtonModule</span><span class="p">,</span>
        <span class="nx">MatDialogModule</span><span class="p">,</span>
        <span class="nx">MatFormFieldModule</span><span class="p">,</span>
        <span class="nx">MatInputModule</span><span class="p">,</span>
        <span class="nx">FormsModule</span><span class="p">,</span>
        <span class="nx">ReactiveFormsModule</span><span class="p">,</span>
        <span class="nx">MatPaginatorModule</span><span class="p">,</span>
<span class="hll">        <span class="nx">MatOptionModule</span><span class="p">,</span>
</span><span class="hll">        <span class="nx">MatSelectModule</span><span class="p">,</span>
</span>    <span class="p">],</span>
    <span class="nx">providers</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nx">provide</span>: <span class="kt">MAT_DIALOG_DATA</span><span class="p">,</span>
            <span class="nx">useValue</span><span class="o">:</span> <span class="p">{},</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ViewsModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Debe quedar algo similar a esto:</p>
<p><img alt="step5-angular1" src="../../assets/images/step5-angular1.png" /></p>
<p>Tenemos una pantalla con una sección de filtros en la parte superior, donde podemos introducir un texto o seleccionar una categoría de un dropdown, un listado que de momento tiene todos los componentes básicos en una fila uno detrás del otro, y un botón para crear juegos nuevos.</p>
<h3 id="implementar-detalle-del-item">Implementar detalle del item</h3>
<p>Ahora vamos a implementar el detalle de cada uno de los items que forman el listado. Para ello lo primero que haremos será pasarle la información del juego a cada componente como un dato de entrada <code>Input</code>.</p>
<div class="tabbed-set" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><label for="__tabbed_6_1">games.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Catálogo de juegos<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;filters&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Título del juego<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Título del juego&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">filterName</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>

            <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Categoría del juego<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">mat-select</span> <span class="na">disableRipple</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">filterCategory</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;category&quot;</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">mat-option</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let category of categories&quot;</span> <span class="err">[</span><span class="na">value</span><span class="err">]=&quot;</span><span class="na">category</span><span class="err">&quot;</span><span class="p">&gt;</span>{{category.name}}<span class="p">&lt;/</span><span class="nt">mat-option</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">mat-select</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>    
        <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;buttons&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-stroked-button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">onCleanFilter</span><span class="err">()&quot;</span><span class="p">&gt;</span>Limpiar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span> 
            <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-stroked-button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">onSearch</span><span class="err">()&quot;</span><span class="p">&gt;</span>Filtrar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span> 
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>   
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>   

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;game-list&quot;</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">app-game-detail</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let game of games; let i = index;&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">editGame</span><span class="err">(</span><span class="na">game</span><span class="err">)&quot;</span> <span class="err">[</span><span class="na">game</span><span class="err">]=&quot;</span><span class="na">game</span><span class="err">&quot;</span><span class="p">&gt;</span>
</span>        <span class="p">&lt;/</span><span class="nt">app-game-detail</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;buttons&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-flat-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">createGame</span><span class="err">()&quot;</span><span class="p">&gt;</span>Nuevo juego<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>            
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>   
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</div>
</div>
<p>También vamos a necesitar una foto de ejemplo para poner dentro de la tarjeta detalle de los juegos. Vamos a utilizar esta imagen:</p>
<p><img src="../../assets/images/foto.png" width="100"></p>
<p>Y ya para terminar, implementamos el componente de detalle:</p>
<div class="tabbed-set" data-tabs="7:3"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><label for="__tabbed_7_1">game-detail.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">mat-card</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;photo&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;./assets/foto.png&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;detail&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;</span>{{game.title}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;properties&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">i</span><span class="p">&gt;</span>Edad recomendada: <span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>+{{game.age}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">i</span><span class="p">&gt;</span>Categoría: <span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>{{game.category.name}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">i</span><span class="p">&gt;</span>Autor: <span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>{{game.author.name}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">i</span><span class="p">&gt;</span>Nacionalidad: <span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>{{game.author.nationality}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">mat-card</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><label for="__tabbed_7_2">game-detail.component.scss</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
    <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">325</span><span class="kt">px</span><span class="p">;</span>

    <span class="err">mat-card</span> <span class="err">{</span>
        <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
        <span class="k">margin</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>

        <span class="err">.photo</span> <span class="err">{</span>
            <span class="k">margin-right</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>

            <span class="err">img</span> <span class="err">{</span>
                <span class="k">width</span><span class="p">:</span> <span class="mi">80</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">height</span><span class="p">:</span> <span class="mi">80</span><span class="kt">px</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="err">}</span>

        <span class="p">.</span><span class="nc">detail</span> <span class="p">{</span>
            <span class="err">.title</span> <span class="err">{</span>
                <span class="k">font-size</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
                <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="p">.</span><span class="nc">properties</span> <span class="p">{</span>
                <span class="k">font-size</span><span class="p">:</span> <span class="mi">11</span><span class="kt">px</span><span class="p">;</span>

                <span class="err">div</span> <span class="err">{</span>
                    <span class="k">height</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
                <span class="p">}</span>                
            <span class="err">}</span>
        <span class="err">}</span>
    <span class="err">}</span>
<span class="err">}</span>    
</code></pre></div>
</div>
<input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><label for="__tabbed_7_3">game-detail.component.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">Input</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Game</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/games/Game&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
    <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-game-detail&#39;</span><span class="p">,</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./game-detail.component.html&#39;</span><span class="p">,</span>
    <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./game-detail.component.scss&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GameDetailComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

<span class="hll">    <span class="kd">@Input</span><span class="p">()</span> <span class="nx">game</span>: <span class="kt">Game</span><span class="p">;</span>
</span>
    <span class="kr">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="ow">void</span> <span class="p">{</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Y de nuevo, al utilizar un componente nuevo (en este caso el mat-card) debemos incluirlo en el módulo padre.</p>
<div class="tabbed-set" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><label for="__tabbed_8_1">views.module.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CommonModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatTableModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/table&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatIconModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/icon&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatButtonModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/button&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CategoriesComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./categories/categories.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CategoryDialogComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./categories/category-dialog/category-dialog.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MAT_DIALOG_DATA</span><span class="p">,</span> <span class="nx">MatDialogModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/dialog&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatFormFieldModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/form-field&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatInputModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/input&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FormsModule</span><span class="p">,</span> <span class="nx">ReactiveFormsModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorsComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./authors/authors.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorDialogComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./authors/author-dialog/author-dialog.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatPaginatorModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/paginator&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GamesComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./games/games.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GameDetailComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./games/game-detail/game-detail.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GameDialogComponent</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./games/game-dialog/game-dialog.component&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatOptionModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatSelectModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/select&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">MatCardModule</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/card&#39;</span><span class="p">;</span>
</span>
<span class="kd">@NgModule</span><span class="p">({</span>
    <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span><span class="nx">CategoriesComponent</span><span class="p">,</span> <span class="nx">CategoryDialogComponent</span><span class="p">,</span> <span class="nx">AuthorsComponent</span><span class="p">,</span> <span class="nx">AuthorDialogComponent</span><span class="p">,</span> <span class="nx">GamesComponent</span><span class="p">,</span> <span class="nx">GameDetailComponent</span><span class="p">,</span> <span class="nx">GameDialogComponent</span><span class="p">],</span>
    <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
        <span class="nx">CommonModule</span><span class="p">,</span>
        <span class="nx">MatTableModule</span><span class="p">,</span>
        <span class="nx">MatIconModule</span><span class="p">,</span> 
        <span class="nx">MatButtonModule</span><span class="p">,</span>
        <span class="nx">MatDialogModule</span><span class="p">,</span>
        <span class="nx">MatFormFieldModule</span><span class="p">,</span>
        <span class="nx">MatInputModule</span><span class="p">,</span>
        <span class="nx">FormsModule</span><span class="p">,</span>
        <span class="nx">ReactiveFormsModule</span><span class="p">,</span>
        <span class="nx">MatPaginatorModule</span><span class="p">,</span>
        <span class="nx">MatOptionModule</span><span class="p">,</span>
        <span class="nx">MatSelectModule</span><span class="p">,</span>
<span class="hll">        <span class="nx">MatCardModule</span>    
</span>    <span class="p">],</span>
    <span class="nx">providers</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nx">provide</span>: <span class="kt">MAT_DIALOG_DATA</span><span class="p">,</span>
            <span class="nx">useValue</span><span class="o">:</span> <span class="p">{},</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ViewsModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Ahora si que debería quedar algo similar a esta pantalla:</p>
<p><img alt="step5-angular2" src="../../assets/images/step5-angular2.png" /></p>
<h3 id="implementar-dialogo-de-edicion">Implementar dialogo de edición</h3>
<p>Ya solo nos falta el último paso, implementar el cuadro de edición / alta de un nuevo juego. Pero tenemos un pequeño problema, y es que al crear o editar un juego debemos seleccionar una <code>Categoría</code> y un <code>Autor</code>. </p>
<p>Para la <code>Categoría</code> no tenemos ningún problema, pero para el <code>Autor</code> no tenemos un servicio que nos devuelva todos los autores, solo tenemos un servicio que nos devuelve una <code>Page</code> de autores.</p>
<p>Así que lo primero que haremos será implementar una operación <code>getAllAuthors</code> para poder recuperar una lista.</p>
<div class="tabbed-set" data-tabs="9:3"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><label for="__tabbed_9_1">mock-authors-list.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/authors/Author&#39;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">AUTHOR_DATA_LIST</span> : <span class="kt">Author</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Klaus Teuber&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Alemania&#39;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Matt Leacock&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Estados Unidos&#39;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">3</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Keng Leong Yeo&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Singapur&#39;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">4</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Gil Hova&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Estados Unidos&#39;</span><span class="p">},</span>
    <span class="p">{</span> <span class="nx">id</span>: <span class="kt">5</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Kelly Adams&#39;</span><span class="p">,</span> <span class="nx">nationality</span><span class="o">:</span> <span class="s1">&#39;Estados Unidos&#39;</span> <span class="p">},</span>
<span class="p">]</span>    
</code></pre></div>
</div>
<input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><label for="__tabbed_9_2">mock-authors.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/authors/AuthorPage&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">AUTHOR_DATA_LIST</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./mock-authors-list&#39;</span><span class="p">;</span>
</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">AUTHOR_DATA</span>: <span class="kt">AuthorPage</span> <span class="o">=</span> <span class="p">{</span>
<span class="hll">    <span class="nx">content</span>: <span class="kt">AUTHOR_DATA_LIST</span><span class="p">,</span>  
</span>    <span class="nx">pageable</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">pageSize</span>: <span class="kt">5</span><span class="p">,</span>
        <span class="nx">pageNumber</span>: <span class="kt">0</span><span class="p">,</span>
        <span class="nx">sort</span><span class="o">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="nx">property</span><span class="o">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nx">direction</span><span class="o">:</span> <span class="s2">&quot;ASC&quot;</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nx">totalElements</span>: <span class="kt">7</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><label for="__tabbed_9_3">author.service.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Pageable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/page/Pageable&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/authors/AuthorPage&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="k">of</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/authors/Author&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="hll"><span class="k">import</span> <span class="p">{</span> <span class="nx">AUTHOR_DATA_LIST</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./mock-authors-list&#39;</span><span class="p">;</span>
</span>
<span class="kd">@Injectable</span><span class="p">({</span>
    <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthorService</span> <span class="p">{</span>

    <span class="kr">constructor</span><span class="p">(</span>
        <span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span>
    <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">getAuthors</span><span class="p">(</span><span class="nx">pageable</span>: <span class="kt">Pageable</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">AuthorPage</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="o">&lt;</span><span class="nx">AuthorPage</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/author/v1/&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">pageable</span>:<span class="kt">pageable</span><span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">saveAuthor</span><span class="p">(</span><span class="nx">author</span>: <span class="kt">Author</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Author</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">put</span><span class="o">&lt;</span><span class="nx">Author</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/author/v1/&#39;</span><span class="p">,</span> <span class="nx">author</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">deleteAuthor</span><span class="p">(</span><span class="nx">idAuthor</span> : <span class="kt">number</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/author/v1/&#39;</span><span class="o">+</span><span class="nx">idAuthor</span><span class="p">);</span>
    <span class="p">}</span>    

<span class="hll">    <span class="nx">getAllAuthors</span><span class="p">()</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Author</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class="hll">        <span class="k">return</span> <span class="k">of</span><span class="p">(</span><span class="nx">AUTHOR_DATA_LIST</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Clean Code</p>
<p>Acuerdate de lo que hemos comentado antes, siempre debes tener presente el <code>Clean Code</code>. ¡No dupliques código!, es muy importante de cara al futuro mantenimiento. En este caso, en tanto en mock-authors como en mock-authors-list teníamos un listado de autores. Lo mejor es que no dupliquemos el código y uno de ellos haga uso del otro.</p>
</div>
<p>Ahora sí que tenemos todo listo para implementar el cuadro de dialogo para dar de alta o editar juegos.</p>
<div class="tabbed-set" data-tabs="10:3"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><label for="__tabbed_10_1">game-dialog.component.html</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;game.id == null&quot;</span><span class="p">&gt;</span>Crear juego<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&quot;game.id != null&quot;</span><span class="p">&gt;</span>Modificar juego<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">form</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Identificador<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Identificador&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">game</span><span class="err">.</span><span class="na">id</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;id&quot;</span> <span class="na">disabled</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Título<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Título del juego&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">game</span><span class="err">.</span><span class="na">title</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;title&quot;</span> <span class="na">required</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>El título no puede estar vacío<span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Edad recomendada<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span> <span class="na">matInput</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Edad recomendada&quot;</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">game</span><span class="err">.</span><span class="na">age</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;age&quot;</span> <span class="na">required</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>La edad no puede estar vacía<span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Categoría<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-select</span> <span class="na">disableRipple</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">game</span><span class="err">.</span><span class="na">category</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;category&quot;</span> <span class="na">required</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">mat-option</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let category of categories&quot;</span> <span class="err">[</span><span class="na">value</span><span class="err">]=&quot;</span><span class="na">category</span><span class="err">&quot;</span><span class="p">&gt;</span>{{category.name}}<span class="p">&lt;/</span><span class="nt">mat-option</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">mat-select</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>La categoría no puede estar vacía<span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-label</span><span class="p">&gt;</span>Autor<span class="p">&lt;/</span><span class="nt">mat-label</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-select</span> <span class="na">disableRipple</span> <span class="err">[(</span><span class="na">ngModel</span><span class="err">)]=&quot;</span><span class="na">game</span><span class="err">.</span><span class="na">author</span><span class="err">&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;author&quot;</span> <span class="na">required</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">mat-option</span> <span class="err">*</span><span class="na">ngFor</span><span class="o">=</span><span class="s">&quot;let author of authors&quot;</span> <span class="err">[</span><span class="na">value</span><span class="err">]=&quot;</span><span class="na">author</span><span class="err">&quot;</span><span class="p">&gt;</span>{{author.name}}<span class="p">&lt;/</span><span class="nt">mat-option</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">mat-select</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">mat-error</span><span class="p">&gt;</span>El autor no puede estar vacío<span class="p">&lt;/</span><span class="nt">mat-error</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">mat-form-field</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;buttons&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-stroked-button</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">onClose</span><span class="err">()&quot;</span><span class="p">&gt;</span>Cerrar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">mat-flat-button</span> <span class="na">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span> <span class="err">(</span><span class="na">click</span><span class="err">)=&quot;</span><span class="na">onSave</span><span class="err">()&quot;</span><span class="p">&gt;</span>Guardar<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div>
</div>
<input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><label for="__tabbed_10_2">game-dialog.component.scss</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">container</span> <span class="p">{</span>
    <span class="k">min-width</span><span class="p">:</span> <span class="mi">350</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">max-width</span><span class="p">:</span> <span class="mi">500</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>

    <span class="err">form</span> <span class="err">{</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
        <span class="k">flex-direction</span><span class="p">:</span> <span class="kc">column</span><span class="p">;</span>
        <span class="k">margin-bottom</span><span class="p">:</span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">.</span><span class="nc">buttons</span> <span class="p">{</span>
        <span class="k">text-align</span><span class="p">:</span> <span class="kc">right</span><span class="p">;</span>

        <span class="err">button</span> <span class="err">{</span>
            <span class="k">margin-left</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="err">}</span>
<span class="err">}</span>
</code></pre></div>
</div>
<input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><label for="__tabbed_10_3">game-dialog.component.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">Inject</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatDialogRef</span><span class="p">,</span> <span class="nx">MAT_DIALOG_DATA</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/material/dialog&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Game</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/games/Game&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">GameService</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/services/games/game.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/authors/Author&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Category</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/categories/Category&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorService</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/services/authors/author.service&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">CategoryService</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/services/categories/category.service&#39;</span><span class="p">;</span>

<span class="kd">@Component</span><span class="p">({</span>
    <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;app-game-dialog&#39;</span><span class="p">,</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;./game-dialog.component.html&#39;</span><span class="p">,</span>
    <span class="nx">styleUrls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;./game-dialog.component.scss&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GameDialogComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

    <span class="nx">game</span>: <span class="kt">Game</span><span class="p">;</span> 
    <span class="nx">authors</span>: <span class="kt">Author</span><span class="p">[];</span>
    <span class="nx">categories</span>: <span class="kt">Category</span><span class="p">[];</span>

    <span class="kr">constructor</span><span class="p">(</span>
        <span class="k">public</span> <span class="nx">dialogRef</span>: <span class="kt">MatDialogRef</span><span class="o">&lt;</span><span class="nx">GameDialogComponent</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="kd">@Inject</span><span class="p">(</span><span class="nx">MAT_DIALOG_DATA</span><span class="p">)</span> <span class="k">public</span> <span class="nx">data</span>: <span class="kt">any</span><span class="p">,</span>
        <span class="k">private</span> <span class="nx">gameService</span>: <span class="kt">GameService</span><span class="p">,</span>
        <span class="k">private</span> <span class="nx">categoryService</span>: <span class="kt">CategoryService</span><span class="p">,</span>
        <span class="k">private</span> <span class="nx">authorService</span>: <span class="kt">AuthorService</span><span class="p">,</span>
    <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">ngOnInit</span><span class="p">()</span><span class="o">:</span> <span class="ow">void</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">game</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">game</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({},</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">game</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">game</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">Game</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">categoryService</span><span class="p">.</span><span class="nx">getCategories</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
            <span class="nx">categories</span> <span class="p">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">categories</span> <span class="o">=</span> <span class="nx">categories</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">category</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">categoryFilter</span>: <span class="kt">Category</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">categories</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">category</span> <span class="p">=&gt;</span> <span class="nx">category</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">category</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">categoryFilter</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">category</span> <span class="o">=</span> <span class="nx">categoryFilter</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">authorService</span><span class="p">.</span><span class="nx">getAllAuthors</span><span class="p">().</span><span class="nx">subscribe</span><span class="p">(</span>
            <span class="nx">authors</span> <span class="p">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">authors</span> <span class="o">=</span> <span class="nx">authors</span>

                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">author</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">let</span> <span class="nx">authorFilter</span>: <span class="kt">Author</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">authors</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">author</span> <span class="p">=&gt;</span> <span class="nx">author</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">authorFilter</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">game</span><span class="p">.</span><span class="nx">author</span> <span class="o">=</span> <span class="nx">authorFilter</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">onSave</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">gameService</span><span class="p">.</span><span class="nx">saveGame</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">game</span><span class="p">).</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">result</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">dialogRef</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
        <span class="p">});</span>    
    <span class="p">}</span>  

    <span class="nx">onClose</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dialogRef</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Como puedes ver, para rellenar los componentes seleccionables de dropdown, hemos realizado una consulta al servicio para recuperar todos los autores y categorias, y en la respuesta de cada uno de ellos, hemos buscado en los resultados cual es el que coincide con el ID enviado desde el listado, y ese es el que hemos fijado en el objeto <code>Game</code>.</p>
<p>De esta forma, no estamos cogiendo directamente los datos del listado, sino que no estamos asegurando que los datos de autor y de categoría son los que vienen del servicio, siempre filtrando por su ID.</p>
<h2 id="desarrollo-springboot">Desarrollo Springboot</h2>
<h3 id="modelos">Modelos</h3>
<p>Lo primero que vamos a hacer es crear los modelos para trabajar con BBDD y con peticiones hacia el front. Además, también tenemos que añadir datos al script de inicialización de BBDD.</p>
<div class="tabbed-set" data-tabs="11:4"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><label for="__tabbed_11_1">V0001__Create_Schema.sql</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span> <span class="n">SEQUENCE</span> <span class="n">HIBERNATE_SEQUENCE</span> <span class="k">START</span> <span class="k">WITH</span> <span class="mi">1000000</span><span class="p">;</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="n">CATEGORY</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">CATEGORY</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">BIGINT</span> <span class="n">AUTO_INCREMENT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">);</span>


<span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="n">AUTHOR</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">AUTHOR</span> <span class="p">(</span>
    <span class="n">id</span> <span class="nb">BIGINT</span> <span class="n">AUTO_INCREMENT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">name</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">nationality</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">);</span>


<span class="hll"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">EXISTS</span> <span class="n">GAME</span><span class="p">;</span>
</span>
<span class="hll"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">GAME</span> <span class="p">(</span>
</span><span class="hll">    <span class="n">id</span> <span class="nb">BIGINT</span> <span class="n">AUTO_INCREMENT</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
</span><span class="hll">    <span class="n">title</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
</span><span class="hll">    <span class="n">age</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
</span><span class="hll">    <span class="n">category_id</span> <span class="nb">BIGINT</span> <span class="k">DEFAULT</span> <span class="k">NULL</span><span class="p">,</span>
</span><span class="hll">    <span class="n">author_id</span> <span class="nb">BIGINT</span> <span class="k">DEFAULT</span> <span class="k">NULL</span>
</span><span class="hll"><span class="p">);</span>
</span>
<span class="hll"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">GAME</span> <span class="k">ADD</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">category_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">CATEGORY</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</span><span class="hll"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">GAME</span> <span class="k">ADD</span> <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">author_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
</span></code></pre></div>
</div>
<input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><label for="__tabbed_11_2">V0002__Create_Data.sql</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">CATEGORY</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Eurogames&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">CATEGORY</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Ameritrash&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">CATEGORY</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Familiar&#39;</span><span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Alan R. Moon&#39;</span><span class="p">,</span> <span class="s1">&#39;US&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Vital Lacerda&#39;</span><span class="p">,</span> <span class="s1">&#39;PT&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Simone Luciani&#39;</span><span class="p">,</span> <span class="s1">&#39;IT&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Perepau Llistosella&#39;</span><span class="p">,</span> <span class="s1">&#39;ES&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Michael Kiesling&#39;</span><span class="p">,</span> <span class="s1">&#39;DE&#39;</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">AUTHOR</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nationality</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Phil Walker-Harding&#39;</span><span class="p">,</span> <span class="s1">&#39;US&#39;</span><span class="p">);</span>

<span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">GAME</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">category_id</span><span class="p">,</span> <span class="n">author_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;On Mars&#39;</span><span class="p">,</span> <span class="s1">&#39;14&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">GAME</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">category_id</span><span class="p">,</span> <span class="n">author_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Aventureros al tren&#39;</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">GAME</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">category_id</span><span class="p">,</span> <span class="n">author_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;1920: Wall Street&#39;</span><span class="p">,</span> <span class="s1">&#39;12&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">GAME</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">category_id</span><span class="p">,</span> <span class="n">author_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Barrage&#39;</span><span class="p">,</span> <span class="s1">&#39;14&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">GAME</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">category_id</span><span class="p">,</span> <span class="n">author_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Los viajes de Marco Polo&#39;</span><span class="p">,</span> <span class="s1">&#39;12&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">GAME</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">category_id</span><span class="p">,</span> <span class="n">author_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Azul&#39;</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
</span><span class="hll"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">GAME</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">category_id</span><span class="p">,</span> <span class="n">author_id</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;Osopark&#39;</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
</span></code></pre></div>
</div>
<input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><label for="__tabbed_11_3">Game.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.Column</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Entity</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.GeneratedValue</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.GenerationType</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Id</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.JoinColumn</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.ManyToOne</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.Table</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.Author</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.category.model.Category</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Game&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Game</span> <span class="p">{</span>

    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="p">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="n">GenerationType</span><span class="p">.</span><span class="na">AUTO</span><span class="p">)</span>
    <span class="nd">@Column</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;id&quot;</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="p">;</span>

    <span class="nd">@Column</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;title&quot;</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>

    <span class="nd">@Column</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;age&quot;</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">age</span><span class="p">;</span>

    <span class="nd">@ManyToOne</span>
    <span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;category_id&quot;</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">Category</span> <span class="n">category</span><span class="p">;</span>

    <span class="nd">@ManyToOne</span>
    <span class="nd">@JoinColumn</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;author_id&quot;</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
    <span class="kd">private</span> <span class="n">Author</span> <span class="n">author</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * @return id</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">getId</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param id new value of {@link #getId}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return title</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">title</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param title new value of {@link #getTitle}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTitle</span><span class="p">(</span><span class="n">String</span> <span class="n">title</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return age</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getAge</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param age new value of {@link #getAge}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAge</span><span class="p">(</span><span class="n">String</span> <span class="n">age</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return category</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Category</span> <span class="nf">getCategory</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">category</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param category new value of {@link #getCategory}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCategory</span><span class="p">(</span><span class="n">Category</span> <span class="n">category</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">category</span> <span class="o">=</span> <span class="n">category</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return author</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Author</span> <span class="nf">getAuthor</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">author</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param author new value of {@link #getAuthor}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAuthor</span><span class="p">(</span><span class="n">Author</span> <span class="n">author</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">author</span> <span class="o">=</span> <span class="n">author</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_11_4" name="__tabbed_11" type="radio" /><label for="__tabbed_11_4">GameDto.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.category.model.CategoryDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GameDto</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">age</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">CategoryDto</span> <span class="n">category</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">AuthorDto</span> <span class="n">author</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * @return id</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">getId</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param id new value of {@link #getId}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setId</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return title</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">title</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param title new value of {@link #getTitle}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTitle</span><span class="p">(</span><span class="n">String</span> <span class="n">title</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return age</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getAge</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param age new value of {@link #getAge}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAge</span><span class="p">(</span><span class="n">String</span> <span class="n">age</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return category</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">CategoryDto</span> <span class="nf">getCategory</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">category</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param category new value of {@link #getCategory}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCategory</span><span class="p">(</span><span class="n">CategoryDto</span> <span class="n">category</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">category</span> <span class="o">=</span> <span class="n">category</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return author</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">AuthorDto</span> <span class="nf">getAuthor</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">author</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param author new value of {@link #getAuthor}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAuthor</span><span class="p">(</span><span class="n">AuthorDto</span> <span class="n">author</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">author</span> <span class="o">=</span> <span class="n">author</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<h3 id="repository">Repository</h3>
<p>Para esta ocasión, vamos a necesitar un listado filtrado por título o por categoría, así que necesitaremos pasarle esos datos y filtrar la query. Para el título vamos a buscar por una cadena contenida, así que el parámetro será de tipo <code>String</code>, mientras que para la categoría vamos a buscar por su primary key, así que el parámetro será de tipo <code>Long</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Búsquedas en BBDD</p>
<p>Siempre deberíamos buscar a los hijos por primary keys, nunca hay que hacerlo por una descripción libre ya que el usuario podría teclear el mismo nombre de diferentes formas y no habría manera de buscar correctamente el resultado. Así que siempre que haya un dropdown, se debe filtrar por su ID.</p>
</div>
<p>Podríamos utilizar los <a href="https://www.baeldung.com/spring-data-derived-queries">QueryMethods</a> para que Spring JPA haga su magia, pero en esta ocasión vamos a hacer una implementación concreta de este método de filtrado.
Esta implementación la haremos en un Repository normal, y el resto de métodos nos vendrán dados por un CrudRepository como hemos hecho hasta ahora.</p>
<div class="tabbed-set" data-tabs="12:3"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><label for="__tabbed_12_1">GameRepository.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.repository.CrudRepository</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.Game</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GameRepository</span> <span class="kd">extends</span> <span class="n">CrudRepository</span><span class="o">&lt;</span><span class="n">Game</span><span class="p">,</span> <span class="n">Long</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">GameCustomRepository</span> <span class="p">{</span>

<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><label for="__tabbed_12_2">GameCustomRepository.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.Game</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GameCustomRepository</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar todas las {@link com.capgemini.coedevon.tutorial.game.model.Game} filtradas</span>
<span class="cm">    * @param title</span>
<span class="cm">    * @param category</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Game</span><span class="o">&gt;</span> <span class="nf">findByFilter</span><span class="p">(</span><span class="n">String</span> <span class="n">title</span><span class="p">,</span> <span class="n">Long</span> <span class="n">category</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_12_3" name="__tabbed_12" type="radio" /><label for="__tabbed_12_3">GameCustomRepositoryImpl.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.EntityManager</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.util.StringUtils</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.Game</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.devonfw.module.basic.common.api.query.LikePatternSyntax</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.devonfw.module.jpa.dataaccess.api.QueryUtil</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.querydsl.core.alias.Alias</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.querydsl.jpa.impl.JPAQuery</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GameCustomRepositoryImpl</span> <span class="kd">implements</span> <span class="n">GameCustomRepository</span> <span class="p">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">EntityManager</span> <span class="n">entityManager</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Game</span><span class="o">&gt;</span> <span class="nf">findByFilter</span><span class="p">(</span><span class="n">String</span> <span class="n">title</span><span class="p">,</span> <span class="n">Long</span> <span class="n">category</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">Game</span> <span class="n">alias</span> <span class="o">=</span> <span class="n">Alias</span><span class="p">.</span><span class="na">alias</span><span class="p">(</span><span class="n">Game</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
        <span class="n">JPAQuery</span><span class="o">&lt;</span><span class="n">Game</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JPAQuery</span><span class="o">&lt;</span><span class="n">Game</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">entityManager</span><span class="p">).</span><span class="na">from</span><span class="p">(</span><span class="n">Alias</span><span class="p">.</span><span class="na">$</span><span class="p">(</span><span class="n">alias</span><span class="p">));</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">StringUtils</span><span class="p">.</span><span class="na">hasText</span><span class="p">(</span><span class="n">title</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">QueryUtil</span><span class="p">.</span><span class="na">get</span><span class="p">().</span><span class="na">whereLike</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">Alias</span><span class="p">.</span><span class="na">$</span><span class="p">(</span><span class="n">alias</span><span class="p">.</span><span class="na">getTitle</span><span class="p">()),</span> <span class="n">title</span><span class="p">,</span> <span class="n">LikePatternSyntax</span><span class="p">.</span><span class="na">SQL</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">category</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">query</span><span class="p">.</span><span class="na">where</span><span class="p">(</span><span class="n">Alias</span><span class="p">.</span><span class="na">$</span><span class="p">(</span><span class="n">alias</span><span class="p">.</span><span class="na">getCategory</span><span class="p">().</span><span class="na">getId</span><span class="p">()).</span><span class="na">eq</span><span class="p">(</span><span class="n">category</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">query</span><span class="p">.</span><span class="na">fetch</span><span class="p">();</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>No se puede implementar un <code>CrudRepository</code> ya que es una interface que tiene su propia implementación en Spring JPA. El truco que podemos hacer es crear una interface y una implementación custom con los métodos que necesitemos y en nuestro <code>GameRepository</code> extender la interface custom.</p>
<p>De esta forma únicamente utilizamos un objeto <code>Repository</code>, pero realmente Spring JPA provee los métodos de Crud y nosotros proveemos los métodos custom.</p>
<p>La implementación de las queries que hagamos dentro del custom repository ya es cosa nuestra y podemos utilizar lo que necesitemos. En este caso hemos optado por utilizar Criteria para hacer la Query ayudándonos de unas clases de utilidad que provee Devonfw, muy recomendables para hacer queries paginadas. </p>
<h3 id="service">Service</h3>
<p>Siguiente paso, la capa de lógica, es decir el <code>Service</code>.</p>
<div class="tabbed-set" data-tabs="13:2"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><label for="__tabbed_13_1">GameService.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.Game</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.GameDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GameService</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar todas las {@link com.capgemini.coedevon.tutorial.game.model.Game} filtradas</span>
<span class="cm">    * @param title</span>
<span class="cm">    * @param category</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Game</span><span class="o">&gt;</span> <span class="nf">findByFilter</span><span class="p">(</span><span class="n">String</span> <span class="n">title</span><span class="p">,</span> <span class="n">Long</span> <span class="n">category</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar una {@link com.capgemini.coedevon.tutorial.game.model.Game}</span>
<span class="cm">    * @param dto</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Game</span> <span class="nf">save</span><span class="p">(</span><span class="n">GameDto</span> <span class="n">dto</span><span class="p">);</span>

<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><label for="__tabbed_13_2">GameServiceImpl.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.transaction.Transactional</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.BeanUtils</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.Game</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.GameDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="nd">@Service</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GameServiceImpl</span> <span class="kd">implements</span> <span class="n">GameService</span> <span class="p">{</span>

    <span class="nd">@Autowired</span>
    <span class="n">GameRepository</span> <span class="n">gameRepository</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Game</span><span class="o">&gt;</span> <span class="nf">findByFilter</span><span class="p">(</span><span class="n">String</span> <span class="n">title</span><span class="p">,</span> <span class="n">Long</span> <span class="n">category</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">gameRepository</span><span class="p">.</span><span class="na">findByFilter</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">category</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Game</span> <span class="nf">save</span><span class="p">(</span><span class="n">GameDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">Game</span> <span class="n">game</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getId</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
            <span class="n">game</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">gameRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">orElse</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="k">else</span>
            <span class="n">game</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Game</span><span class="p">();</span>

        <span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">dto</span><span class="p">,</span> <span class="n">game</span><span class="p">,</span> <span class="s">&quot;author&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span><span class="p">);</span>

        <span class="c1">//TODO: Setear categoria y autor</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">gameRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">game</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>En este <code>Service</code> volvemos a utilizar el List en lugar del Page, y hemos eliminado el método <code>delete</code> ya que no se pueden borrar juegos. Pero, la novedad está en el <code>save</code>. Si recuerdas, un <code>Game</code> tiene una relación con <code>Author</code> y otra relación con <code>Category</code>. Estas relaciones se hacen a nivel de <code>Entity</code>, sin embargo en nuestro dto de entrada al método <code>GameDto</code> estamos tratando con <code>CategoryDto</code> y <code>AuthorDto</code>.</p>
<p>Una solución podría ser convertir esos DTOs a <code>Entity</code>, pero esto podría llevar a duplicidades en la cache interna de JPA, así que mejor no utilizar esta solución.</p>
<p>Lo correcto es realizar consultas a la BBDD y traernos esas entities. Pero si recuerdas las reglas básicas, un <code>Repository</code> debe pertenecer a un solo <code>Service</code>, por lo que en lugar de llamar a métodos de los <code>AuthorRepository</code> y <code>CategoryRepository</code> desde nuestro <code>GameService</code>, debemos llamar a métodos expuestos en <code>AuthorService</code> y <code>CategoryService</code>. Para ello necesitaremos crear esos métodos get en los otros <code>Services</code>. Quedaría algo así:</p>
<div class="tabbed-set" data-tabs="14:4"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><label for="__tabbed_14_1">AuthorService.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.Author</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AuthorService</span> <span class="p">{</span>

<span class="hll">    <span class="cm">/**</span>
</span><span class="hll"><span class="cm">    * Recupera un {@link com.capgemini.coedevon.tutorial.author.model.Author} a través de su ID</span>
</span><span class="hll"><span class="cm">    * @param id</span>
</span><span class="hll"><span class="cm">    * @return</span>
</span><span class="hll"><span class="cm">    */</span>
</span><span class="hll">    <span class="n">Author</span> <span class="nf">get</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">);</span>
</span>
    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar un listado paginado de {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
<span class="cm">    * @param dto</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">Page</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">findPage</span><span class="p">(</span><span class="n">AuthorSearchDto</span> <span class="n">dto</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
<span class="cm">    * @param data</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">Author</span> <span class="nf">save</span><span class="p">(</span><span class="n">AuthorDto</span> <span class="n">data</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
<span class="cm">    * @param id</span>
<span class="cm">    */</span>
    <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">);</span>

<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><label for="__tabbed_14_2">AuthorServiceImpl.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.transaction.Transactional</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.BeanUtils</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.Author</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="nd">@Service</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorServiceImpl</span> <span class="kd">implements</span> <span class="n">AuthorService</span> <span class="p">{</span>

    <span class="nd">@Autowired</span>
    <span class="n">AuthorRepository</span> <span class="n">authorRepository</span><span class="p">;</span>

<span class="hll">    <span class="cm">/**</span>
</span><span class="hll"><span class="cm">    * {@inheritDoc}</span>
</span><span class="hll"><span class="cm">    */</span>
</span><span class="hll">    <span class="nd">@Override</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">Author</span> <span class="nf">get</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">id</span><span class="p">).</span><span class="na">orElse</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span>
    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">findPage</span><span class="p">(</span><span class="n">AuthorSearchDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getPageable</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Author</span> <span class="nf">save</span><span class="p">(</span><span class="n">AuthorDto</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">Author</span> <span class="n">categoria</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="na">getId</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
<span class="hll">            <span class="n">categoria</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
</span>        <span class="k">else</span>
            <span class="n">categoria</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Author</span><span class="p">();</span>

        <span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">categoria</span><span class="p">);</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">categoria</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">deleteById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>

    <span class="p">}</span>

<span class="p">}</span>    
</code></pre></div>
</div>
<input id="__tabbed_14_3" name="__tabbed_14" type="radio" /><label for="__tabbed_14_3">CategoryService.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.category</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.category.model.Category</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.category.model.CategoryDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CategoryService</span> <span class="p">{</span>

<span class="hll">    <span class="cm">/**</span>
</span><span class="hll"><span class="cm">    * Recupera una {@link com.capgemini.coedevon.tutorial.category.model.Category} a partir de su ID</span>
</span><span class="hll"><span class="cm">    * @param id</span>
</span><span class="hll"><span class="cm">    * @return</span>
</span><span class="hll"><span class="cm">    */</span>
</span><span class="hll">    <span class="n">Category</span> <span class="nf">get</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">);</span>
</span>
    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar todas las {@link com.capgemini.coedevon.tutorial.category.model.Category}</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Category</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="p">();</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar una {@link com.capgemini.coedevon.tutorial.category.model.Category}</span>
<span class="cm">    * @param dto</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">Category</span> <span class="nf">save</span><span class="p">(</span><span class="n">CategoryDto</span> <span class="n">dto</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para borrar una {@link com.capgemini.coedevon.tutorial.category.model.Category}</span>
<span class="cm">    * @param id</span>
<span class="cm">    */</span>
    <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_14_4" name="__tabbed_14" type="radio" /><label for="__tabbed_14_4">CategoryServiceImpl.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.category</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.BeanUtils</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.category.model.Category</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.category.model.CategoryDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CategoryServiceImpl</span> <span class="kd">implements</span> <span class="n">CategoryService</span> <span class="p">{</span>

    <span class="nd">@Autowired</span>
    <span class="n">CategoryRepository</span> <span class="n">categoryRepository</span><span class="p">;</span>

<span class="hll">    <span class="cm">/**</span>
</span><span class="hll"><span class="cm">    * {@inheritDoc}</span>
</span><span class="hll"><span class="cm">    */</span>
</span><span class="hll">    <span class="nd">@Override</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">Category</span> <span class="nf">get</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">categoryRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">id</span><span class="p">).</span><span class="na">orElse</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span>
    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Category</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Category</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="na">categoryRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Category</span> <span class="nf">save</span><span class="p">(</span><span class="n">CategoryDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">Category</span> <span class="n">categoria</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getId</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
<span class="hll">            <span class="n">categoria</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
</span>        <span class="k">else</span>
            <span class="n">categoria</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Category</span><span class="p">();</span>

        <span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">dto</span><span class="p">,</span> <span class="n">categoria</span><span class="p">);</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">categoryRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">categoria</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">categoryRepository</span><span class="p">.</span><span class="na">deleteById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Clean Code</p>
<p>A la hora de implementar métodos nuevos, ten siempre presente el <code>Clean Code</code>. ¡No dupliques código!, es muy importante de cara al futuro mantenimiento. Si en nuestro método <code>save</code> hacíamos uso de una operación <code>findById</code> y ahora hemos creado una nueva operación <code>get</code>, hagamos uso de esta nueva operación y no repitamos el código.</p>
</div>
<p>Y ahora ya podemos implementar correctamente nuestro <code>Service</code>.</p>
<div class="tabbed-set" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><label for="__tabbed_15_1">GameServiceImpl.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.transaction.Transactional</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.BeanUtils</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.AuthorService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.Author</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.category.CategoryService</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.category.model.Category</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.Game</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.GameDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="nd">@Service</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GameServiceImpl</span> <span class="kd">implements</span> <span class="n">GameService</span> <span class="p">{</span>

    <span class="nd">@Autowired</span>
    <span class="n">GameRepository</span> <span class="n">gameRepository</span><span class="p">;</span>

<span class="hll">    <span class="nd">@Autowired</span>
</span><span class="hll">    <span class="n">AuthorService</span> <span class="n">authorService</span><span class="p">;</span>
</span>
<span class="hll">    <span class="nd">@Autowired</span>
</span><span class="hll">    <span class="n">CategoryService</span> <span class="n">categoryService</span><span class="p">;</span>
</span>
    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Game</span><span class="o">&gt;</span> <span class="nf">findByFilter</span><span class="p">(</span><span class="n">String</span> <span class="n">title</span><span class="p">,</span> <span class="n">Long</span> <span class="n">category</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">gameRepository</span><span class="p">.</span><span class="na">findByFilter</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">category</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Game</span> <span class="nf">save</span><span class="p">(</span><span class="n">GameDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">Game</span> <span class="n">game</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getId</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
            <span class="n">game</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">gameRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getId</span><span class="p">()).</span><span class="na">orElse</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="k">else</span>
            <span class="n">game</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Game</span><span class="p">();</span>

        <span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">dto</span><span class="p">,</span> <span class="n">game</span><span class="p">,</span> <span class="s">&quot;author&quot;</span><span class="p">,</span> <span class="s">&quot;category&quot;</span><span class="p">);</span>

<span class="hll">        <span class="n">Author</span> <span class="n">author</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">authorService</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getAuthor</span><span class="p">().</span><span class="na">getId</span><span class="p">());</span>
</span><span class="hll">        <span class="n">game</span><span class="p">.</span><span class="na">setAuthor</span><span class="p">(</span><span class="n">author</span><span class="p">);</span>
</span>
<span class="hll">        <span class="n">Category</span> <span class="n">category</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">categoryService</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getCategory</span><span class="p">().</span><span class="na">getId</span><span class="p">());</span>
</span><span class="hll">        <span class="n">game</span><span class="p">.</span><span class="na">setCategory</span><span class="p">(</span><span class="n">category</span><span class="p">);</span>
</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">gameRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">game</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<h3 id="controller">Controller</h3>
<p>Después de todo este mareo, ya podemos terminar ocn la última capa. Vamos a implementar el <code>Controller</code> para que ataque a la capa de <code>Service</code>, con los endpoints de las operaciones que vamos a publicar. Además, para realizar la búsqueda necesitaremos un nuevo <code>DTO</code> como ya vimos en el ejemplo del listado paginado.</p>
<div class="tabbed-set" data-tabs="16:2"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><label for="__tabbed_16_1">GameController.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.CrossOrigin</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.config.mapper.BeanMapper</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.GameDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model.GameSearchDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/game/v1&quot;</span><span class="p">)</span>
<span class="nd">@RestController</span>
<span class="nd">@CrossOrigin</span><span class="p">(</span><span class="n">origins</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GameController</span> <span class="p">{</span>

    <span class="nd">@Autowired</span>
    <span class="n">GameService</span> <span class="n">gameService</span><span class="p">;</span>

    <span class="nd">@Autowired</span>
    <span class="n">BeanMapper</span> <span class="n">beanMapper</span><span class="p">;</span>

    <span class="cm">/*</span>
<span class="cm">    * Método para recuperar todos los {@link com.capgemini.coedevon.tutorial.game.model.Game} filtrados</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="p">.</span><span class="na">POST</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">GameDto</span><span class="o">&gt;</span> <span class="nf">findByFilter</span><span class="p">(</span><span class="nd">@RequestBody</span> <span class="n">GameSearchDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">beanMapper</span><span class="p">.</span><span class="na">mapList</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">gameService</span><span class="p">.</span><span class="na">findByFilter</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getTitle</span><span class="p">(),</span> <span class="n">dto</span><span class="p">.</span><span class="na">getCategoryId</span><span class="p">()),</span> <span class="n">GameDto</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.coedevon.tutorial.game.model.Game}</span>
<span class="cm">    * @param dto</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="p">.</span><span class="na">PUT</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">GameDto</span> <span class="nf">save</span><span class="p">(</span><span class="nd">@RequestBody</span> <span class="n">GameDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">gameService</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">dto</span><span class="p">),</span> <span class="n">GameDto</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><label for="__tabbed_16_2">GameSearchDto.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.game.model</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GameSearchDto</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="p">;</span>

    <span class="kd">private</span> <span class="n">Long</span> <span class="n">categoryId</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * @return title</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">title</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param title new value of {@link #getTitle}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTitle</span><span class="p">(</span><span class="n">String</span> <span class="n">title</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @return categoryId</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="n">Long</span> <span class="nf">getCategoryId</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">categoryId</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * @param categoryId new value of {@link #getcategoryId}.</span>
<span class="cm">    */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCategoryId</span><span class="p">(</span><span class="n">Long</span> <span class="n">categoryId</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">categoryId</span> <span class="o">=</span> <span class="n">categoryId</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Pues con esto ya tendríamos todas las consultas de <code>Game</code> implementadas. Ahora solo falta probarlas.</p>
<h3 id="prueba-de-las-operaciones">Prueba de las operaciones</h3>
<p>Si ahora levantamos la aplicación y probamos con el postman, podemos ver los resultados que nos ofrece el back.</p>
<p><strong> POST </strong> nos devuelve un listado paginado de <code>Juegos</code>, fíjate bien en la petición donde envíamos los filtros y la respuesta que tiene los objetos <code>Categoria</code> y <code>Autor</code> incluídos.</p>
<p><img alt="step5-java1" src="../../assets/images/step5-java1.png" /></p>
<p><strong> PUT </strong> nos sirve para insertar <code>Juegos</code> nuevos (si no tienen el id informado) o para actualizar <code>Juegos</code> (si tienen el id informado). Fíjate que para enlazar <code>Categoria</code> y <code>Autor</code> tan solo hace falta el id de cada no de ellos, ya que en el método <code>save</code> se hace una consulta <code>get</code> para recuperarlos por su id. Además que no tendría sentido enviar toda la información de esas entidades ya que no estás dando de alta una <code>Categoria</code> ni un <code>Autor</code>.</p>
<p><img alt="step5-java2" src="../../assets/images/step5-java2.png" />
<img alt="step5-java3" src="../../assets/images/step5-java3.png" /></p>
<h3 id="implementar-listado-autores">Implementar listado Autores</h3>
<p>Como hemos visto anteriormente en la parte de frontend, para la edición de un <code>Juego</code> nos hace falta un método que devuelva un listado de <code>Autores</code>, ya que ahora mismo la operación que tenemos implementada devuelve un objeto <code>Page</code>.</p>
<p>Así que antes de finalizar la implementación de backend, vamos a desarrollar esta nueva operación. Por supuesto, respetaremos las operaciones previas que ya existían.</p>
<div class="tabbed-set" data-tabs="17:3"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><label for="__tabbed_17_1">AuthorController.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.CrossOrigin</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.config.mapper.BeanMapper</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/author/v1&quot;</span><span class="p">)</span>
<span class="nd">@RestController</span>
<span class="nd">@CrossOrigin</span><span class="p">(</span><span class="n">origins</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span><span class="p">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorController</span> <span class="p">{</span>

    <span class="nd">@Autowired</span>
    <span class="n">AuthorService</span> <span class="n">authorService</span><span class="p">;</span>

    <span class="nd">@Autowired</span>
    <span class="n">BeanMapper</span> <span class="n">beanMapper</span><span class="p">;</span>

<span class="hll">    <span class="cm">/**</span>
</span><span class="hll"><span class="cm">    * Método para recuperar un listado paginado de {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
</span><span class="hll"><span class="cm">    * @param dto</span>
</span><span class="hll"><span class="cm">    * @return</span>
</span><span class="hll"><span class="cm">    */</span>
</span><span class="hll">    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="p">.</span><span class="na">GET</span><span class="p">)</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AuthorDto</span><span class="o">&gt;</span> <span class="nf">list</span><span class="p">()</span> <span class="p">{</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">beanMapper</span><span class="p">.</span><span class="na">mapList</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">authorService</span><span class="p">.</span><span class="na">list</span><span class="p">(),</span> <span class="n">AuthorDto</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span>
    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar un listado paginado de {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
<span class="cm">    * @param dto</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="p">.</span><span class="na">POST</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">AuthorDto</span><span class="o">&gt;</span> <span class="nf">findPage</span><span class="p">(</span><span class="nd">@RequestBody</span> <span class="n">AuthorSearchDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">beanMapper</span><span class="p">.</span><span class="na">mapPage</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">authorService</span><span class="p">.</span><span class="na">findPage</span><span class="p">(</span><span class="n">dto</span><span class="p">),</span> <span class="n">AuthorDto</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
<span class="cm">    * @param data datos de la entidad</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="p">.</span><span class="na">PUT</span><span class="p">)</span>
    <span class="kd">public</span> <span class="n">AuthorDto</span> <span class="nf">save</span><span class="p">(</span><span class="nd">@RequestBody</span> <span class="n">AuthorDto</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">beanMapper</span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">authorService</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">AuthorDto</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
<span class="cm">    * @param id PK de la entidad</span>
<span class="cm">    */</span>
    <span class="nd">@RequestMapping</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/{id}&quot;</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="p">.</span><span class="na">DELETE</span><span class="p">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="p">(</span><span class="s">&quot;id&quot;</span><span class="p">)</span> <span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">authorService</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><label for="__tabbed_17_2">AuthorService.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.Author</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AuthorService</span> <span class="p">{</span>

    <span class="cm">/**</span>
<span class="cm">    * Recupera un {@link com.capgemini.coedevon.tutorial.author.model.Author} a través de su ID</span>
<span class="cm">    * @param id</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">Author</span> <span class="nf">get</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para recuperar un listado paginado de {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
<span class="cm">    * @param dto</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">Page</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">findPage</span><span class="p">(</span><span class="n">AuthorSearchDto</span> <span class="n">dto</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
<span class="cm">    * @param data</span>
<span class="cm">    * @return</span>
<span class="cm">    */</span>
    <span class="n">Author</span> <span class="nf">save</span><span class="p">(</span><span class="n">AuthorDto</span> <span class="n">data</span><span class="p">);</span>

    <span class="cm">/**</span>
<span class="cm">    * Método para crear o actualizar un {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
<span class="cm">    * @param id</span>
<span class="cm">    */</span>
    <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">);</span>

<span class="hll">    <span class="cm">/**</span>
</span><span class="hll"><span class="cm">    * Método para recuperar un listado completo de {@link com.capgemini.coedevon.tutorial.author.model.Author}</span>
</span><span class="hll"><span class="cm">    * @return</span>
</span><span class="hll"><span class="cm">    */</span>
</span><span class="hll">    <span class="n">List</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">list</span><span class="p">();</span>
</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_17_3" name="__tabbed_17" type="radio" /><label for="__tabbed_17_3">AuthorServiceImpl.java</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="kn">package</span> <span class="nn">com.capgemini.coedevon.tutorial.author</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">javax.transaction.Transactional</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.BeanUtils</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Page</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="p">;</span>

<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.Author</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorDto</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">com.capgemini.coedevon.tutorial.author.model.AuthorSearchDto</span><span class="p">;</span>

<span class="cm">/**</span>
<span class="cm">* @author coedevon</span>
<span class="cm">*/</span>
<span class="nd">@Service</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AuthorServiceImpl</span> <span class="kd">implements</span> <span class="n">AuthorService</span> <span class="p">{</span>

    <span class="nd">@Autowired</span>
    <span class="n">AuthorRepository</span> <span class="n">authorRepository</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Author</span> <span class="nf">get</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">id</span><span class="p">).</span><span class="na">orElse</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">findPage</span><span class="p">(</span><span class="n">AuthorSearchDto</span> <span class="n">dto</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">(</span><span class="n">dto</span><span class="p">.</span><span class="na">getPageable</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Author</span> <span class="nf">save</span><span class="p">(</span><span class="n">AuthorDto</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>

        <span class="n">Author</span> <span class="n">categoria</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="na">getId</span><span class="p">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
            <span class="n">categoria</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="na">getId</span><span class="p">());</span>
        <span class="k">else</span>
            <span class="n">categoria</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Author</span><span class="p">();</span>

        <span class="n">BeanUtils</span><span class="p">.</span><span class="na">copyProperties</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">categoria</span><span class="p">);</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">save</span><span class="p">(</span><span class="n">categoria</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">    * {@inheritDoc}</span>
<span class="cm">    */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="p">(</span><span class="n">Long</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">deleteById</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>

<span class="hll">    <span class="cm">/**</span>
</span><span class="hll"><span class="cm">    * {@inheritDoc}</span>
</span><span class="hll"><span class="cm">    */</span>
</span><span class="hll">    <span class="nd">@Override</span>
</span><span class="hll">    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span> <span class="nf">list</span><span class="p">()</span> <span class="p">{</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">return</span> <span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Author</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="na">authorRepository</span><span class="p">.</span><span class="na">findAll</span><span class="p">();</span>
</span><span class="hll">    <span class="p">}</span>
</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
<p>Ahora sí, todo listo para seguir al siguiente punto.</p>
<h2 id="conectar-front-con-back">Conectar front con back</h2>
<p>Una vez implementado front y back, lo que nos queda es modificar el servicio del front para que conecte directamente con las operaciones ofrecidas por el back.</p>
<div class="tabbed-set" data-tabs="18:2"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><label for="__tabbed_18_1">author-service.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Pageable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/page/Pageable&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AuthorPage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/authors/AuthorPage&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="k">of</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/authors/Author&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">({</span>
    <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthorService</span> <span class="p">{</span>

    <span class="kr">constructor</span><span class="p">(</span>
        <span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span>
    <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">getAuthors</span><span class="p">(</span><span class="nx">pageable</span>: <span class="kt">Pageable</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">AuthorPage</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="o">&lt;</span><span class="nx">AuthorPage</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/author/v1/&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">pageable</span>:<span class="kt">pageable</span><span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">saveAuthor</span><span class="p">(</span><span class="nx">author</span>: <span class="kt">Author</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Author</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">put</span><span class="o">&lt;</span><span class="nx">Author</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/author/v1/&#39;</span><span class="p">,</span> <span class="nx">author</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">deleteAuthor</span><span class="p">(</span><span class="nx">idAuthor</span> : <span class="kt">number</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/author/v1/&#39;</span><span class="o">+</span><span class="nx">idAuthor</span><span class="p">);</span>
    <span class="p">}</span>    

<span class="hll">    <span class="nx">getAllAuthors</span><span class="p">()</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Author</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
</span><span class="hll">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Author</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/author/v1/&#39;</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_18_2" name="__tabbed_18" type="radio" /><label for="__tabbed_18_2">game-service.ts</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Game</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/models/games/Game&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="k">of</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HttpClient</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>

<span class="kd">@Injectable</span><span class="p">({</span>
    <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">GameService</span> <span class="p">{</span>

    <span class="kr">constructor</span><span class="p">(</span>
<span class="hll">        <span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span>
</span>    <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="nx">getGames</span><span class="p">(</span><span class="nx">title?</span>: <span class="kt">String</span><span class="p">,</span> <span class="nx">categoryId?</span>: <span class="kt">number</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Game</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="hll">
</span><span class="hll">        <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="hll">            <span class="nx">title</span>: <span class="kt">title</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">title</span> : <span class="kt">null</span><span class="p">,</span> 
</span><span class="hll">            <span class="nx">categoryId</span>: <span class="kt">categoryId</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">categoryId</span> : <span class="kt">null</span>
</span><span class="hll">        <span class="p">};</span>
</span><span class="hll">
</span><span class="hll">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">post</span><span class="o">&lt;</span><span class="nx">Game</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/game/v1/&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span>    <span class="p">}</span>

    <span class="nx">saveGame</span><span class="p">(</span><span class="nx">game</span>: <span class="kt">Game</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Game</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="hll">        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">put</span><span class="o">&lt;</span><span class="nx">Game</span><span class="o">&gt;</span><span class="p">(</span><span class="s1">&#39;http://localhost:8080/game/v1/&#39;</span><span class="p">,</span> <span class="nx">game</span><span class="p">);</span>
</span>    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
</div>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Pie">
      
        
        <a href="../step4/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Code: Listado paginado" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Anterior
              </span>
              Code: Listado paginado
            </div>
          </div>
        </a>
      
      
        
        <a href="../step6/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: Code: Validaciones (TBD)" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Siguiente
              </span>
              Code: Validaciones (TBD)
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>