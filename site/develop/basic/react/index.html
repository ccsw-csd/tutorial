
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.5">
    
    
      
        <title>üîµ React - Tutorial Frontend - Backend</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#listado-simple-react" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../../.." title="Tutorial Frontend - Backend" class="md-header__button md-logo" aria-label="Tutorial Frontend - Backend" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tutorial Frontend - Backend
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              üîµ React
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B√∫squeda" placeholder="B√∫squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b√∫squeda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegaci√≥n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Tutorial Frontend - Backend" class="md-nav__button md-logo" aria-label="Tutorial Frontend - Backend" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Tutorial Frontend - Backend
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Bienvenido!
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../thanks/" class="md-nav__link">
        Agradecimientos!
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../usecases/" class="md-nav__link">
        Contexto de la aplicaci√≥n
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Entorno de desarrollo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Entorno de desarrollo" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Entorno de desarrollo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../install/angular/" class="md-nav__link">
        üîµ Angular
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../install/react/" class="md-nav__link">
        üîµ React
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../install/vuejs/" class="md-nav__link">
        üîµ Vue.js
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../install/springboot/" class="md-nav__link">
        üü¢ Spring Boot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../install/nodejs/" class="md-nav__link">
        üü¢ Nodejs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Estructura y buenas pr√°cticas
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Estructura y buenas pr√°cticas" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Estructura y buenas pr√°cticas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cleancode/angular/" class="md-nav__link">
        üîµ Angular
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cleancode/react/" class="md-nav__link">
        üîµ React
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cleancode/vuejs/" class="md-nav__link">
        üîµ Vue.js
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cleancode/springboot/" class="md-nav__link">
        üü¢ Spring Boot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../cleancode/nodejs/" class="md-nav__link">
        üü¢ Nodejs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Code: Listado simple
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code: Listado simple" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Code: Listado simple
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../angular/" class="md-nav__link">
        üîµ Angular
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          üîµ React
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        üîµ React
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#primeros-pasos" class="md-nav__link">
    Primeros pasos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jsx" class="md-nav__link">
    JSX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usestate-hook" class="md-nav__link">
    useState hook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libreria-de-componentes-y-resto-de-dependencias" class="md-nav__link">
    Librer√≠a de componentes y resto de dependencias
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#layout-general" class="md-nav__link">
    Layout general
  </a>
  
    <nav class="md-nav" aria-label="Layout general">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-componente" class="md-nav__link">
    Crear componente
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creando-un-listado-simple" class="md-nav__link">
    Creando un listado simple
  </a>
  
    <nav class="md-nav" aria-label="Creando un listado simple">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pagina-categorias" class="md-nav__link">
    P√°gina categor√≠as
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperando-datos" class="md-nav__link">
    Recuperando datos
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vuejs/" class="md-nav__link">
        üîµ Vue.js
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../springboot/" class="md-nav__link">
        üü¢ Spring Boot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nodejs/" class="md-nav__link">
        üü¢ Nodejs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          Code: Listado paginado
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code: Listado paginado" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Code: Listado paginado
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../paginated/angular/" class="md-nav__link">
        üîµ Angular
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../paginated/react/" class="md-nav__link">
        üîµ React
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../paginated/vuejs/" class="md-nav__link">
        üîµ Vue.js
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../paginated/springboot/" class="md-nav__link">
        üü¢ Spring Boot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../paginated/nodejs/" class="md-nav__link">
        üü¢ Nodejs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          Code: Listado filtrado
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code: Listado filtrado" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Code: Listado filtrado
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../filtered/angular/" class="md-nav__link">
        üîµ Angular
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../filtered/react/" class="md-nav__link">
        üîµ React
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../filtered/vuejs/" class="md-nav__link">
        üîµ Vue.js
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../filtered/springboot/" class="md-nav__link">
        üü¢ Spring Boot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../filtered/nodejs/" class="md-nav__link">
        üü¢ Nodejs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../exercise/" class="md-nav__link">
        Ahora hazlo t√∫!
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10">
          Anexos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Anexos" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Anexos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/git/" class="md-nav__link">
        GIT: Tutorial b√°sico
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/rest/" class="md-nav__link">
        API Rest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/tdd/" class="md-nav__link">
        TDD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/jpa/" class="md-nav__link">
        Spring Data: JPA
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_5" type="checkbox" id="__nav_10_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10_5">
          Spring Cloud
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Spring Cloud" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_5">
          <span class="md-nav__icon md-icon"></span>
          Spring Cloud
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springcloud/intro/" class="md-nav__link">
        Introducci√≥n
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springcloud/basic/" class="md-nav__link">
        Listado simple
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springcloud/paginated/" class="md-nav__link">
        Listado paginado
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springcloud/filtered/" class="md-nav__link">
        Listado filtrado
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springcloud/infra/" class="md-nav__link">
        Infraestructura
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springcloud/summary/" class="md-nav__link">
        Resumen
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_6" type="checkbox" id="__nav_10_6" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10_6">
          Spring Batch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Spring Batch" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_6">
          <span class="md-nav__icon md-icon"></span>
          Spring Batch
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springbatch/intro/" class="md-nav__link">
        Introducci√≥n
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springbatch/filetodb/" class="md-nav__link">
        Fichero a BBDD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springbatch/filetofile/" class="md-nav__link">
        Fichero a Fichero
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springbatch/clean/" class="md-nav__link">
        Limpieza
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springbatch/summary/" class="md-nav__link">
        Resumen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../appendix/springbatch/exercise/" class="md-nav__link">
        Ahora hazlo t√∫!
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#primeros-pasos" class="md-nav__link">
    Primeros pasos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jsx" class="md-nav__link">
    JSX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usestate-hook" class="md-nav__link">
    useState hook
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libreria-de-componentes-y-resto-de-dependencias" class="md-nav__link">
    Librer√≠a de componentes y resto de dependencias
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#layout-general" class="md-nav__link">
    Layout general
  </a>
  
    <nav class="md-nav" aria-label="Layout general">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-componente" class="md-nav__link">
    Crear componente
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creando-un-listado-simple" class="md-nav__link">
    Creando un listado simple
  </a>
  
    <nav class="md-nav" aria-label="Creando un listado simple">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pagina-categorias" class="md-nav__link">
    P√°gina categor√≠as
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recuperando-datos" class="md-nav__link">
    Recuperando datos
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="listado-simple-react">Listado simple - React</h1>
<p>Ahora que ya tenemos listo el proyecto frontend de React (en el puerto 5173), ya podemos empezar a codificar la soluci√≥n.</p>
<h2 id="primeros-pasos">Primeros pasos</h2>
<div class="admonition success">
<p class="admonition-title">Antes de empezar</p>
<p>Quiero hacer hincapi√© que React tiene una documentaci√≥n muy extensa y completa, as√≠ que te recomiendo que hagas uso de ella cuando tengas cualquier duda. Tanto en la propia web de documentaci√≥n de <a href="https://es.react.dev/">React</a> como en la web de componentes <a href="https://mui.com/">Mui</a> puedes buscar casi cualquier ejemplo que necesites.</p>
</div>
<p>Si abrimos el proyecto con el IDE que tengamos (Visual Studio Code en el caso del tutorial) podemos ver que en la carpeta <code>src</code> existen unos ficheros ya creados por defecto. Estos ficheros son:</p>
<ul>
<li><code>main.tsx</code> ‚Üí contiene el componente principal del proyecto.</li>
<li><code>index.css</code> ‚Üí contiene los estilos CSS globales de la aplicaci√≥n.</li>
<li><code>APP.tsx</code> ‚Üí contiene el componente inicial del proyecto </li>
<li><code>APP.css</code> ‚Üí contiene los estilos para el componente APP.</li>
</ul>
<p>Aunque <code>main.tsx</code> y <code>App.tsx</code> puedan parecer lo mismo <code>main.tsx</code> se suele dejar tal y como esta ya que lo √∫nico que hace es asociar el div con id ‚Äúroot‚Äù del archivo <code>index.html</code> de la ra√≠z de nuestro proyecto para que sea el nodo principal de React. En el archivo <code>App.tsx</code> es donde realmente empezamos a desarrollar c√≥digo.</p>
<p>Si abrimos <code>main.tsx</code> podemos ver que se esta usando <code>&lt;App /&gt;</code> como una etiqueta html. El nombre con que exportemos nuestros componentes ser√° el nombre de la etiqueta html utilizado para renderizar los componentes.</p>
<p>Vamos a modificar este c√≥digo inicial para ver c√≥mo funciona. Abrimos el fichero <code>App.tsx</code> y vamos a dejarlo de esta manera:</p>
<p><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react&#39;</span>
<span class="k">import</span> <span class="s1">&#39;./App.css&#39;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
  <span class="kd">const</span> <span class="nx">probando</span> <span class="o">=</span> <span class="s2">&quot;probando 123&quot;</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;&gt;</span>
      <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">probando</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;card&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setCount</span><span class="p">((</span><span class="nx">count</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">count</span> <span class="o">+</span> <span class="mf">1</span><span class="p">)}</span><span class="o">&gt;</span>
          <span class="nx">count</span> <span class="nx">is</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="err">/button&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="o">&lt;</span><span class="err">/&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span>
</code></pre></div>
En los componentes React siempre se suele seguir el mismo orden, primero introduciremos los imports necesarios, luego podemos declarar variables y funciones que no se vayan a modificar, despu√©s creamos nuestra funci√≥n principal con el nombre del componente y dentro de esta lo primero que se suelen declarar son todas las variables, despu√©s a√±adiremos m√©todos del componente y por √∫ltimo tenemos que llamar a return para devolver lo que queramos renderizar.</p>
<p>Si ahora abrimos nuestro navegador veremos en pantalla el valor de la variable "probando" que hemos introducido mediante una expresi√≥n en un tag p de html y un bot√≥n que si pulsamos incrementar√° el valor de la cuenta en uno. Si refrescamos la pantalla el valor de la cuenta volver√° autom√°ticamente a 0. Es hora de explicar como funciona un componente React y el hook useState.</p>
<h2 id="jsx">JSX</h2>
<p>JSX significa Javascript XML. JSX nos permite escribir elementos HTML en JavaScript y colocarlos en el DOM. Con JSX puedes escribir expresiones dentro de llaves ‚Äú{}‚Äù. Estas expresiones pueden ser variables, propiedades o cualquier expresi√≥n Javascript valida. JSX ejecutar√° esta expresi√≥n y devolver√° el resultado.</p>
<p>Por ejemplo, si queremos mostrar un elemento de forma condicional lo podemos hacer de la siguiente manera: </p>
<div class="highlight"><pre><span></span><code>        <span class="p">{</span>
          <span class="nx">variableBooleana</span>  <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">El</span> <span class="nx">valor</span> <span class="nx">es</span> <span class="kc">true</span><span class="o">&lt;</span><span class="err">/p&gt;</span>
        <span class="p">}</span>
</code></pre></div>
<p>Tambi√©n podemos usar el operador ternario para condiciones: </p>
<div class="highlight"><pre><span></span><code>        <span class="p">{</span>
          <span class="nx">variableBooleana</span>  <span class="o">?</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">El</span> <span class="nx">valor</span> <span class="nx">es</span> <span class="kc">true</span><span class="o">&lt;</span><span class="err">/p&gt; : &lt;p&gt;El valor es false&lt;/p&gt;</span>
        <span class="p">}</span>
</code></pre></div>
<p>Y si lo que queremos es recorrer un array e ir representando los elementos lo podemos hacer de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>        <span class="p">{</span>
          <span class="nx">arrayNumerico</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">numero</span> <span class="p">=&gt;</span> <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">Mi</span> <span class="nx">valor</span> <span class="nx">es</span> <span class="p">{</span><span class="nx">numero</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/p&gt;)</span>
        <span class="p">}</span>
</code></pre></div>
<p>React solo puede devolver un elemento en su bloque return, es por eso por lo que algunas veces se rodea todo el c√≥digo con un elemento llamado Fragment ‚Äú&lt;&gt;‚Äù. Estos fragment no soportan ni propiedades ni atributos y no tendr√°n visibilidad en el dom.</p>
<p>Dentro de una expresi√≥n podemos ver dos formas de llamar a una funci√≥n:</p>
<div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">callToCancelar</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Cancelar</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
<span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">callToCancelar</span><span class="p">(</span><span class="s1">&#39;param1&#39;</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">Cancelar</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
</code></pre></div>
<p>En la primera se pasa una funci√≥n por referencia y Button es el responsable de los par√°metros del evento. En la segunda tras hacer onClick se ejecuta la funci√≥n callToCancelar con los par√°metros que nosotros queramos quitando esa responsabilidad a Button. En t√©rminos de rendimiento es mejor la primera manera ya que en la segunda se vuelve a crear la funci√≥n en cada renderizado, pero hay veces que es necesario hacerlo as√≠ para tomar control de los par√°metros.</p>
<h2 id="usestate-hook">useState hook</h2>
<p>Todo componente en React tiene una serie de variables. Algunas de estas son propiedades de entrada como podr√≠an serlo disabled en un bot√≥n y que se trasmiten de componentes padres a hijos. </p>
<p>Luego tenemos variables y constantes declaradas dentro del componente como por ejemplo la constante probando de nuestro ejemplo. Y finalmente tenemos unas variables especiales dentro de nuestro componente que corresponden al estado de este.</p>
<p>Si modificamos el estado de un componente este autom√°ticamente se volver√° a renderizar y producir√° una nueva representaci√≥n en pantalla.</p>
<p>Como ya hemos comentado previamente los hooks aparecieron en la versi√≥n 16.8 de React. Antes de esto si quer√≠amos acceder al estado de un componente solo pod√≠amos acceder a este mediante componentes de clase, pero desde esta versi√≥n podemos hacer uso de estas funciones especiales para utilizar estas caracter√≠sticas de React.</p>
<p>M√°s tarde veremos otras, pero de momento vamos a ver useState. </p>
<div class="highlight"><pre><span></span><code>const [count, setCount] = useState(0)
</code></pre></div>
<p>En nuestro ejemplo tenemos una variable count que va mostrando su valor en el interior de un bot√≥n. Si pulsamos el bot√≥n ejecutara la funci√≥n <code>setCount</code> que actualiza el valor de nuestro contador. A esta funci√≥n se le puede pasar o bien el nuevo valor que tomar√° esta variable de estado o bien una funci√≥n cuyo primer par√°metro es el valor actual de la variable. Siempre que se actualice la variable del estado de producir√° un nuevo renderizado del componente, eso lo pod√©is comprobar escribiendo un <code>console.log</code> antes del return. En nuestro caso hemos inicializado nuestra variable de estado con el valor 0, pero puede inicializarse con un valor de cualquier tipo javascript. No existe limite en el n√∫mero de variables de estado por componente.</p>
<p>Debemos tener en cuenta que si modificamos el estado de un componente que renderiza otros componentes, estos tambi√©n se volver√°n a renderizar al cambiar el estado del componente padre. Es por esto por lo que debemos tener cuidado a la hora de modificar estados y renderizar los hijos correctamente. </p>
<div class="admonition info">
<p class="admonition-title">Nota</p>
<p>Para evitar el re-renderizado de los componentes hijos existe una funci√≥n especial en React llamada <code>memo</code> que evita este comportamiento si las props de los hijos no se ven modificadas. En este curso no cubriremos esta funcionalidad.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Nota</p>
<p>Por convenci√≥n todos los hooks empiezan con <code>use</code>. Si en alg√∫n proyecto tienes que crear un custom hook es importante seguir esta nomenclatura.</p>
</div>
<h2 id="libreria-de-componentes-y-resto-de-dependencias">Librer√≠a de componentes y resto de dependencias</h2>
<p>Antes de continuar con nuestro curso vamos a instalar las dependencias necesarias para empezar a construir la base de nuestra aplicaci√≥n. Para ello ejecutamos lo siguiente en la consola en la ra√≠z de nuestro proyecto:</p>
<div class="highlight"><pre><span></span><code>npm i @mui/material @mui/icons-material react-router-dom react-redux @reduxjs/toolkit @emotion/react @emotion/styled
</code></pre></div>
<p>Como librer√≠a de componentes vamos a utilizar Mui, anteriormente conocido como Material ui, es una librer√≠a muy utilizada en los proyectos de React con una gran documentaci√≥n. Tambi√©n necesitaremos las librer√≠as de emotion necesarias para trabajar con Mui.</p>
<p>Vamos a utilizar la librer√≠a react router dom que nos permitir√° definir y usar rutas de navegaci√≥n en nuestra aplicaci√≥n.</p>
<p>Vamos a instalar tambi√©n react redux y redux toolkit para gestionar el estado global de nuestra aplicaci√≥n.</p>
<h2 id="layout-general">Layout general</h2>
<h3 id="crear-componente">Crear componente</h3>
<p>Lo primero que haremos ser√° borrar el contenido del archivo <code>App.css</code> y vamos a modificar <code>index.css</code> con el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><span class="p">:</span><span class="nd">root</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="n">Inter</span><span class="p">,</span><span class="w"> </span><span class="n">system-ui</span><span class="p">,</span><span class="w"> </span><span class="n">Avenir</span><span class="p">,</span><span class="w"> </span><span class="n">Helvetica</span><span class="p">,</span><span class="w"> </span><span class="n">Arial</span><span class="p">,</span><span class="w"> </span><span class="kc">sans-serif</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nt">body</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">@</span><span class="k">media</span><span class="w"> </span><span class="o">(</span><span class="nt">prefers-color-scheme</span><span class="o">:</span><span class="w"> </span><span class="nt">light</span><span class="o">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">:</span><span class="nd">root</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#213547</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#ffffff</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">container</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">newButton</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">flex-end</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Ahora vamos a crear los distintos componentes que compondr√°n nuestra aplicaci√≥n. Para ello dentro de la carpeta src vamos a crear una nueva carpeta llamada pages y dentro de esta crearemos tres carpetas relativas a nuestras paginas navegables: ‚ÄúAuthor‚Äù, ‚ÄúCategory‚Äù y ‚ÄúGame‚Äù. Dentro de estas a su vez crearemos un fichero llamado <code>Author.tsx</code>, <code>Category.tsx</code> y <code>Game.tsx</code> respectivamente, cuyo contenido ser√° una funci√≥n que tendr√° por nombre el mismo nombre que el fichero y que devolver√° un div cuyo contenido ser√° tambi√©n el nombre del fichero: </p>
<div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">Game</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Game</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Ahora vamos a crear en la carpeta src otra carpeta cuyo nombre ser√° ‚Äúcomponents‚Äù y dentro de esta un fichero llamado <code>Layout.tsx</code> cuyo contenido ser√° el siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;react&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">AppBar</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/AppBar&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Box</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Box&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Toolbar</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Toolbar&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">IconButton</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/IconButton&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Typography</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Typography&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Menu</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Menu&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">MenuIcon</span> <span class="kr">from</span> <span class="s2">&quot;@mui/icons-material/Menu&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Container</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Container&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Button&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">MenuItem</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/MenuItem&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">CasinoIcon</span> <span class="kr">from</span> <span class="s2">&quot;@mui/icons-material/Casino&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useNavigate</span><span class="p">,</span> <span class="nx">Outlet</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;react-router-dom&quot;</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">pages</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Catalogo&quot;</span><span class="p">,</span> <span class="nx">link</span><span class="o">:</span> <span class="s2">&quot;games&quot;</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Categor√≠as&quot;</span><span class="p">,</span> <span class="nx">link</span><span class="o">:</span> <span class="s2">&quot;categories&quot;</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Autores&quot;</span><span class="p">,</span> <span class="nx">link</span><span class="o">:</span> <span class="s2">&quot;authors&quot;</span> <span class="p">},</span>
<span class="p">];</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">Layout</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">navigate</span> <span class="o">=</span> <span class="nx">useNavigate</span><span class="p">();</span>

  <span class="kd">const</span> <span class="p">[</span><span class="nx">anchorElNav</span><span class="p">,</span> <span class="nx">setAnchorElNav</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="o">&lt;</span><span class="kc">null</span> <span class="o">|</span> <span class="nx">HTMLElement</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="kc">null</span>
  <span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleOpenNavMenu</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span>: <span class="kt">React.MouseEvent</span><span class="o">&lt;</span><span class="nx">HTMLElement</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">setAnchorElNav</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">handleCloseNavMenu</span> <span class="o">=</span> <span class="p">(</span><span class="nx">link</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">navigate</span><span class="p">(</span><span class="sb">`/</span><span class="si">${</span><span class="nx">link</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="nx">setAnchorElNav</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;&gt;</span>
      <span class="o">&lt;</span><span class="nx">AppBar</span> <span class="nx">position</span><span class="o">=</span><span class="s2">&quot;static&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Container</span> <span class="nx">maxWidth</span><span class="o">=</span><span class="s2">&quot;xl&quot;</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Toolbar</span> <span class="nx">disableGutters</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">CasinoIcon</span> <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span> <span class="nx">display</span><span class="o">:</span> <span class="p">{</span> <span class="nx">xs</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="nx">md</span><span class="o">:</span> <span class="s2">&quot;flex&quot;</span> <span class="p">},</span> <span class="nx">mr</span>: <span class="kt">1</span> <span class="p">}}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">Typography</span>
              <span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;h6&quot;</span>
              <span class="nx">noWrap</span>
              <span class="nx">component</span><span class="o">=</span><span class="s2">&quot;a&quot;</span>
              <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;/&quot;</span>
              <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
                <span class="nx">mr</span>: <span class="kt">2</span><span class="p">,</span>
                <span class="nx">display</span><span class="o">:</span> <span class="p">{</span> <span class="nx">xs</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="nx">md</span><span class="o">:</span> <span class="s2">&quot;flex&quot;</span> <span class="p">},</span>
                <span class="nx">fontFamily</span><span class="o">:</span> <span class="s2">&quot;monospace&quot;</span><span class="p">,</span>
                <span class="nx">fontWeight</span>: <span class="kt">700</span><span class="p">,</span>
                <span class="nx">letterSpacing</span><span class="o">:</span> <span class="s2">&quot;.3rem&quot;</span><span class="p">,</span>
                <span class="nx">color</span><span class="o">:</span> <span class="s2">&quot;inherit&quot;</span><span class="p">,</span>
                <span class="nx">textDecoration</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
              <span class="p">}}</span>
            <span class="o">&gt;</span>
              <span class="nx">Ludoteca</span> <span class="nx">Tan</span>
            <span class="o">&lt;</span><span class="err">/Typography&gt;</span>

            <span class="o">&lt;</span><span class="nx">Box</span> <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span> <span class="nx">flexGrow</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">display</span><span class="o">:</span> <span class="p">{</span> <span class="nx">xs</span><span class="o">:</span> <span class="s2">&quot;flex&quot;</span><span class="p">,</span> <span class="nx">md</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span> <span class="p">}</span> <span class="p">}}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">IconButton</span>
                <span class="nx">size</span><span class="o">=</span><span class="s2">&quot;large&quot;</span>
                <span class="nx">aria</span><span class="o">-</span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;account of current user&quot;</span>
                <span class="nx">aria</span><span class="o">-</span><span class="nx">controls</span><span class="o">=</span><span class="s2">&quot;menu-appbar&quot;</span>
                <span class="nx">aria</span><span class="o">-</span><span class="nx">haspopup</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
                <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleOpenNavMenu</span><span class="p">}</span>
                <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;inherit&quot;</span>
              <span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">MenuIcon</span> <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="err">/IconButton&gt;</span>
              <span class="o">&lt;</span><span class="nx">Menu</span>
                <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;menu-appbar&quot;</span>
                <span class="nx">anchorEl</span><span class="o">=</span><span class="p">{</span><span class="nx">anchorElNav</span><span class="p">}</span>
                <span class="nx">anchorOrigin</span><span class="o">=</span><span class="p">{{</span>
                  <span class="nx">vertical</span><span class="o">:</span> <span class="s2">&quot;bottom&quot;</span><span class="p">,</span>
                  <span class="nx">horizontal</span><span class="o">:</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span>
                <span class="p">}}</span>
                <span class="nx">keepMounted</span>
                <span class="nx">transformOrigin</span><span class="o">=</span><span class="p">{{</span>
                  <span class="nx">vertical</span><span class="o">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span>
                  <span class="nx">horizontal</span><span class="o">:</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span>
                <span class="p">}}</span>
                <span class="nx">open</span><span class="o">=</span><span class="p">{</span><span class="nb">Boolean</span><span class="p">(</span><span class="nx">anchorElNav</span><span class="p">)}</span>
                <span class="nx">onClose</span><span class="o">=</span><span class="p">{</span><span class="nx">handleCloseNavMenu</span><span class="p">}</span>
                <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
                  <span class="nx">display</span><span class="o">:</span> <span class="p">{</span> <span class="nx">xs</span><span class="o">:</span> <span class="s2">&quot;block&quot;</span><span class="p">,</span> <span class="nx">md</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span> <span class="p">},</span>
                <span class="p">}}</span>
              <span class="o">&gt;</span>
                <span class="p">{</span><span class="nx">pages</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">page</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span>
                  <span class="o">&lt;</span><span class="nx">MenuItem</span>
                    <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">page</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
                    <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">handleCloseNavMenu</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">link</span><span class="p">)}</span>
                  <span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="nx">Typography</span> <span class="nx">textAlign</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="o">&gt;</span>
                        <span class="p">{</span><span class="nx">page</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
                      <span class="o">&lt;</span><span class="err">/Typography&gt;</span>
                  <span class="o">&lt;</span><span class="err">/MenuItem&gt;</span>
                <span class="p">))}</span>
              <span class="o">&lt;</span><span class="err">/Menu&gt;</span>
            <span class="o">&lt;</span><span class="err">/Box&gt;</span>
            <span class="o">&lt;</span><span class="nx">CasinoIcon</span> <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span> <span class="nx">display</span><span class="o">:</span> <span class="p">{</span> <span class="nx">xs</span><span class="o">:</span> <span class="s2">&quot;flex&quot;</span><span class="p">,</span> <span class="nx">md</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span> <span class="p">},</span> <span class="nx">mr</span>: <span class="kt">1</span> <span class="p">}}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">Typography</span>
              <span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;h5&quot;</span>
              <span class="nx">noWrap</span>
              <span class="nx">component</span><span class="o">=</span><span class="s2">&quot;a&quot;</span>
              <span class="nx">href</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
              <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
                <span class="nx">mr</span>: <span class="kt">2</span><span class="p">,</span>
                <span class="nx">display</span><span class="o">:</span> <span class="p">{</span> <span class="nx">xs</span><span class="o">:</span> <span class="s2">&quot;flex&quot;</span><span class="p">,</span> <span class="nx">md</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span> <span class="p">},</span>
                <span class="nx">flexGrow</span>: <span class="kt">1</span><span class="p">,</span>
                <span class="nx">fontFamily</span><span class="o">:</span> <span class="s2">&quot;monospace&quot;</span><span class="p">,</span>
                <span class="nx">fontWeight</span>: <span class="kt">700</span><span class="p">,</span>
                <span class="nx">letterSpacing</span><span class="o">:</span> <span class="s2">&quot;.3rem&quot;</span><span class="p">,</span>
                <span class="nx">color</span><span class="o">:</span> <span class="s2">&quot;inherit&quot;</span><span class="p">,</span>
                <span class="nx">textDecoration</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
              <span class="p">}}</span>
            <span class="o">&gt;</span>
              <span class="nx">Ludoteca</span> <span class="nx">Tan</span>
            <span class="o">&lt;</span><span class="err">/Typography&gt;</span>
            <span class="o">&lt;</span><span class="nx">Box</span> <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span> <span class="nx">flexGrow</span>: <span class="kt">1</span><span class="p">,</span> <span class="nx">display</span><span class="o">:</span> <span class="p">{</span> <span class="nx">xs</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="nx">md</span><span class="o">:</span> <span class="s2">&quot;flex&quot;</span> <span class="p">}</span> <span class="p">}}</span><span class="o">&gt;</span>
              <span class="p">{</span><span class="nx">pages</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">page</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span>
                <span class="o">&lt;</span><span class="nx">Button</span>
                  <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">page</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
                  <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">handleCloseNavMenu</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">link</span><span class="p">)}</span>
                  <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span> <span class="nx">my</span>: <span class="kt">2</span><span class="p">,</span> <span class="nx">color</span><span class="o">:</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="nx">display</span><span class="o">:</span> <span class="s2">&quot;block&quot;</span> <span class="p">}}</span>
                <span class="o">&gt;</span>
                  <span class="p">{</span><span class="nx">page</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
                <span class="o">&lt;</span><span class="err">/Button&gt;</span>
              <span class="p">))}</span>
            <span class="o">&lt;</span><span class="err">/Box&gt;</span>
          <span class="o">&lt;</span><span class="err">/Toolbar&gt;</span>
        <span class="o">&lt;</span><span class="err">/Container&gt;</span>
      <span class="o">&lt;</span><span class="err">/AppBar&gt;</span>
      <span class="o">&lt;</span><span class="nx">Outlet</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="err">/&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<p>Aunque puede parecer complejo por su tama√±o en realidad no es tanto, casi todo es c√≥digo cogido directamente de un ejemplo de layout de navegaci√≥n de un componente de MUI.</p>
<p>Lo m√°s destacable es un nuevo hook (en realidad es un custom hook de react router dom) llamado <code>useNavigate</code> que como su propio nombre indica navegara a la ruta correspondiente seg√∫n el valor pulsado.</p>
<p>Las etiquetas sx son para dar estilo a los componentes de MUI. Tambi√©n se puede sobrescribir el estilo mediante hojas css pero es m√°s complejo y requiere una configuraci√≥n inicial que no cubriremos en este tutorial.</p>
<p>Si nos fijamos en la l√≠nea 90 se introduce una expresi√≥n javascript en la cual se recorre el array de pages declarado al inicio del componente y para cada uno de los valores se llama a <code>MenuItem</code> que es otro componente React al que se le pasan las props key, onClick y aunque no lo veamos tambi√©n la prop ‚Äúchildren‚Äù.</p>
<p>La prop children estar√° presente cuando pasemos elementos entre los tags de un elemento:</p>
<p><div class="highlight"><pre><span></span><code><span class="o">&lt;</span><span class="nx">MenuItem</span> <span class="o">&gt;</span>     
<span class="o">&lt;</span><span class="nx">Typography</span><span class="o">&gt;</span><span class="nx">I</span><span class="err">‚Äô</span><span class="nx">m</span> <span class="nx">a</span> <span class="nx">child</span><span class="o">&lt;</span><span class="err">/Typography&gt;</span>
 <span class="o">&lt;</span><span class="err">/MenuItem&gt;</span>
</code></pre></div>
El uso de la prop children no es muy recomendado y se prefiere que se pasen los elementos como una prop m√°s.</p>
<p>Siempre que rendericemos un array en react es recomendable usar una prop especial llamada ‚Äúkey‚Äù, de hecho, si no la usamos la consola de desarrollo se nos llenar√° de warnings por no usarla. </p>
<p>Esta key lo que permite a React es identificar cada elemento de formar m√°s eficiente, as√≠ si modificamos, a√±adimos o eliminamos un elemento de un array no ser√° necesario volver a renderizar todo el array, solo se eliminar√° el elemento necesario.</p>
<p>En la parte final del archivo tenemos una llamada al elemento <code>Outlet</code>. Este elemento es el que albergara el componente asociado a la ruta seleccionada.</p>
<p>Por √∫ltimo, el archivo <code>App.tsx</code> se tiene que quedar de esta manera:</p>
<p><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">BrowserRouter</span><span class="p">,</span> <span class="nx">Routes</span><span class="p">,</span> <span class="nx">Route</span><span class="p">,</span> <span class="nx">Navigate</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;react-router-dom&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Game</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./pages/Game/Game&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Author</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./pages/Author/Author&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Category</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./pages/Category/Category&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Layout</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./components/Layout&quot;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Routes</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Layout</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">index</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;games&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Game</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;categories&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Category</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;authors&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Author</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;*&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Navigate</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/games&quot;</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/Route&gt;</span>
          <span class="o">&lt;</span><span class="err">/Routes&gt;</span>
        <span class="o">&lt;</span><span class="err">/BrowserRouter&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div>
De esta manera definimos cada una de nuestras rutas y las asociamos a una p√°gina.</p>
<p>Vamos a arrancar el proyecto de nuevo con npm run dev y navegamos a http://localhost:5173/.</p>
<p>Ahora podemos ver como autom√°ticamente nos lleva a http://localhost:5173/games debido al √∫ltimo route en el que redirigimos cualquier path que no coincida con los anteriores a <code>/games</code>. Si pulsamos sobre las distintas opciones del men√∫ podemos ver c√≥mo va cambiando el outlet de nuestra aplicaci√≥n con los distintos div creados para cada uno de los componentes p√°gina.</p>
<h2 id="creando-un-listado-simple">Creando un listado simple</h2>
<h3 id="pagina-categorias">P√°gina categor√≠as</h3>
<p>Ya tenemos la estructura principal, ahora vamos a crear nuestra primera pantalla. Vamos a empezar por la de categor√≠as.</p>
<p>Lo primero que vamos a hacer es crear una carpeta llamada <code>types</code> dentro de <code>src/</code>. Aqu√≠ crearemos los tipos de typescript. Creamos un nuevo fichero llamado <code>Category.ts</code> cuyo contenido ser√° el siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">interface</span> <span class="nx">Category</span> <span class="p">{</span>
  <span class="nx">id</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">name</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Ahora vamos a crear un archivo de estilos que ser√° solo utilizado por el componente Category. Para ello dentro de la carpeta <code>src/pages/Category</code> vamos a crear un archivo llamado <code>Category.module.css</code>. Al llamar al archivo de esta manera React reconoce este archivo como un archivo √∫nico para un componente y hace que sus reglas css sean m√°s prioritarias, aunque por ejemplo exista una clase con el mismo nombre en el archivo <code>index.css</code>.</p>
<p>El contenido de nuestro archivo css ser√° el siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="nc">tableActions</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">margin-right</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">justify-content</span><span class="p">:</span><span class="w"> </span><span class="kc">flex-end</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">align-content</span><span class="p">:</span><span class="w"> </span><span class="kc">flex-start</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">gap</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Y por √∫ltimo el contenido de nuestro fichero <code>src/pages/Category.tsx</code> quedar√≠a as√≠:</p>
<p><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;react&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Table</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Table&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TableBody</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/TableBody&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TableCell</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/TableCell&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TableContainer</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/TableContainer&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TableHead</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/TableHead&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TableRow</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/TableRow&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Paper</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Paper&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Button&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">EditIcon</span> <span class="kr">from</span> <span class="s2">&quot;@mui/icons-material/Edit&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">ClearIcon</span> <span class="kr">from</span> <span class="s2">&quot;@mui/icons-material/Clear&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">IconButton</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/IconButton&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">styles</span> <span class="kr">from</span> <span class="s2">&quot;./Category.module.css&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Category</span> <span class="kr">as</span> <span class="nx">CategoryModel</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../../types/Category&quot;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">Category</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Test 1&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Test 2&quot;</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">];</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;container&quot;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Listado</span> <span class="nx">de</span> <span class="nx">Categor√≠as</span><span class="o">&lt;</span><span class="err">/h1&gt;</span>
      <span class="o">&lt;</span><span class="nx">TableContainer</span> <span class="nx">component</span><span class="o">=</span><span class="p">{</span><span class="nx">Paper</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Table</span> <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span> <span class="nx">minWidth</span>: <span class="kt">650</span> <span class="p">}}</span> <span class="nx">aria</span><span class="o">-</span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;simple table&quot;</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">TableHead</span>
            <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span>
              <span class="s2">&quot;&amp; th&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">backgroundColor</span><span class="o">:</span> <span class="s2">&quot;lightgrey&quot;</span><span class="p">,</span>
              <span class="p">},</span>
            <span class="p">}}</span>
          <span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">TableRow</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span><span class="nx">Identificador</span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
              <span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span><span class="nx">Nombre</span> <span class="nx">categor√≠a</span><span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
              <span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;&lt;</span><span class="err">/TableCell&gt;</span>
            <span class="o">&lt;</span><span class="err">/TableRow&gt;</span>
          <span class="o">&lt;</span><span class="err">/TableHead&gt;</span>
          <span class="o">&lt;</span><span class="nx">TableBody</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">category</span>: <span class="kt">CategoryModel</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span>
              <span class="o">&lt;</span><span class="nx">TableRow</span>
                <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">category</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
                <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span> <span class="s2">&quot;&amp;:last-child td, &amp;:last-child th&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="nx">border</span>: <span class="kt">0</span> <span class="p">}</span> <span class="p">}}</span>
              <span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">TableCell</span> <span class="nx">component</span><span class="o">=</span><span class="s2">&quot;th&quot;</span> <span class="nx">scope</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
                  <span class="p">{</span><span class="nx">category</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
                <span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
                <span class="o">&lt;</span><span class="nx">TableCell</span> <span class="nx">component</span><span class="o">=</span><span class="s2">&quot;th&quot;</span> <span class="nx">scope</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
                  <span class="p">{</span><span class="nx">category</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
                <span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
                <span class="o">&lt;</span><span class="nx">TableCell</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">tableActions</span><span class="p">}</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="nx">IconButton</span> <span class="nx">aria</span><span class="o">-</span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;update&quot;</span> <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="o">&gt;</span>
                      <span class="o">&lt;</span><span class="nx">EditIcon</span> <span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="err">/IconButton&gt;</span>
                    <span class="o">&lt;</span><span class="nx">IconButton</span> <span class="nx">aria</span><span class="o">-</span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span> <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;error&quot;</span><span class="o">&gt;</span>
                      <span class="o">&lt;</span><span class="nx">ClearIcon</span> <span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="err">/IconButton&gt;</span>
                  <span class="o">&lt;</span><span class="err">/div&gt;</span>
                <span class="o">&lt;</span><span class="err">/TableCell&gt;</span>
              <span class="o">&lt;</span><span class="err">/TableRow&gt;</span>
            <span class="p">))}</span>
          <span class="o">&lt;</span><span class="err">/TableBody&gt;</span>
        <span class="o">&lt;</span><span class="err">/Table&gt;</span>
      <span class="o">&lt;</span><span class="err">/TableContainer&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;newButton&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span><span class="o">&gt;</span><span class="nx">Nueva</span> <span class="nx">categor√≠a</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
De momento vamos a usar un listado mockeado para mostrar nuestras categorias. El c√≥digo JSX esta sacado pr√°cticamente en su totalidad del ejemplo de una tabla de Mui y solo hemos modificado el nombre del array que tenemos que recorrer, sus atributos y hemos a√±adido unos botones de acci√≥n para editar y borrar autores que de momento no hacen nada.</p>
<p>Si abrimos un navegador (con el servidor arrancado npm run dev) y vamos a http://localhost:5173/categories podremos ver nuestro listado con los datos mockeados.</p>
<p>Ahora vamos a crear un componente que se mostrar√° cuando pulsemos el bot√≥n de nueva categor√≠a. En la carpeta <code>src/pages/category</code> vamos a crear una nueva carpeta llamada <code>components</code> y dentro de esta crearemos un nuevo fichero llamado <code>CreateCategory.tsx</code> que tendr√° el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;react&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Button</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Button&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">TextField</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/TextField&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Dialog</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Dialog&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">DialogActions</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/DialogActions&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">DialogContent</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/DialogContent&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">DialogTitle</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/DialogTitle&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Category</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../../../types/Category&quot;</span><span class="p">;</span>

<span class="kd">interface</span> <span class="nx">Props</span> <span class="p">{</span>
  <span class="nx">category</span>: <span class="kt">Category</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nx">closeModal</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="ow">void</span><span class="p">;</span>
  <span class="nx">create</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="ow">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">CreateCategory</span><span class="p">(</span><span class="nx">props</span>: <span class="kt">Props</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">setName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">props</span><span class="o">?</span><span class="p">.</span><span class="nx">category</span><span class="o">?</span><span class="p">.</span><span class="nx">name</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Dialog</span> <span class="nx">open</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span> <span class="nx">onClose</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">closeModal</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">DialogTitle</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">category</span> <span class="o">?</span> <span class="s2">&quot;Actualizar Categor√≠a&quot;</span> <span class="o">:</span> <span class="s2">&quot;Crear Categor√≠a&quot;</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="err">/DialogTitle&gt;</span>
        <span class="o">&lt;</span><span class="nx">DialogContent</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">category</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">TextField</span>
              <span class="nx">margin</span><span class="o">=</span><span class="s2">&quot;dense&quot;</span>
              <span class="nx">disabled</span>
              <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;id&quot;</span>
              <span class="nx">label</span><span class="o">=</span><span class="s2">&quot;Id&quot;</span>
              <span class="nx">fullWidth</span>
              <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">category</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
              <span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;standard&quot;</span>
            <span class="o">/&gt;</span>
          <span class="p">)}</span>
          <span class="o">&lt;</span><span class="nx">TextField</span>
            <span class="nx">margin</span><span class="o">=</span><span class="s2">&quot;dense&quot;</span>
            <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;name&quot;</span>
            <span class="nx">label</span><span class="o">=</span><span class="s2">&quot;Nombre&quot;</span>
            <span class="nx">fullWidth</span>
            <span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;standard&quot;</span>
            <span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">setName</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
            <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">name</span><span class="p">}</span>
          <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="err">/DialogContent&gt;</span>
        <span class="o">&lt;</span><span class="nx">DialogActions</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">closeModal</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Cancelar</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
          <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">props</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">name</span><span class="p">)}</span> <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">name</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">category</span> <span class="o">?</span> <span class="s2">&quot;Actualizar&quot;</span> <span class="o">:</span> <span class="s2">&quot;Crear&quot;</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="err">/Button&gt;</span>
        <span class="o">&lt;</span><span class="err">/DialogActions&gt;</span>
      <span class="o">&lt;</span><span class="err">/Dialog&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Para este componente hemos definido una categor√≠a como par√°metro de entrada para poder reutilizar el componente en el caso de una edici√≥n y poder pasar la categor√≠a a editar, en nuestro caso inicial al ser un alta esta categor√≠a tendr√° el valor <code>null</code>. Tambi√©n hemos definido dos funciones en los par√°metros de entrada para controlar o bien el cerrado del modal o bien la creaci√≥n de un autor.</p>
<p>Esta es la forma directa que tienen de comunicaci√≥n los componentes padre/hijo en React, el padre puede pasar datos de lectura o funciones a sus componentes hijos a las que estos llamaran para comunicarse con √©l.</p>
<p>As√≠ en nuestro ejemplo el componente <code>CreateCategory</code> llamar√° a la funci√≥n <code>create</code> a la que pasar√° un nuevo objecto <code>Category</code> y ser√° el padre (nuestra p√°gina <code>Category</code>) el que decidir√° qu√© hacer con esos datos al igual que ocurre con los eventos en los tags de html.</p>
<p>En el estado de nuestro componente solo vamos a almacenar los datos introducidos en el formulario, en el caso de una edici√≥n el valor inicial del nombre de la categor√≠a ser√° el que venga de entrada. </p>
<p>Adem√°s introducido unas expresiones que modificar√°n la visualizaci√≥n del componente (titulo, id, texto de los botones, ‚Ä¶) dependiendo de si tenemos un autor de entrada o no.</p>
<p>Ahora tenemos que a√±adir nuestro nuevo componente en nuestra p√°gina Category:</p>
<p>Importamos el componente:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="nx">CreateCategory</span> <span class="kr">from</span> <span class="s2">&quot;./components/CreateCategory&quot;</span><span class="p">;</span>
</code></pre></div>
<p>Creamos las funciones que le pasaremos al componente, dej√°ndolas de momento vac√≠as:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">createCategory</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>

  <span class="p">}</span>

  <span class="kd">const</span> <span class="nx">handleCloseCreate</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>

  <span class="p">}</span>
</code></pre></div>
<p>Y a√±adimos en el c√≥digo JSX lo siguiente tras nuestro <code>button</code>:</p>
<div class="highlight"><pre><span></span><code>      <span class="o">&lt;</span><span class="nx">CreateCategory</span>
          <span class="nx">create</span><span class="o">=</span><span class="p">{</span><span class="nx">createCategory</span><span class="p">}</span>
          <span class="nx">category</span><span class="o">=</span><span class="p">{</span><span class="kc">null</span><span class="p">}</span>
          <span class="nx">closeModal</span><span class="o">=</span><span class="p">{</span><span class="nx">handleCloseCreate</span><span class="p">}</span>
        <span class="o">/&gt;</span>
</code></pre></div>
<p>Si ahora vamos a nuestro navegador, a la p√°gina de categor√≠as, podremos ver el formulario para crear una categor√≠a, pero √©sta fijo y no hay manera de cerrarlo. Vamos a cambiar este comportamiento mediante una variable booleana en el estado del componente que decidir√° cuando se muestra este. Adem√°s, a√±adiremos a nuestro bot√≥n el c√≥digo necesario para mostrar el componente y a√±adiremos a la funci√≥n <code>handleCloseCreate</code> el c√≥digo para ocultarlo.</p>
<p>A√±adimos un nuevo estado:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="p">[</span><span class="nx">openCreate</span><span class="p">,</span> <span class="nx">setOpenCreate</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</code></pre></div>
<p>Modificamos la function <code>handleCloseCreate</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">handleCloseCreate</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">setOpenCreate</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">};</span>
</code></pre></div>
<p>Y por √∫ltimo modificamos el c√≥digo del return de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code>      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;newButton&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">variant</span><span class="o">=</span><span class="s2">&quot;contained&quot;</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setOpenCreate</span><span class="p">(</span><span class="kc">true</span><span class="p">)}</span><span class="o">&gt;</span>
          <span class="nx">Nueva</span> <span class="nx">categor√≠a</span>
        <span class="o">&lt;</span><span class="err">/Button&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
      <span class="p">{</span><span class="nx">openCreate</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">CreateCategory</span>
          <span class="nx">create</span><span class="o">=</span><span class="p">{</span><span class="nx">createCategory</span><span class="p">}</span>
          <span class="nx">category</span><span class="o">=</span><span class="p">{</span><span class="kc">null</span><span class="p">}</span>
          <span class="nx">closeModal</span><span class="o">=</span><span class="p">{</span><span class="nx">handleCloseCreate</span><span class="p">}</span>
        <span class="o">/&gt;</span>
      <span class="p">)}</span>
</code></pre></div>
<p>Si probamos ahora vemos que ya se realiza la funcionalidad de abrir y cerrar nuestro formulario de manera correcta.</p>
<p>Ahora vamos a a√±adir la funcionalidad para que al pulsar el bot√≥n de edici√≥n pasemos la categor√≠a a editar a nuestro formulario. Para esto vamos a necesitar una nueva variable en nuestro estado donde almacenaremos la categor√≠a a editar:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="p">[</span><span class="nx">categoryToUpdate</span><span class="p">,</span> <span class="nx">setCategoryToUpdate</span><span class="p">]</span> <span class="o">=</span>
    <span class="nx">useState</span><span class="o">&lt;</span><span class="nx">CategoryModel</span> <span class="o">|</span> <span class="kc">null</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</code></pre></div>
<p>Modificamos el c√≥digo de nuestro bot√≥n: </p>
<div class="highlight"><pre><span></span><code>                    <span class="o">&lt;</span><span class="nx">IconButton</span>
                      <span class="nx">aria</span><span class="o">-</span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;update&quot;</span>
                      <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span>
                      <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="p">{</span>
                        <span class="nx">setCategoryToUpdate</span><span class="p">(</span><span class="nx">category</span><span class="p">);</span>
                        <span class="nx">setOpenCreate</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
                      <span class="p">}}</span>
                    <span class="o">&gt;</span>
                      <span class="o">&lt;</span><span class="nx">EditIcon</span> <span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="err">/IconButton&gt;</span>
</code></pre></div>
<p>Y la entrada a nuestro componente:</p>
<div class="highlight"><pre><span></span><code>      <span class="p">{</span><span class="nx">openCreate</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">CreateCategory</span>
          <span class="nx">create</span><span class="o">=</span><span class="p">{</span><span class="nx">createCategory</span><span class="p">}</span>
          <span class="nx">category</span><span class="o">=</span><span class="p">{</span><span class="nx">categoryToUpdate</span><span class="p">}</span>
          <span class="nx">closeModal</span><span class="o">=</span><span class="p">{</span><span class="nx">handleCloseCreate</span><span class="p">}</span>
        <span class="o">/&gt;</span>
      <span class="p">)}</span>
</code></pre></div>
<p>Si ahora hacemos una prueba en nuestro navegador y pulsamos el bot√≥n de editar vemos como nuestro formulario ya se carga correctamente pero hay un problema, si pulsamos el bot√≥n de editar, cerramos el formulario y le damos al boton de nueva categor√≠a vemos que el formulario mantiene los datos anteriores. Vamos a solucionar este problema volviendo a dejar vacia la variable <code>categoryToUpdate</code> cuando se cierre el componente:</p>
<p>Modificamos la funci√≥n <code>handleCloseCreate</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">handleCloseCreate</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">setOpenCreate</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="nx">setCategoryToUpdate</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">};</span>
</code></pre></div>
<p>Y vemos que el funcionamiento ya es el correcto.</p>
<p>Ahora vamos a darle funcionalidad al bot√≥n de borrado. Cuando pulsemos sobre este bot√≥n se nos debe mostrar un mensaje de alerta para confirmar nuestra decisi√≥n. Como este es un mensaje que vamos a reutilizar en el resto de la aplicaci√≥n vamos a crear un componente en la carpeta <code>src/components</code> llamado <code>ConfirmDialog.tsx</code> con el siguiente contenido: </p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="nx">Button</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Button&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">DialogContentText</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/DialogContentText&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Dialog</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Dialog&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">DialogActions</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/DialogActions&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">DialogContent</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/DialogContent&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">DialogTitle</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/DialogTitle&quot;</span><span class="p">;</span>

<span class="kd">interface</span> <span class="nx">Props</span> <span class="p">{</span>
  <span class="nx">closeModal</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="ow">void</span><span class="p">;</span>
  <span class="nx">confirm</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="ow">void</span><span class="p">;</span>
  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
  <span class="nx">text</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">ConfirmDialog</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span>: <span class="kt">Props</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Dialog</span> <span class="nx">open</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span> <span class="nx">onClose</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">closeModal</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">DialogTitle</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/DialogTitle&gt;</span>
        <span class="o">&lt;</span><span class="nx">DialogContent</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">DialogContentText</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/DialogContentText&gt;</span>
        <span class="o">&lt;</span><span class="err">/DialogContent&gt;</span>
        <span class="o">&lt;</span><span class="nx">DialogActions</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">closeModal</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Cancelar</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
          <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">props</span><span class="p">.</span><span class="nx">confirm</span><span class="p">()}</span><span class="o">&gt;</span><span class="nx">Confirmar</span><span class="o">&lt;</span><span class="err">/Button&gt;</span>
        <span class="o">&lt;</span><span class="err">/DialogActions&gt;</span>
      <span class="o">&lt;</span><span class="err">/Dialog&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<p>Y vamos a a√±adirlo a nuestra p√°gina de categorias, pero al igual que paso con nuestro formulario de altas no queremos que este componente se muestre siempre, sino que estar√° condicionado al valor de una nueva variable en nuestro estado. En este caso vamos a almacenar el id de la categor√≠a a borrar. </p>
<p>Importamos nuestro nuevo componente:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ConfirmDialog</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../../components/ConfirmDialog&quot;</span><span class="p">;</span>
</code></pre></div>
<p>Creamos una nueva variable en el estado:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="p">[</span><span class="nx">idToDelete</span><span class="p">,</span> <span class="nx">setIdToDelete</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
</code></pre></div>
<p>Creamos una nueva funci√≥n:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">deleteCategory</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{};</span>
</code></pre></div>
<p>Modificamos el bot√≥n de borrado:</p>
<div class="highlight"><pre><span></span><code>                      <span class="o">&lt;</span><span class="nx">IconButton</span>
                        <span class="nx">aria</span><span class="o">-</span><span class="nx">label</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span>
                        <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;error&quot;</span>
                        <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="p">{</span>
                          <span class="nx">setIdToDelete</span><span class="p">(</span><span class="nx">category</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
                        <span class="p">}}</span>
                      <span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="nx">ClearIcon</span> <span class="o">/&gt;</span>
                      <span class="o">&lt;</span><span class="err">/IconButton&gt;</span>
</code></pre></div>
<p>Y a√±adimos el c√≥digo necesario en nuestro return para incluir el nuevo componente:</p>
<div class="highlight"><pre><span></span><code>      <span class="p">{</span><span class="o">!!</span><span class="nx">idToDelete</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">ConfirmDialog</span>
          <span class="nx">title</span><span class="o">=</span><span class="s2">&quot;Eliminar categor√≠a&quot;</span>
          <span class="nx">text</span><span class="o">=</span><span class="s2">&quot;Atenci√≥n si borra la categor√≠a se perder√°n sus datos. ¬øDesea eliminar la categor√≠a?&quot;</span>
          <span class="nx">confirm</span><span class="o">=</span><span class="p">{</span><span class="nx">deleteCategory</span><span class="p">}</span>
          <span class="nx">closeModal</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="nx">setIdToDelete</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)}</span>
        <span class="o">/&gt;</span>
      <span class="p">)}</span>
</code></pre></div>
<h2 id="recuperando-datos">Recuperando datos</h2>
<p>Ya estamos preparados para llamar a nuestro back. Hay muchas maneras de recuperar datos del back en React. Si no queremos usar ninguna librer√≠a externa podemos hacer uso del m√©todo fetch, pero tendr√≠amos que repetir mucho c√≥digo o bien construir interceptores, para el manejo de errores, construcci√≥n de middlewares,‚Ä¶ adem√°s, no es lo mas utilizado. Hoy en d√≠a se opta por librer√≠as como <code>Axios</code> o <code>Redux Toolkit query</code> que facilitan el uso de este m√©todo.</p>
<p>Nosotros vamos a utilizar una herramienta de redux llamada <code>Redux Toolkit Query</code>, pero primero vamos a explicar que es redux.</p>
<h1 id="redux">Redux</h1>
<p>Redux es una librer√≠a que implementa el patr√≥n de dise√±o Flux y que nos permite crear un estado global. </p>
<p>Nuestros componentes pueden realizar acciones asociadas a un reducer que modificar√°n este estado global llamado generalmente <code>store</code> y a su vez estar√°n subscritos a variables de este estado para estar atentos a posibles cambios.</p>
<p><img alt="redux" src="../../../assets/images/redux.png" /></p>
<p>Antes se sol√≠an construir ficheros de actions, de reducers y un fichero de store, pero con redux toolkit se ha simplificado todo. Por un lado, podemos tener slices, que son ficheros que agrupan acciones, reducers y parte del estado y por otro lado podemos tener servicios donde declaramos llamadas a nuestra api y redux guarda las llamadas en nuestro estado global para que sean accesibles desde cualquier parte de nuestra aplicaci√≥n.</p>
<p>Vamos a crear una carpeta llamada <code>redux</code> dentro de la carpeta <code>src</code> y a su vez dentro de <code>src/redux</code> vamos a crear dos carpetas: <code>features</code> donde crearemos nuestros slices y <code>services</code> donde crearemos las llamadas al api.</p>
<p>Dentro de la carpeta <code>services</code> vamos a crear un fichero llamado <code>ludotecaApi.ts</code> con el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">createApi</span><span class="p">,</span> <span class="nx">fetchBaseQuery</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;@reduxjs/toolkit/query/react&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Category</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../../types/Category&quot;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">ludotecaAPI</span> <span class="o">=</span> <span class="nx">createApi</span><span class="p">({</span>
  <span class="nx">reducerPath</span><span class="o">:</span> <span class="s2">&quot;ludotecaApi&quot;</span><span class="p">,</span>
  <span class="nx">baseQuery</span>: <span class="kt">fetchBaseQuery</span><span class="p">({</span>
    <span class="nx">baseUrl</span><span class="o">:</span> <span class="s2">&quot;http://localhost:8080&quot;</span><span class="p">,</span>
  <span class="p">}),</span>
  <span class="nx">tagTypes</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">],</span>
  <span class="nx">endpoints</span><span class="o">:</span> <span class="p">(</span><span class="nx">builder</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
    <span class="nx">getCategories</span>: <span class="kt">builder.query</span><span class="o">&lt;</span><span class="nx">Category</span><span class="p">[],</span> <span class="kc">null</span><span class="o">&gt;</span><span class="p">({</span>
      <span class="nx">query</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="s2">&quot;category&quot;</span><span class="p">,</span>
      <span class="nx">providesTags</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">],</span>
    <span class="p">}),</span>
    <span class="nx">createCategory</span>: <span class="kt">builder.mutation</span><span class="p">({</span>
      <span class="nx">query</span><span class="o">:</span> <span class="p">(</span><span class="nx">payload</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/category&quot;</span><span class="p">,</span>
        <span class="nx">method</span><span class="o">:</span> <span class="s2">&quot;PUT&quot;</span><span class="p">,</span>
        <span class="nx">body</span>: <span class="kt">payload</span><span class="p">,</span>
        <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;Content-type&quot;</span><span class="o">:</span> <span class="s2">&quot;application/json; charset=UTF-8&quot;</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">}),</span>
      <span class="nx">invalidatesTags</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">],</span>
    <span class="p">}),</span>
    <span class="nx">deleteCategory</span>: <span class="kt">builder.mutation</span><span class="p">({</span>
      <span class="nx">query</span><span class="o">:</span> <span class="p">(</span><span class="nx">id</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
        <span class="nx">url</span><span class="o">:</span> <span class="sb">`/category/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
        <span class="nx">method</span><span class="o">:</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">,</span>
      <span class="p">}),</span>
      <span class="nx">invalidatesTags</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">],</span>
    <span class="p">}),</span>
    <span class="nx">updateCategory</span>: <span class="kt">builder.mutation</span><span class="p">({</span>
      <span class="nx">query</span><span class="o">:</span> <span class="p">(</span><span class="nx">payload</span>: <span class="kt">Category</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
        <span class="nx">url</span><span class="o">:</span> <span class="sb">`category/</span><span class="si">${</span><span class="nx">payload</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
        <span class="nx">method</span><span class="o">:</span> <span class="s2">&quot;PUT&quot;</span><span class="p">,</span>
        <span class="nx">body</span>: <span class="kt">payload</span><span class="p">,</span>
      <span class="p">}),</span>
      <span class="nx">invalidatesTags</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;Category&quot;</span><span class="p">],</span>
    <span class="p">}),</span>
  <span class="p">}),</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">const</span> <span class="p">{</span>
    <span class="nx">useGetCategoriesQuery</span><span class="p">,</span>
    <span class="nx">useCreateCategoryMutation</span><span class="p">,</span>
    <span class="nx">useDeleteCategoryMutation</span><span class="p">,</span>
    <span class="nx">useUpdateCategoryMutation</span>
<span class="p">}</span> <span class="o">=</span> <span class="nx">ludotecaAPI</span><span class="p">;</span>
</code></pre></div>
<p>Con esto ya habr√≠amos creado las acciones que llaman al back y almacenan el resultado en nuestro estado. Para configurar nuestra api le tenemos que dar un nombre, una url base, una series de tags y nuestros endpoints que pueden ser de tipo query para realizar consultas o <code>mutation</code>. Tambi√©n exportamos los hooks que nos van a permitir hacer uso de estos endpoints. Si los endpoints los creamos de tipo <code>query</code>, cuando hacemos uso de estos hooks se realizar√° una consulta al back y recibiremos los datos de la consulta en nuestros par√°metros del hook entre otras cosas. Si los creamos de tipo <code>mutation</code> lo que nos devolver√° el hook ser√° la acci√≥n que tenemos que llamar para realizar esta llamada.</p>
<p>Los tags sirven para cachear el resultado, pero cuando llamamos a una <code>mutation</code> y pasamos informaci√≥n en <code>invalidateTags</code>, esto va a hacer que se vuelva a lanzar la query afectada por estos tags para actualizar su resultado, por eso hemos a√±adido el <code>providesTags</code> en la query, para que desde nuestras p√°ginas usemos los hooks exportados.</p>
<p>Ahora vamos a crear dentro de la carpeta <code>src/redux</code> un fichero llamado <code>store.ts</code> con el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">configureStore</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;@reduxjs/toolkit&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">setupListeners</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;@reduxjs/toolkit/dist/query&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ludotecaAPI</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./services/ludotecaApi&quot;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">configureStore</span><span class="p">({</span>
  <span class="nx">reducer</span><span class="o">:</span> <span class="p">{</span>
    <span class="p">[</span><span class="nx">ludotecaAPI</span><span class="p">.</span><span class="nx">reducerPath</span><span class="p">]</span><span class="o">:</span> <span class="nx">ludotecaAPI</span><span class="p">.</span><span class="nx">reducer</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">middleware</span><span class="o">:</span> <span class="p">(</span><span class="nx">getDefaultMiddleware</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="nx">getDefaultMiddleware</span><span class="p">().</span><span class="nx">concat</span><span class="p">([</span><span class="nx">ludotecaAPI</span><span class="p">.</span><span class="nx">middleware</span><span class="p">]),</span>
<span class="p">});</span>

<span class="nx">setupListeners</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">);</span>

<span class="c1">// Infer the `RootState` and `AppDispatch` types from the store itself</span>
<span class="k">export</span> <span class="kr">type</span> <span class="nx">RootState</span> <span class="o">=</span> <span class="nx">ReturnType</span><span class="o">&lt;</span><span class="ow">typeof</span> <span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="o">&gt;</span><span class="p">;</span>
<span class="c1">// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}</span>
<span class="k">export</span> <span class="kr">type</span> <span class="nx">AppDispatch</span> <span class="o">=</span> <span class="ow">typeof</span> <span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">;</span>
</code></pre></div>
<p>Aqu√≠ b√°sicamente creamos el store con nuestro <code>reducer</code>. Cabe destacar que podemos crear tantos <code>reducers</code> como queramos siempre que les demos distintos nombres.</p>
<p>Ahora ya podr√≠amos hacer uso de los hooks que vienen con redux llamados <code>useDispatch</code> para llamar a nuestras actions y <code>useSelect</code> para suscribirnos a los cambios en el estado, pero como estamos usando typescript tendr√≠amos que tipar todos estos m√©todos y variables que usamos en todos nuestros componentes resultando un c√≥digo un tanto sucio y repetitivo. Tambi√©n podemos simplemente ignorar a typescript y deshabilitar las reglas para estos ficheros, pero vamos a hacerlo bien.</p>
<p>Vamos a crear un fichero llamado <code>hooks.ts</code> dentro de la carpeta de redux y su contenido ser√° el siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span>  <span class="nx">useDispatch</span><span class="p">,</span> <span class="nx">useSelector</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react-redux&#39;</span>
<span class="k">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">TypedUseSelectorHook</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;react-redux&#39;</span>
<span class="k">import</span> <span class="kr">type</span> <span class="p">{</span> <span class="nx">RootState</span><span class="p">,</span> <span class="nx">AppDispatch</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;./store&#39;</span>

<span class="c1">// Use throughout your app instead of plain `useDispatch` and `useSelector`</span>
<span class="kr">type</span> <span class="nx">DispatchFunc</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">AppDispatch</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">useAppDispatch</span>: <span class="kt">DispatchFunc</span> <span class="o">=</span> <span class="nx">useDispatch</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">useAppSelector</span>: <span class="kt">TypedUseSelectorHook</span><span class="o">&lt;</span><span class="nx">RootState</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">useSelector</span>
</code></pre></div>
<p>Estos ser√°n los m√©todos que usaremos en lugar de <code>useDispatch</code> y <code>useSelector</code>.</p>
<p>Ahora vamos a modificar nuestro fichero <code>App.tsx</code> a√±adiendo los imports necesarios y rodeando nuestro c√≥digo con el tag <code>provider</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Provider</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;react-redux&quot;</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">store</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./redux/store&quot;</span><span class="p">;</span>

    <span class="o">&lt;</span><span class="nx">Provider</span> <span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">store</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Routes</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Layout</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">index</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;games&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Game</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;categories&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Category</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;authors&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Author</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;*&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Navigate</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/games&quot;</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
          <span class="o">&lt;</span><span class="err">/Route&gt;</span>
        <span class="o">&lt;</span><span class="err">/Routes&gt;</span>
      <span class="o">&lt;</span><span class="err">/BrowserRouter&gt;</span>
    <span class="o">&lt;</span><span class="err">/Provider&gt;</span>
</code></pre></div>
<p>Ahora ya podemos hacer uso de los m√©todos de <code>redux</code> para modificar y leer el estado global de nuestra aplicaci√≥n.</p>
<p>Volvemos a nuestro componente <code>Category</code> y vamos a importar los hooks de nuestra api para hacer uso de ellos:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useAppDispatch</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../../redux/hooks&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">useCreateCategoryMutation</span><span class="p">,</span>
  <span class="nx">useDeleteCategoryMutation</span><span class="p">,</span>
  <span class="nx">useGetCategoriesQuery</span><span class="p">,</span>
  <span class="nx">useUpdateCategoryMutation</span><span class="p">,</span>
<span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../../redux/services/ludotecaApi&quot;</span><span class="p">;</span>
</code></pre></div>
<p>Eliminamos la variable mockeada data y a√±adimos en su lugar lo siguiente:
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">useAppDispatch</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">isLoading</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useGetCategoriesQuery</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="kd">const</span> <span class="p">[</span>
    <span class="nx">deleteCategoryApi</span><span class="p">,</span>
    <span class="p">{</span> <span class="nx">isLoading</span>: <span class="kt">isLoadingDelete</span><span class="p">,</span> <span class="nx">error</span>: <span class="kt">errorDelete</span> <span class="p">},</span>
  <span class="p">]</span> <span class="o">=</span> <span class="nx">useDeleteCategoryMutation</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">createCategoryApi</span><span class="p">,</span> <span class="p">{</span> <span class="nx">isLoading</span>: <span class="kt">isLoadingCreate</span> <span class="p">}]</span> <span class="o">=</span>
    <span class="nx">useCreateCategoryMutation</span><span class="p">();</span>

  <span class="kd">const</span> <span class="p">[</span><span class="nx">updateCategoryApi</span><span class="p">,</span> <span class="p">{</span> <span class="nx">isLoading</span>: <span class="kt">isLoadingUpdate</span> <span class="p">}]</span> <span class="o">=</span>
    <span class="nx">useUpdateCategoryMutation</span><span class="p">();</span>
</code></pre></div></p>
<p>Como ya hemos dicho anteriormente, los <code>hooks</code> de la api de tipo query nos devolver√°n datos mientras que los <code>hooks</code> de tipo <code>mutation</code> nos devuelven acciones que podemos lanzar con el m√©todo <code>dispatch</code>. El resto de los par√°metros nos dan informaci√≥n para saber el estado de la llamada, por ejemplo, para saber si esta cargando, si se ha producido un error, etc‚Ä¶</p>
<p>Tenemos que modificar el c√≥digo que recorre data ya que este valor ahora puede estar sin definir:</p>
<div class="highlight"><pre><span></span><code>        <span class="o">&lt;</span><span class="nx">TableBody</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">data</span> <span class="o">&amp;&amp;</span>
              <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">category</span>: <span class="kt">CategoryModel</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">(</span>
</code></pre></div>
<p>Y ahora si tenemos datos en la base de datos y vamos a nuestro navegador podemos ver que ya se est√°n representando estos datos en la tabla de categor√≠as.</p>
<p>Modificamos el m√©todo <code>createCategory</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">createCategory</span> <span class="o">=</span> <span class="p">(</span><span class="nx">category</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">setOpenCreate</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">categoryToUpdate</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">updateCategoryApi</span><span class="p">({</span> <span class="nx">id</span>: <span class="kt">categoryToUpdate.id</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">category</span> <span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="nx">setCategoryToUpdate</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">createCategoryApi</span><span class="p">({</span> <span class="nx">name</span>: <span class="kt">category</span> <span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="nx">setCategoryToUpdate</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">};</span>
</code></pre></div>
<p>Si tenemos almacenada alguna categor√≠a para actualizar llamaremos a la acci√≥n para actualizar la categor√≠a que recuperamos del hook y si no tenemos categor√≠a almacenada llamaremos al m√©todo para crear una categor√≠a nueva. Estos m√©todos nos devuelven una promesa que cuando resolvemos volvemos a poner el valor de la categor√≠a a actualizar a <code>null</code>.</p>
<p>Implementamos el m√©todo para borrar categor√≠as:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">deleteCategory</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">deleteCategoryApi</span><span class="p">(</span><span class="nx">idToDelete</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> 
      <span class="nx">setIdToDelete</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
  <span class="p">};</span>
</code></pre></div>
<p>Ahora si probamos en nuestro navegador ya podremos realizar todas las funciones de la p√°gina: listar, crear, actualizar y borrar, pero aun vamos a darle m√°s funcionalidad. </p>
<p>Vamos a crear una variable en el estado global de nuestra aplicaci√≥n para mostrar alertas de informaci√≥n o de error. Para ello creamos un nuevo fichero en la carpeta <code>src/redux/features</code> llamado <code>messageSlice.ts</code> cuyo contenido ser√° el siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">createSlice</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@reduxjs/toolkit&#39;</span>
<span class="k">import</span> <span class="kr">type</span> <span class="p">{</span><span class="nx">PayloadAction</span><span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;@reduxjs/toolkit&quot;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">messageSlice</span> <span class="o">=</span> <span class="nx">createSlice</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;message&#39;</span><span class="p">,</span>
  <span class="nx">initialState</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">text</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="kr">type</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
  <span class="p">},</span>
  <span class="nx">reducers</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">deleteMessage</span><span class="o">:</span> <span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">state</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="nx">state</span><span class="p">.</span><span class="kr">type</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="p">},</span>
    <span class="nx">setMessage</span><span class="o">:</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span> : <span class="kt">PayloadAction</span><span class="o">&lt;</span><span class="p">{</span><span class="nx">text</span>: <span class="kt">string</span><span class="p">;</span> <span class="kr">type</span><span class="o">:</span> <span class="kt">string</span><span class="p">}</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">state</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
        <span class="nx">state</span><span class="p">.</span><span class="kr">type</span> <span class="o">=</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="kr">type</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">})</span>

<span class="k">export</span> <span class="kd">const</span> <span class="p">{</span> <span class="nx">deleteMessage</span><span class="p">,</span> <span class="nx">setMessage</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">messageSlice</span><span class="p">.</span><span class="nx">actions</span><span class="p">;</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">messageSlice</span><span class="p">.</span><span class="nx">reducer</span><span class="p">;</span>
</code></pre></div>
<p>Como ya hemos dicho anteriormente los <code>slices</code> son un concepto introducido en <code>Redux Toolkit</code> y no es ni m√°s ni menos que un fichero que agrupa <code>reducers</code>, <code>actions</code> y <code>selectors</code>.</p>
<p>En este fichero declaramos el nombre del selector (<code>message</code>) para despu√©s poder recuperar los datos en un componente, declaramos el estado inicial de nuestro <code>slice</code>, creamos las funciones de los <code>reducers</code> y declaramos dos acciones.</p>
<p>Los <code>reducers</code> son funciones puras que modifican el estado, en nuestro caso utilizamos un <code>reducer</code> para resetear el estado y otro para setear el texto y el tipo de mensaje. Con <code>Redux Toolkit</code> podemos acceder directamente al estado dentro de nuestros <code>reducers</code>. En los <code>reducers</code> que no usan esta herramienta lo que se hace es devolver un objeto que ser√° el nuevo estado.</p>
<p>Las acciones son las que invocan a los <code>reducers</code>. Estas solo dicen que hacer, pero no como hacerlo. Con <code>Redux Toolkit</code> las acciones se generan autom√°ticamente y solo tenemos que hacer un destructuring del objecto actions de nuestro <code>slice</code> para recuperarlas y exportarlas.</p>
<p>Ahora vamos a modificar el fichero <code>src/redux/store.ts</code> para a√±adir el nuevo <code>reducer</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">configureStore</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;@reduxjs/toolkit&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">setupListeners</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;@reduxjs/toolkit/dist/query&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ludotecaAPI</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./services/ludotecaApi&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">messageReducer</span> <span class="kr">from</span> <span class="s2">&quot;./features/messageSlice&quot;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">store</span> <span class="o">=</span> <span class="nx">configureStore</span><span class="p">({</span>
  <span class="nx">reducer</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">messageReducer</span><span class="p">,</span>
    <span class="p">[</span><span class="nx">ludotecaAPI</span><span class="p">.</span><span class="nx">reducerPath</span><span class="p">]</span><span class="o">:</span> <span class="nx">ludotecaAPI</span><span class="p">.</span><span class="nx">reducer</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">middleware</span><span class="o">:</span> <span class="p">(</span><span class="nx">getDefaultMiddleware</span><span class="p">)</span> <span class="p">=&gt;</span>
    <span class="nx">getDefaultMiddleware</span><span class="p">().</span><span class="nx">concat</span><span class="p">([</span><span class="nx">ludotecaAPI</span><span class="p">.</span><span class="nx">middleware</span><span class="p">]),</span>
<span class="p">});</span>

<span class="nx">setupListeners</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">);</span>

<span class="c1">// Infer the `RootState` and `AppDispatch` types from the store itself</span>
<span class="k">export</span> <span class="kr">type</span> <span class="nx">RootState</span> <span class="o">=</span> <span class="nx">ReturnType</span><span class="o">&lt;</span><span class="ow">typeof</span> <span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="o">&gt;</span><span class="p">;</span>
<span class="c1">// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}</span>
<span class="k">export</span> <span class="kr">type</span> <span class="nx">AppDispatch</span> <span class="o">=</span> <span class="ow">typeof</span> <span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">;</span>
</code></pre></div>
<p>Con esto ya podemos hacer uso de esta funcionalidad. Vamos a modificar el componente Layout para que pueda recibir mensajes y mostrarlos por pantalla.</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="nx">Alert</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Alert&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useAppDispatch</span><span class="p">,</span> <span class="nx">useAppSelector</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../redux/hooks&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">deleteMessage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../redux/features/messageSlice&quot;</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">useAppDispatch</span><span class="p">();</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">text</span><span class="p">,</span> <span class="kr">type</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useAppSelector</span><span class="p">((</span><span class="nx">state</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">state</span><span class="p">.</span><span class="nx">messageReducer</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="nx">dispatch</span><span class="p">(</span><span class="nx">deleteMessage</span><span class="p">());</span>
    <span class="p">},</span> <span class="mf">3000</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">text</span><span class="p">,</span> <span class="kr">type</span><span class="p">]);</span>

      <span class="p">{</span><span class="nx">text</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">Alert</span> <span class="nx">severity</span><span class="o">=</span><span class="p">{</span><span class="kr">type</span> <span class="o">===</span> <span class="s2">&quot;error&quot;</span> <span class="o">?</span> <span class="s2">&quot;error&quot;</span> <span class="o">:</span> <span class="s2">&quot;success&quot;</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">text</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/Alert&gt;</span>
      <span class="p">)}</span>
</code></pre></div>
<p>Hemos a√±adido c√≥digo para que el componente <code>layout</code> este subscrito a las variables <code>text</code> y <code>type</code> de nuestro contexto global. Si tenemos <code>text</code> se mostrar√° la alerta y adem√°s hemos incluido un nuevo <code>hook</code> <code>useEffect</code> gracias al cual cuando el componente reciba un text llamar√° a una funci√≥n que pasados 3 segundos borrar√° el mensaje de nuestro estado ocultando as√≠ el <code>Alert</code>.</p>
<p>Pero antes de seguir adelante vamos a explicar que hace <code>useEffect</code> exactamente ya que es un <code>hook</code> de React muy utilizado.</p>
<h1 id="useeffect">useEffect</h1>
<p>El ciclo de vida de los componentes en React permit√≠a en los componentes de tipo clase poder ejecutar c√≥digo en diferentes fases de montaje, actualizaci√≥n y desmontaje. De esta forma, pod√≠amos a√±adir cierta funcionalidad en las distintas etapas de nuestro componente.</p>
<p>Con los <code>hooks</code> tambi√©n podremos acceder a ese ciclo de vida en nuestros componentes funcionales, aunque de una forma m√°s clara y sencilla. Para ello usaremos <code>useEffect</code>, un <code>hook</code> que recibe como par√°metro una funci√≥n que se ejecutar√° cada vez que se modifique el valor de las las dependencias que pasemos como segundo par√°metro.</p>
<p>Hay otros casos especiales de <code>useEffect</code>, por ejemplo, si hubi√©semos dejado el array de dependencias de <code>useEffect</code> vac√≠o, solo se llamar√≠a a la funci√≥n la primera vez que se renderiza el componente. </p>
<div class="highlight"><pre><span></span><code><span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">‚Äò</span><span class="nx">Solo</span> <span class="nx">me</span> <span class="nx">muestro</span> <span class="nx">en</span> <span class="nx">el</span> <span class="nx">primer</span> <span class="nx">render</span><span class="err">‚Äô</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>
</code></pre></div>
<p>Y si queremos que solo se llame a la funci√≥n cuando se desmonta el componente lo que tenemos que hacer es devolver de <code>useEffect</code> una funci√≥n con el c√≥digo que queremos que se ejecute una vez que se desmonte:</p>
<div class="highlight"><pre><span></span><code><span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="k">return</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">‚Äò</span><span class="nx">Me</span> <span class="nx">desmonto</span><span class="o">!!</span><span class="err">‚Äô</span><span class="p">)</span>
<span class="p">}</span>
  <span class="p">},</span> <span class="p">[]);</span>
</code></pre></div>
<p>Dentro de la carpeta <code>src/types</code> vamos a crear un fichero llamado <code>appTypes.ts</code> que contendr√° todos aquellos tipos o interfaces auxiliares para construir nuestra aplicaci√≥n:</p>
<div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">interface</span> <span class="nx">BackError</span> <span class="p">{</span>
  <span class="nx">msg</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Ahora ya podemos incluir en nuestra p√°gina de categor√≠as el c√≥digo para guardar los mensajes de informaci√≥n y error en el estado global, importamos lo necesario:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">setMessage</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../../redux/features/messageSlice&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BackError</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../../types/appTypes&quot;</span><span class="p">;</span>
</code></pre></div>
<p>A√±adimos:</p>
<div class="highlight"><pre><span></span><code><span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">errorDelete</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;status&quot;</span> <span class="ow">in</span> <span class="nx">errorDelete</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dispatch</span><span class="p">(</span>
          <span class="nx">setMessage</span><span class="p">({</span>
            <span class="nx">text</span><span class="o">:</span> <span class="p">(</span><span class="nx">errorDelete</span><span class="o">?</span><span class="p">.</span><span class="nx">data</span> <span class="kr">as</span> <span class="nx">BackError</span><span class="p">).</span><span class="nx">msg</span><span class="p">,</span>
            <span class="kr">type</span><span class="o">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
          <span class="p">})</span>
        <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">errorDelete</span><span class="p">,</span> <span class="nx">dispatch</span><span class="p">]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">dispatch</span><span class="p">(</span><span class="nx">setMessage</span><span class="p">({</span> <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;Se ha producido un error&quot;</span><span class="p">,</span> <span class="kr">type</span><span class="o">:</span> <span class="s2">&quot;error&quot;</span> <span class="p">}));</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">error</span><span class="p">]);</span>
</code></pre></div>
<p>Y modificamos:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">createCategory</span> <span class="o">=</span> <span class="p">(</span><span class="nx">category</span>: <span class="kt">string</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">setOpenCreate</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">categoryToUpdate</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">updateCategoryApi</span><span class="p">({</span> <span class="nx">id</span>: <span class="kt">categoryToUpdate.id</span><span class="p">,</span> <span class="nx">name</span>: <span class="kt">category</span> <span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="nx">dispatch</span><span class="p">(</span>
            <span class="nx">setMessage</span><span class="p">({</span>
              <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;Categor√≠a actualizada correctamente&quot;</span><span class="p">,</span>
              <span class="kr">type</span><span class="o">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span>
            <span class="p">})</span>
          <span class="p">);</span>
          <span class="nx">setCategoryToUpdate</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">createCategoryApi</span><span class="p">({</span> <span class="nx">name</span>: <span class="kt">category</span> <span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
          <span class="nx">dispatch</span><span class="p">(</span>
            <span class="nx">setMessage</span><span class="p">({</span> <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;Categor√≠a creada correctamente&quot;</span><span class="p">,</span> <span class="kr">type</span><span class="o">:</span> <span class="s2">&quot;ok&quot;</span> <span class="p">})</span>
          <span class="p">);</span>
          <span class="nx">setCategoryToUpdate</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">deleteCategory</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">deleteCategoryApi</span><span class="p">(</span><span class="nx">idToDelete</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">dispatch</span><span class="p">(</span>
          <span class="nx">setMessage</span><span class="p">({</span>
            <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;Categor√≠a borrada correctamente&quot;</span><span class="p">,</span>
            <span class="kr">type</span><span class="o">:</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span>
          <span class="p">})</span>
        <span class="p">);</span>
        <span class="nx">setIdToDelete</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
      <span class="p">})</span>
      <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>
  <span class="p">};</span>
</code></pre></div>
<p>Si ahora probamos nuestra aplicaci√≥n al borrar, actualizar o crear una categor√≠a nos deber√≠a de mostrar un mensaje de informaci√≥n.</p>
<p>Ya casi estamos terminando con nuestra p√°gina de categor√≠as, pero vamos a a√±adir tambi√©n un <code>loader</code> para cuando nuestra acciones est√©n en estado de <code>loading</code>. Para esto vamos a hacer uso de otra de las maneras que tiene React de almacenar informaci√≥n global, el contexto.</p>
<h1 id="context-api">Context API</h1>
<p>Una de las caracter√≠sticas que llegaron en las √∫ltimas versiones de React fue el contexto, una forma de pasar datos que pueden considerarse globales a un √°rbol de componentes sin la necesidad de utilizar <code>Redux</code>. El uso de contextos mediante la <code>Context API</code> es una soluci√≥n m√°s ligera y sencilla que redux y que no est√° mal para aplicaciones que no son excesivamente grandes.</p>
<p>En general cuando queramos usar estados globales que no sean demasiado grandes y no se haga demasiada escritura sobre ellos ser√° preferible usar <code>Context API</code> en lugar de <code>redux</code>.</p>
<p>Vamos a crear un contexto para utilizar un <code>loader</code> en nuestra aplicaci√≥n. </p>
<p>Lo primero ser√° crear una carpeta llamada <code>context</code> dentro de la carpeta <code>src</code> de nuestro proyecto y dentro de esta crearemos un nuevo fichero llamado <code>LoaderProvider.tsx</code> con el siguiente contenido:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">createContext</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;react&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Backdrop</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/Backdrop&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">CircularProgress</span> <span class="kr">from</span> <span class="s2">&quot;@mui/material/CircularProgress&quot;</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">LoaderContext</span> <span class="o">=</span> <span class="nx">createContext</span><span class="p">({</span>
  <span class="nx">loading</span>: <span class="kt">false</span><span class="p">,</span>
  <span class="nx">showLoading</span><span class="o">:</span> <span class="p">(</span><span class="nx">_show</span>: <span class="kt">boolean</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{},</span>
<span class="p">});</span>

<span class="kr">type</span> <span class="nx">Props</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">children</span>: <span class="kt">JSX.Element</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">LoaderProvider</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span> <span class="p">}</span><span class="o">:</span> <span class="nx">Props</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">showLoading</span> <span class="o">=</span> <span class="p">(</span><span class="nx">show</span>: <span class="kt">boolean</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">setState</span><span class="p">((</span><span class="nx">prev</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
      <span class="p">...</span><span class="nx">prev</span><span class="p">,</span>
      <span class="nx">loading</span>: <span class="kt">show</span><span class="p">,</span>
    <span class="p">}));</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">setState</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">({</span>
    <span class="nx">loading</span>: <span class="kt">false</span><span class="p">,</span>
    <span class="nx">showLoading</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">LoaderContext</span><span class="p">.</span><span class="nx">Provider</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Backdrop</span>
        <span class="nx">sx</span><span class="o">=</span><span class="p">{{</span> <span class="nx">color</span><span class="o">:</span> <span class="s2">&quot;#fff&quot;</span><span class="p">,</span> <span class="nx">zIndex</span><span class="o">:</span> <span class="p">(</span><span class="nx">theme</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">theme</span><span class="p">.</span><span class="nx">zIndex</span><span class="p">.</span><span class="nx">drawer</span> <span class="o">+</span> <span class="mf">1</span> <span class="p">}}</span>
        <span class="nx">open</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">.</span><span class="nx">loading</span><span class="p">}</span>
      <span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">CircularProgress</span> <span class="nx">color</span><span class="o">=</span><span class="s2">&quot;inherit&quot;</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="err">/Backdrop&gt;</span>

      <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="err">/LoaderContext.Provider&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div>
<p>Y ahora modificamos nuestro fichero <code>App.tsx</code> de la siguiente manera:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">LoaderProvider</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./context/LoaderProvider&quot;</span><span class="p">;</span>
    <span class="o">&lt;</span><span class="nx">LoaderProvider</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Provider</span> <span class="nx">store</span><span class="o">=</span><span class="p">{</span><span class="nx">store</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">BrowserRouter</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Routes</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Layout</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">index</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;games&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Game</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;categories&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Category</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;authors&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Author</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
              <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="s2">&quot;*&quot;</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Navigate</span> <span class="nx">to</span><span class="o">=</span><span class="s2">&quot;/games&quot;</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="err">/Route&gt;</span>
          <span class="o">&lt;</span><span class="err">/Routes&gt;</span>
        <span class="o">&lt;</span><span class="err">/BrowserRouter&gt;</span>
      <span class="o">&lt;</span><span class="err">/Provider&gt;</span>
    <span class="o">&lt;</span><span class="err">/LoaderProvider&gt;</span>
</code></pre></div>
<p>Lo que hemos hecho ha sido envolver toda nuestra aplicaci√≥n dentro de nuestro <code>provider</code> de tal modo que esta el <code>children</code> en el fichero <code>LoaderProvider</code>, pero ahora y gracias a la funcionalidad de <code>createContext</code> la variable <code>loading</code> y el m√©todo <code>showLoading</code> estar√°n disponibles en todos los sitios de nuestra aplicaci√≥n.</p>
<p>Ahora para hacer uso de esta funcionalidad nos vamos a nuestra pagina de <code>Categorias</code> e importamos lo siguiente:</p>
<div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useContext</span>  <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;react&quot;</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">LoaderContext</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;../../context/LoaderProvider&quot;</span><span class="p">;</span>
</code></pre></div>
<p>Declaramos una nueva constante:</p>
<div class="highlight"><pre><span></span><code><span class="kd">const</span> <span class="nx">loader</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">LoaderContext</span><span class="p">);</span>
</code></pre></div>
<p>Podemos hace uso del m√©todo <code>showLoading</code> donde queramos, en nuestro caso vamos a crear otro <code>useEffect</code> que estar√° pendiente de los cambios en cualquiera de los <code>loadings</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">loader</span><span class="p">.</span><span class="nx">showLoading</span><span class="p">(</span>
      <span class="nx">isLoadingCreate</span> <span class="o">||</span> <span class="nx">isLoading</span> <span class="o">||</span> <span class="nx">isLoadingDelete</span> <span class="o">||</span> <span class="nx">isLoadingUpdate</span>
    <span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">isLoadingCreate</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">,</span> <span class="nx">isLoadingDelete</span><span class="p">,</span> <span class="nx">isLoadingUpdate</span><span class="p">]);</span>
</code></pre></div>
<p>Probamos la aplicaci√≥n y vemos que cuando se carga el listado o realizamos cualquier llamada al back se muestra brevemente nuestro <code>loader</code>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Pie">
      
        
        <a href="../angular/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: üîµ Angular" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Anterior
              </span>
              üîµ Angular
            </div>
          </div>
        </a>
      
      
        
        <a href="../vuejs/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: üîµ Vue.js" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Siguiente
              </span>
              üîµ Vue.js
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.path", "navigation.indexes"], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}, "search": "../../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.467223ff.min.js"></script>
      
    
  </body>
</html>